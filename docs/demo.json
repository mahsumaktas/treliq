{
  "repos": [
    "vercel/next.js",
    "openclaw/openclaw"
  ],
  "totalPRs": 91,
  "spamCount": 1,
  "rankedPRs": [
    {
      "number": 18050,
      "title": "fix(cli): use standalone script for service restart after update",
      "body": "#### Summary\nUse a standalone restart script written to `os.tmpdir()` before the update begins, preventing the service from stalling when the updater deletes its own files.\n\nFixes #17225\n\n#### Root Cause\nThe update sequence called `runDaemonRestart()` which depends on the installed package files. During an update, those files get replaced/deleted, so the restart command fails or the service process crashes mid-restart.\n\n#### Fix\nBefore the npm install runs, `prepareRestartScript()` writes a self-contained platform-specific restart script to a temp directory:\n- **Linux**: `systemctl --user restart <service>`\n- **macOS**: `launchctl kickstart -k gui/<uid>/<label>`\n- **Windows**: `schtasks /End + /Run`\n\nAfter the update completes, `runRestartScript()` executes the temp script instead of relying on the (potentially corrupted) installed codebase.\n\n#### Tests\n- 7 unit tests in `restart-helper.test.ts` covering all 3 platforms + fallback behavior.\n\n**Sign-Off**\n- Models used: Gemini 3 Pro (Jules), Claude (Anthropic review)\n- Submitter effort: AI-generated (Jules), human-reviewed\n- Keyword: lobster-biscuit\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR fixes a service restart failure during CLI self-update by writing a standalone platform-specific restart script to `os.tmpdir()` before the update begins, instead of relying on the installed package files (which get replaced/deleted during the update).\n\n- Adds `restart-helper.ts` with `prepareRestartScript()` (writes platform-specific shell/bat scripts) and `runRestartScript()` (executes them)\n- Integrates into `update-command.ts`: pre-checks if the gateway service is loaded, prepares the script, then uses it in `maybeRestartService` with a graceful fallback to the existing `runDaemonRestart()` if script preparation fails\n- Includes 7 unit tests covering Linux (systemd), macOS (launchd), Windows (schtasks), unsupported platform fallback, and error handling\n- **Key concern**: `runRestartScript` uses `execFile` which creates a child process that waits for completion — if the service restart kills the CLI process tree, the child script may die too, defeating the purpose of the standalone script. Spawning the script as a detached process would be more robust.\n\n<h3>Confidence Score: 3/5</h3>\n\n- The approach is sound but the implementation has a potential flaw where the restart script child process may not survive the service restart it triggers.\n- Score of 3 reflects that the PR addresses a real problem with a reasonable approach, but the core mechanism (execFile waiting synchronously) may not achieve the goal of surviving the service restart. The fallback to the standard restart method is a good safety net, and the code is well-structured with proper error handling. However, the primary fix may not work as intended under the exact conditions it's designed to handle.\n- Pay close attention to `src/cli/update-cli/restart-helper.ts` — the `runRestartScript` function should spawn the script as a detached process to ensure it survives the parent being killed during service restart.\n\n<sub>Last reviewed commit: e39fa80</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "arosstale",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T12:41:46Z",
      "updatedAt": "2026-02-16T14:46:29Z",
      "headRef": "fix/17225-cli-update-restart",
      "baseRef": "main",
      "filesChanged": 3,
      "additions": 268,
      "deletions": 1,
      "commits": 1,
      "labels": [
        "cli",
        "size: M",
        "experienced-contributor"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        17225
      ],
      "changedFiles": [
        "src/cli/update-cli/restart-helper.test.ts",
        "src/cli/update-cli/restart-helper.ts",
        "src/cli/update-cli/update-command.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18050.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/cli/update-cli/restart-helper.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 2,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 83,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "269 lines changed (268+/1-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "arosstale (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #17225"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (2 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 3195 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: cli, size: M, experienced-contributor"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18107,
      "title": "fix(security): prevent ReDoS in session filter patterns (CWE-1333)",
      "body": "## Summary\n\nThe session filter accepts arbitrary regex patterns from configuration and executes them without complexity validation, enabling **ReDoS (Regular Expression Denial of Service)** attacks (CWE-1333).\n\nA pattern like `(a+)+$` matched against crafted input like `\"aaaaaaaaaaaaaaaaaaaaaaaaaaaa!\"` causes exponential backtracking—each additional 'a' doubles processing time. This freezes the entire Node.js event loop, blocking ALL requests.\n\n**Why this is critical:** This is in the exec-approval system—security-critical infrastructure that gates command execution. A single malicious regex pattern persists in config and survives restarts.\n\n## Changes\n\n- Add `src/utils/safe-regex.ts` with pattern validation utilities:\n  - `isSafeRegexPattern()` — detects nested quantifiers like `(a+)+`, `(a*)+`, etc.\n  - `safePatternMatch()` — tries literal match first, validates regex before execution\n- Update `src/infra/exec-approval-forwarder.ts` to use safe matching\n- Update `src/discord/monitor/exec-approvals.ts` to use safe matching\n- Add 19 comprehensive tests\n\n## Behavior\n\n- Safe patterns: work as before (regex matching)\n- Dangerous patterns: rejected with warning, falls back to literal string match only\n- Invalid regex: handled gracefully, returns false\n\n## Testing\n\n```\npnpm exec vitest run src/utils/safe-regex.test.ts        # 19/19 passing\npnpm exec vitest run src/infra/exec-approval-forwarder   # 6/6 passing  \npnpm exec vitest run src/discord/monitor/exec-approvals  # 43/43 passing\npnpm lint                                                 # 0 errors\n```\n\n## References\n\n- **CWE-1333:** https://cwe.mitre.org/data/definitions/1333.html\n- **OWASP ReDoS:** https://owasp.org/www-community/attacks/Regular_expression_Denial_of_Service_-_ReDoS\n\nFixes #5123\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nAdds ReDoS (Regular Expression Denial of Service) protection to session filter pattern matching in the exec-approval system. The PR introduces a new `safe-regex.ts` utility that validates regex patterns before execution and falls back to literal string matching for dangerous patterns.\n\n**Key changes:**\n- Created `isSafeRegexPattern()` to detect nested quantifiers like `(a+)+` that cause exponential backtracking\n- Created `safePatternMatch()` that tries literal matching first, then validates regex safety before execution\n- Updated both exec-approval integration points to use the new safe pattern matching\n- Added comprehensive test coverage with 19 test cases\n\n**Critical security issue identified:**\nThe regex detection logic on line 20 of `safe-regex.ts` can be bypassed by:\n- Nested parentheses: `((a+))+` - the character class `[^)]` won't match the inner closing paren\n- Curly brace quantifiers: `(a{2,10})+` - these aren't included in the `[+*?]` character class\n- These bypasses could still enable ReDoS attacks despite the protection\n\n**Minor observation:**\nIn `exec-approvals.ts`, no logger is passed to `safePatternMatch()`, so warnings about rejected patterns won't be visible in logs (unlike `exec-approval-forwarder.ts` which passes the logger)\n\n<h3>Confidence Score: 2/5</h3>\n\n- This PR has a critical security bypass that undermines its core protection mechanism\n- While the PR correctly identifies and attempts to fix a real ReDoS vulnerability (CWE-1333), the detection logic has significant gaps that allow dangerous patterns to bypass the safeguards. Patterns using nested parentheses like `((a+))+` or curly-brace quantifiers like `(a{2,10})+` will not be caught by the current validation regex, leaving the system vulnerable to the exact attack this PR aims to prevent. The approach is sound and the integration is clean, but the incomplete pattern detection is a critical flaw in security-critical code\n- Pay close attention to `src/utils/safe-regex.ts` - the pattern detection logic needs to be hardened before merge\n\n<sub>Last reviewed commit: 13d891b</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "brandonwise",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T14:10:58Z",
      "updatedAt": "2026-02-16T14:54:56Z",
      "headRef": "fix/redos-session-filter",
      "baseRef": "main",
      "filesChanged": 4,
      "additions": 190,
      "deletions": 14,
      "commits": 3,
      "labels": [
        "channel: discord",
        "size: M"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        5123
      ],
      "changedFiles": [
        "src/discord/monitor/exec-approvals.ts",
        "src/infra/exec-approval-forwarder.ts",
        "src/utils/safe-regex.test.ts",
        "src/utils/safe-regex.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18107.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/utils/safe-regex.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 82,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "204 lines changed (190+/14-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 74,
          "weight": 0.12,
          "reason": "brandonwise (CONTRIBUTOR, rep: 82)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #5123"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 3986 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: channel: discord, size: M"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18052,
      "title": "fix(agent): isolate last-turn total in token usage reporting",
      "body": "#### Summary\nFix `session_status` incorrectly reporting 100% context usage by isolating the current turn total from accumulated multi-turn usage.\n\nFixes #17016\n\n#### Root Cause\n`recordAssistantUsage` accumulates `cacheRead` across the entire multi-turn run. `toNormalizedUsage` then produces an `usage.total` that reflects all accumulated tokens, which gets clamped to `contextTokens`. Result: every session appears at 100% context utilization.\n\n#### Fix\nIn `runEmbeddedPiAgent` (`src/agents/pi-embedded-runner/run.ts`):\n1. Capture `lastTurnTotal` from the most recent model call response\n2. After `toNormalizedUsage`, replace `usage.total` with `lastTurnTotal` so downstream consumers (status, UI) see the actual current-turn token count\n\n#### Tests\n- `usage-reporting.test.ts`: verifies `usage.total` reflects current turn total, not accumulated.\n\n**Sign-Off**\n- Models used: Gemini 3 Pro (Jules patch), Claude (Anthropic cherry-pick/review)\n- Submitter effort: AI-generated (Jules), human-reviewed and cherry-picked\n- Keyword: lobster-biscuit\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nFixes incorrect 100% context utilization reporting in `session_status` by isolating the last-turn token total from accumulated multi-turn usage. The fix captures `lastTurnTotal` from the most recent model call and overrides `usage.total` (which was inflated by accumulated `cacheRead`/output tokens) after `toNormalizedUsage` normalization.\n\n- **`run.ts`**: Captures `lastTurnTotal` from `lastAssistantUsage?.total ?? attemptUsage?.total` (line 497), then replaces `usage.total` with it after normalization (lines 897-899). This complements the existing `lastCallUsage` mechanism that downstream consumers (`persistSessionUsageUpdate`) already prefer for context-window calculations.\n- **`usage-reporting.test.ts`**: New test verifying `usage.total` reflects the last turn's total (200) rather than the accumulated total (350) in a simulated multi-turn scenario. Reuses shared mocks from `run.overflow-compaction.mocks.shared.js`.\n\n<h3>Confidence Score: 4/5</h3>\n\n- This PR is safe to merge with minimal risk; it is a targeted fix to a usage reporting bug with no behavioral changes to core logic.\n- The change is small and well-scoped (2 lines of logic + 1 test file). The fix correctly addresses the reported bug where accumulated multi-turn token totals caused 100% context utilization display. The existing `lastCallUsage` mechanism already provides the primary defense for context-window display, making this a defense-in-depth improvement. No risk of breaking existing functionality since `usage.total` is only overridden when `lastTurnTotal` is a positive number.\n- No files require special attention. The `run.ts` change is minimal and well-guarded.\n\n<sub>Last reviewed commit: 1fa49bc</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "arosstale",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T12:44:55Z",
      "updatedAt": "2026-02-16T14:39:22Z",
      "headRef": "fix/17016-token-usage-reporting",
      "baseRef": "main",
      "filesChanged": 2,
      "additions": 121,
      "deletions": 0,
      "commits": 1,
      "labels": [
        "agents",
        "size: S",
        "experienced-contributor"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        17016
      ],
      "changedFiles": [
        "src/agents/pi-embedded-runner/run.ts",
        "src/agents/pi-embedded-runner/usage-reporting.test.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18052.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/agents/pi-embedded-runner/usage-reporting.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 82,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "121 lines changed (121+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "arosstale (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #17016"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 2870 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: agents, size: S, experienced-contributor"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 89973,
      "title": "[Docs] Add AGENTS.md and bundled docs guide",
      "body": "Adds a guide for configuring AI coding agents to use the version-matched documentation bundled in `node_modules/next/dist/docs/` (shipped via the `copy_docs` build task in #89850) instead of stale training data.\n\nThe guide covers how the bundled docs work, the `AGENTS.md` and `CLAUDE.md` files generated by `create-next-app --agents-md`, and how to add project-specific instructions outside the `<!-- BEGIN:nextjs-agent-rules -->` markers.",
      "author": "gaojude",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-13T20:25:38Z",
      "updatedAt": "2026-02-16T13:14:31Z",
      "headRef": "docs/ai-coding-agents-guide",
      "baseRef": "canary",
      "filesChanged": 1,
      "additions": 90,
      "deletions": 0,
      "commits": 10,
      "labels": [
        "created-by: Next.js team",
        "Documentation"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        89850
      ],
      "changedFiles": [
        "docs/01-app/02-guides/ai-agents.mdx"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89973.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 2,
      "mergeable": "mergeable",
      "reviewState": "approved",
      "reviewCount": 1,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [
        "timneutkens"
      ],
      "codeowners": [],
      "totalScore": 81,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "90 lines changed (90+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 77,
          "weight": 0.12,
          "reason": "gaojude (CONTRIBUTOR, rep: 94)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #89850"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 60,
          "weight": 0.12,
          "reason": "Docs/config PR — tests not expected"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "2d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 100,
          "weight": 0.08,
          "reason": "Review: approved (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 70,
          "weight": 0.04,
          "reason": "Body: 440 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: created-by: Next.js team, Documentation"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 80,
          "weight": 0.05,
          "reason": "1 reviewer(s): timneutkens"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 89945,
      "title": "test: extend production-browser-sourcemaps test",
      "body": "To test the change in  https://github.com/vercel/next.js/pull/89915",
      "author": "mischnic",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-13T08:13:01Z",
      "updatedAt": "2026-02-16T08:29:29Z",
      "headRef": "mischnic/sourcemap-test",
      "baseRef": "canary",
      "filesChanged": 3,
      "additions": 59,
      "deletions": 19,
      "commits": 1,
      "labels": [
        "created-by: Turbopack team",
        "tests"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "test/production/production-browser-sourcemaps/app/layout.js",
        "test/production/production-browser-sourcemaps/app/page.js",
        "test/production/production-browser-sourcemaps/index.test.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89945.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/production/production-browser-sourcemaps/app/layout.js",
        "test/production/production-browser-sourcemaps/app/page.js",
        "test/production/production-browser-sourcemaps/index.test.ts"
      ],
      "ageInDays": 3,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 3,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 80,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "78 lines changed (59+/19-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "mischnic (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "3 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "3d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Body: 67 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "3 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: created-by: Turbopack team, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 89630,
      "title": "Turbopack: Add importModule() support to webpack loaders",
      "body": "## What?\n\nThis PR adds support for `this.importModule()` in webpack loaders, allowing loaders to dynamically import and execute both CommonJS and ESM modules during the build process.\n\n## Why?\n\nWebpack loaders need a way to import and evaluate modules (both CJS and ESM) as part of their transformation logic. This is useful for loaders that need to:\n- Load configuration files\n- Process dependencies that have their own module dependencies\n- Support both CommonJS and ES modules in the same loader\n\n## How?\n\n### Changes Made:\n\n1. **Added `importModule` IPC message type** (`transforms.ts` and `webpack-loaders.ts`):\n   - New request message type to handle module import requests from loaders\n   - Includes `lookupPath` and `request` parameters\n\n2. **Implemented `importModule()` method in webpack loader context** (`webpack-loaders.ts`):\n   - Supports both callback and Promise-based APIs\n   - Handles absolute and relative paths\n   - Detects ESM modules (`.mjs` files or code with `import`/`export` syntax) and uses Node.js native `import()`\n   - Evaluates CommonJS modules using `vm.runInThisContext()` with proper module context\n   - Returns the module's exports\n\n3. **Added server-side request handler** (`webpack.rs`):\n   - New `ImportModule` response message type\n   - Resolves the requested module through Turbopack's resolver\n   - Returns the compiled code and resolved file path\n   - Tracks file dependencies for invalidation\n\n4. **Updated PostCSS and Webpack contexts** (`postcss.rs`, `webpack.rs`):\n   - Added `evaluate_context` parameter to support module evaluation\n\n5. **Added comprehensive e2e test** (`webpack-loader-import-module.test.ts`):\n   - Tests importing CJS modules with nested dependencies (JSON files)\n   - Tests importing ESM modules\n   - Verifies the loader can transform files using imported module data\n\n### Test Coverage:\n\nThe test suite includes:\n- A custom webpack loader that uses `importModule()` to load configuration\n- CJS module with its own JSON dependency\n- ESM module\n- Verification that all imported data is correctly transformed and rendered\n\nhttps://claude.ai/code/session_01UiNWDNTAGcLmV49FTipUzt",
      "author": "sokra",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-07T07:21:09Z",
      "updatedAt": "2026-02-16T10:27:57Z",
      "headRef": "claude/add-webpack-loader-test-kVsLq",
      "baseRef": "canary",
      "filesChanged": 33,
      "additions": 749,
      "deletions": 25,
      "commits": 21,
      "labels": [
        "Turbopack",
        "created-by: Turbopack team",
        "tests"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "test/e2e/app-dir/webpack-loader-import-module/add.wasm",
        "test/e2e/app-dir/webpack-loader-import-module/alias-config.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/alias-data.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/app/file.test-file.ts",
        "test/e2e/app-dir/webpack-loader-import-module/app/layout.tsx",
        "test/e2e/app-dir/webpack-loader-import-module/app/page.js",
        "test/e2e/app-dir/webpack-loader-import-module/cjs-dep.ts",
        "test/e2e/app-dir/webpack-loader-import-module/config-data.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/config-data.ts",
        "test/e2e/app-dir/webpack-loader-import-module/data-consumer.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/esm-dep.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/image.png",
        "test/e2e/app-dir/webpack-loader-import-module/metadata.json",
        "test/e2e/app-dir/webpack-loader-import-module/module.js",
        "test/e2e/app-dir/webpack-loader-import-module/next.config.js",
        "test/e2e/app-dir/webpack-loader-import-module/test-file-loader.js",
        "test/e2e/app-dir/webpack-loader-import-module/text-to-export-loader.js",
        "test/e2e/app-dir/webpack-loader-import-module/url-wasm-data.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/url-wasm-data.ts",
        "test/e2e/app-dir/webpack-loader-import-module/values.custom-data",
        "test/e2e/app-dir/webpack-loader-import-module/wasm.d.ts",
        "test/e2e/app-dir/webpack-loader-import-module/webpack-loader-import-module.test.ts",
        "turbopack/crates/turbopack-core/src/reference_type.rs",
        "turbopack/crates/turbopack-core/src/source_transform.rs",
        "turbopack/crates/turbopack-ecmascript/src/bytes_source_transform.rs",
        "turbopack/crates/turbopack-ecmascript/src/text_source_transform.rs",
        "turbopack/crates/turbopack-mdx/src/lib.rs",
        "turbopack/crates/turbopack-node/js/src/transforms/transforms.ts",
        "turbopack/crates/turbopack-node/js/src/transforms/webpack-loaders-runtime.ts",
        "turbopack/crates/turbopack-node/js/src/transforms/webpack-loaders.ts",
        "turbopack/crates/turbopack-node/src/transforms/postcss.rs",
        "turbopack/crates/turbopack-node/src/transforms/webpack.rs",
        "turbopack/crates/turbopack/src/lib.rs"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89630.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/e2e/app-dir/webpack-loader-import-module/add.wasm",
        "test/e2e/app-dir/webpack-loader-import-module/alias-config.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/alias-data.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/app/file.test-file.ts",
        "test/e2e/app-dir/webpack-loader-import-module/app/layout.tsx",
        "test/e2e/app-dir/webpack-loader-import-module/app/page.js",
        "test/e2e/app-dir/webpack-loader-import-module/cjs-dep.ts",
        "test/e2e/app-dir/webpack-loader-import-module/config-data.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/config-data.ts",
        "test/e2e/app-dir/webpack-loader-import-module/data-consumer.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/esm-dep.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/image.png",
        "test/e2e/app-dir/webpack-loader-import-module/metadata.json",
        "test/e2e/app-dir/webpack-loader-import-module/module.js",
        "test/e2e/app-dir/webpack-loader-import-module/next.config.js",
        "test/e2e/app-dir/webpack-loader-import-module/test-file-loader.js",
        "test/e2e/app-dir/webpack-loader-import-module/text-to-export-loader.js",
        "test/e2e/app-dir/webpack-loader-import-module/url-wasm-data.mjs",
        "test/e2e/app-dir/webpack-loader-import-module/url-wasm-data.ts",
        "test/e2e/app-dir/webpack-loader-import-module/values.custom-data",
        "test/e2e/app-dir/webpack-loader-import-module/wasm.d.ts",
        "test/e2e/app-dir/webpack-loader-import-module/webpack-loader-import-module.test.ts"
      ],
      "ageInDays": 9,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 3,
      "commentCount": 4,
      "isDraft": false,
      "requestedReviewers": [
        "bgw",
        "mischnic",
        "lukesandberg"
      ],
      "codeowners": [],
      "totalScore": 78,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "774 lines changed (749+/25-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "sokra (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "22 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "9d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (3 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 2143 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "4 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: Turbopack, created-by: Turbopack team, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 80,
          "weight": 0.05,
          "reason": "3 reviewer(s): bgw, mischnic, lukesandberg"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 18131,
      "title": "fix(update): prevent gateway crash loop after failed self-update",
      "body": "## Summary\n\nFixes the issue where the bot consistently breaks and requires manual intervention when users ask it to update itself or modify config via chat (Telegram/WhatsApp). The root cause is a combination of three bugs in the self-update pipeline:\n\n- **Gateway always restarts after update, even on failure** (`server-methods/update.ts`): `scheduleGatewaySigusr1Restart()` ran unconditionally regardless of update result status. When deps install or build failed, the gateway would restart into a broken state (corrupted `node_modules`, missing/partial `dist/`) and enter a crash loop under systemd.\n\n- **No early bail on step failure** (`update-runner.ts`): Unlike the preflight validation section which checks each step's exit code, the main update flow ran deps install → build → ui:build → doctor in sequence without intermediate checks. A failed `pnpm install` would cascade into a broken build, wasting time and leaving things in a worse partial state.\n\n- **Doctor doesn't auto-repair config during update** (`update-runner.ts`): The doctor step ran with `--non-interactive` but not `--fix`, so when a new version's config schema removed or renamed keys, doctor would detect the unknown keys but not strip them. After restart, the gateway's strict config validation would reject the stale keys and crash immediately.\n\n## Changes\n\n1. **`src/gateway/server-methods/update.ts`**: Gate `scheduleGatewaySigusr1Restart()` on `result.status === \"ok\"`. Failed/skipped updates still write the restart sentinel so the agent can report the error to the user, but the running gateway process stays alive.\n\n2. **`src/infra/update-runner.ts`**: Add exit-code checks after deps install, build, and ui:build steps — matching the pattern already used in the preflight section. Also pass `--fix` to the doctor invocation so unknown config keys from schema changes are auto-stripped before restart.\n\n3. **`src/infra/update-runner.test.ts`**: Two new test cases verifying early bail when deps install or build fails (confirms subsequent steps are not executed). Updated existing tests for the new `--fix` flag.\n\n## Test plan\n\n- [x] `pnpm test -- --run src/infra/update-runner.test.ts` — all 15 tests pass (13 existing + 2 new)\n- [x] `pnpm test -- --run src/gateway/server-methods/` — all 81 tests pass\n- [x] `pnpm build` — clean, no type errors\n- [x] `pnpm check` — format + lint clean\n- [ ] Manual test: trigger `update.run` with a version that has a failing build step, verify gateway stays running and reports error to chat\n- [ ] Manual test: trigger `update.run` with a version that introduces an unknown config key, verify doctor auto-strips it\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR fixes a critical crash loop in the self-update pipeline by addressing three related bugs: unconditional gateway restarts after failed updates, missing early-bail on step failures, and doctor not auto-repairing config during updates.\n\n- **Gateway restart gated on success**: `scheduleGatewaySigusr1Restart()` in `update.ts` now only runs when `result.status === \"ok\"`, preventing restarts into broken states (corrupted `node_modules`, partial `dist/`). The response payload `ok` field is also updated to `result.status !== \"error\"`, correctly distinguishing \"skipped\" (non-error) from \"error\" states.\n- **Early bail on step failure**: `update-runner.ts` now checks exit codes after deps install, build, and ui:build steps, matching the pattern already established in the preflight validation section. Failed steps return structured error results with distinct `reason` values (`deps-install-failed`, `build-failed`, `ui-build-failed`).\n- **Doctor `--fix` flag**: The doctor invocation during updates now passes `--fix` alongside `--non-interactive`, enabling auto-stripping of unknown config keys from schema changes between versions. This prevents startup validation crashes after version upgrades.\n- **Tests**: Two new test cases verify early bail behavior for deps install and build failures. Existing tests are updated for the `--fix` flag.\n\n<h3>Confidence Score: 5/5</h3>\n\n- This PR is safe to merge — it adds defensive checks to prevent crash loops without altering the happy-path behavior.\n- All three changes are well-scoped defensive fixes that follow existing patterns in the codebase. The restart gate is a straightforward conditional check. The early-bail checks mirror the preflight section. The --fix flag is a documented CLI option with clear behavior. New tests cover the two most important failure paths. No regressions are expected.\n- No files require special attention.\n\n<sub>Last reviewed commit: a1f5cfc</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "RamiNoodle733",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T14:48:44Z",
      "updatedAt": "2026-02-16T14:54:04Z",
      "headRef": "fix/self-update-crash-loop",
      "baseRef": "main",
      "filesChanged": 3,
      "additions": 115,
      "deletions": 10,
      "commits": 1,
      "labels": [
        "gateway",
        "size: S"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "src/gateway/server-methods/update.ts",
        "src/infra/update-runner.test.ts",
        "src/infra/update-runner.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18131.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/infra/update-runner.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 77,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "125 lines changed (115+/10-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 75,
          "weight": 0.12,
          "reason": "RamiNoodle733 (CONTRIBUTOR, rep: 88)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 4702 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: gateway, size: S"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 89965,
      "title": "Improve task pipelining",
      "body": "Stacked on #89972\r\n\r\nThe pipelining function has some awkward structure. This change cleans up the structure a bit\r\n\r\nNotably there is a potentially meaningful change here where the final user provided task in `runInSequentialTasks` gets the same Fast Immediate treatment as the other tasks do. There is an implicit final task which does the assertion that there are no remaining immediates unflushed and then resolves the original tasks value.",
      "author": "gnoff",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-13T18:00:16Z",
      "updatedAt": "2026-02-15T02:01:38Z",
      "headRef": "jstory/cleanup-task-pipelining",
      "baseRef": "jstory/use-stage-controller-for-prerender",
      "filesChanged": 4,
      "additions": 142,
      "deletions": 170,
      "commits": 1,
      "labels": [
        "type: next",
        "created-by: Next.js team",
        "tests"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        89972
      ],
      "changedFiles": [
        "packages/next/errors.json",
        "packages/next/src/server/app-render/app-render-render-utils.ts",
        "packages/next/src/server/app-render/app-render.tsx",
        "packages/next/src/server/app-render/instant-validation/instant-validation.tsx"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89965.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 2,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 2,
      "commentCount": 2,
      "isDraft": false,
      "requestedReviewers": [
        "unstubbable"
      ],
      "codeowners": [],
      "totalScore": 76,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "312 lines changed (142+/170-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "gnoff (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #89972"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "2d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (2 reviews)"
        },
        {
          "name": "body_quality",
          "score": 70,
          "weight": 0.04,
          "reason": "Body: 444 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "2 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "170 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, created-by: Next.js team, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 80,
          "weight": 0.05,
          "reason": "1 reviewer(s): unstubbable"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 18112,
      "title": "fix(daemon): gateway install on macOS ignores fnm/nvm node (#18090)",
      "body": "## Summary\n\n`openclaw gateway install` on macOS hardcodes `/opt/homebrew/bin/node` in the launchd plist even when the user runs the command under fnm/nvm. The node that's actually running the install gets ignored.\n\nCloses #18090\n\nlobster-biscuit\n\n## Root Cause\n\n`resolvePreferredNodePath` in `runtime-paths.ts` only checks hardcoded system candidates (`/opt/homebrew/bin/node`, `/usr/local/bin/node`, `/usr/bin/node`). It never looks at `process.execPath` — the node actually executing the install command. So fnm/nvm users always get Homebrew's node in their plist.\n\n## Changes\n\n- Before: plist always uses the first accessible system node candidate, regardless of what node is running the CLI\n- After: checks `process.execPath` first — if it's a supported version (22+), uses it; otherwise falls back to system node as before\n\nFiles touched:\n- `src/daemon/runtime-paths.ts` — added `processExecPath` param, version-check it before system fallback\n- `src/commands/daemon-install-helpers.ts` — pass `process.execPath` to the resolver\n- `src/commands/node-daemon-install-helpers.ts` — same\n\nNote: the second half of #18090 (extending version manager PATH dirs to macOS in `service-env.ts`) is already covered by open PR #4709, so I left that alone.\n\n## Tests\n\n- `runtime-paths.test.ts` — 5 new tests covering: fnm node preferred over system node, fallback when execPath not provided, fallback when execPath version is too old, fallback when version check throws, fallback on empty version string, runtime !== \"node\" short-circuit, Linux platform behavior. All fail before fix, pass after.\n- `pnpm build && pnpm check` pass\n- All 89 daemon directory tests pass\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nFixed `openclaw gateway install` on macOS to respect the node version actually running the install command (e.g., fnm/nvm-managed node) instead of always hardcoding Homebrew's node in the launchd plist. The fix adds `processExecPath` parameter to `resolvePreferredNodePath`, checks it first for version compatibility (Node 22+), and falls back to system node if the running node is unsupported or unavailable.\n\n- Added `processExecPath` parameter to `resolvePreferredNodePath` in `runtime-paths.ts`\n- Modified both install helpers (`daemon-install-helpers.ts`, `node-daemon-install-helpers.ts`) to pass `process.execPath`\n- Added 7 comprehensive tests covering fnm/nvm preference, fallback scenarios, and cross-platform behavior\n- Graceful fallback: if `processExecPath` version check fails (missing/non-executable/too old), falls back to system node\n- Maintains backward compatibility: when `processExecPath` not provided, behavior unchanged\n\n<h3>Confidence Score: 5/5</h3>\n\n- This PR is safe to merge with minimal risk\n- The implementation is well-designed with proper error handling, comprehensive test coverage (7 new tests covering all edge cases), and maintains backward compatibility. The change is focused and addresses the reported issue directly without introducing unnecessary complexity. All edge cases are handled gracefully with appropriate fallbacks.\n- No files require special attention\n\n<sub>Last reviewed commit: 28b8219</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "yinghaosang",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T14:16:07Z",
      "updatedAt": "2026-02-16T14:18:12Z",
      "headRef": "fix/daemon-prefer-execpath-node",
      "baseRef": "main",
      "filesChanged": 4,
      "additions": 203,
      "deletions": 0,
      "commits": 1,
      "labels": [
        "gateway",
        "commands",
        "size: M",
        "trusted-contributor"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        18090
      ],
      "changedFiles": [
        "src/commands/daemon-install-helpers.ts",
        "src/commands/node-daemon-install-helpers.ts",
        "src/daemon/runtime-paths.test.ts",
        "src/daemon/runtime-paths.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18112.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/daemon/runtime-paths.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 74,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "203 lines changed (203+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 56,
          "weight": 0.12,
          "reason": "yinghaosang (CONTRIBUTOR, rep: 23)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #18090"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 3228 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: gateway, commands, size: M, trusted-contributor"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18103,
      "title": "fix: session-memory hook reads reset file after /new or /reset",
      "body": "When a user runs /new or /reset, the session-memory hook was reading from the current (empty/rotated) session file instead of the .jsonl.reset.* file containing the actual conversation.\n\nThis fix adds:\n1. findMostRecentResetFile() - finds the most recent reset file for a session\n2. getRecentSessionContentWithResetFallback() - reads from reset file when current file is empty\n3. getRecentSessionContentFromFile() - helper to extract messages from any session file\n\nThe hook now properly falls back to reading the reset file when the current session file does not contain meaningful content, preserving conversation history for memory indexing.\n\nFixes openclaw/openclaw#18088\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR fixes the session-memory hook to read conversation history from reset files when the current session file is empty after `/new` or `/reset`. It adds three new functions: `findMostRecentResetFile()` to locate the most recent `.jsonl.reset.*` file, `getRecentSessionContentWithResetFallback()` as the new entry point with fallback logic, and `getRecentSessionContentFromFile()` (renamed from the original `getRecentSessionContent`).\n\n- **Logic gap**: When `fs.readFile` throws on the current session file (e.g., file doesn't exist yet), the outer `catch` returns `null` without attempting the reset file fallback — defeating the purpose of the fix in that edge case.\n- **Redundant I/O**: On the happy path (current file has content), the session file is read twice — once to check for messages, then again inside `getRecentSessionContentFromFile`.\n- **No test coverage**: The three new functions and the reset fallback path have no test coverage. The existing tests all write content directly to the session file, so the fallback is never exercised.\n\n<h3>Confidence Score: 3/5</h3>\n\n- This PR is low-risk as it only affects the session-memory hook's file reading logic and fails gracefully, but has an edge case where the fallback is bypassed.\n- Score of 3 reflects that the core approach is correct and the change is defensive, but there's a logic gap where the reset file fallback is skipped when the current file read throws (rather than returning empty content), plus no test coverage for the new fallback paths.\n- Pay attention to `src/hooks/bundled/session-memory/handler.ts` — the error handling in `getRecentSessionContentWithResetFallback` should try the reset fallback when the current file read fails, not just when the file is empty.\n\n<sub>Last reviewed commit: 6d378c7</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "MisterGuy420",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T14:06:40Z",
      "updatedAt": "2026-02-16T14:13:22Z",
      "headRef": "fix/18088-session-memory-reset-fallback",
      "baseRef": "main",
      "filesChanged": 1,
      "additions": 78,
      "deletions": 3,
      "commits": 1,
      "labels": [
        "size: S"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        18088
      ],
      "changedFiles": [
        "src/hooks/bundled/session-memory/handler.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18103.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 74,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "81 lines changed (78+/3-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 57,
          "weight": 0.12,
          "reason": "MisterGuy420 (CONTRIBUTOR, rep: 26)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #18088"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 2594 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: size: S"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18096,
      "title": "fix: release stale session locks and add watchdog for hung API calls",
      "body": "## Summary\n\nWhen a model API call hangs indefinitely (e.g., Anthropic quota exceeded mid-call, network timeout that doesn't respect abort signals), the gateway acquires a session `.jsonl.lock` but the promise never resolves, so the `try/finally` block never reaches `release()`. Since the owning PID is the gateway itself, `isPidAlive()` always returns `true` — stale detection cannot help. The session is permanently deadlocked until gateway restart.\n\n## Changes\n\n### 1. In-process lock watchdog (`session-write-lock.ts`)\n- Track `acquiredAt` timestamp on each held lock\n- 60-second interval timer checks all held locks\n- Auto-releases any lock held longer than `maxHoldMs` (default 5 min)\n- **This is the primary fix** — catches the hung-API-call case that try/finally cannot\n\n### 2. Gateway startup cleanup (`server-startup.ts`)\n- On boot, scan all agent session directories for `*.jsonl.lock` files\n- Remove locks with dead PIDs or older than `staleMs` (30 min)\n- Log each cleaned lock for diagnostics\n\n### 3. `openclaw doctor` stale lock detection (`doctor-session-locks.ts`)\n- New health check scans for `.jsonl.lock` files\n- Reports PID status and age of each lock found\n- In `--fix` mode, removes stale locks automatically\n\n### 4. Transcript error entry on API failure (`attempt.ts`)\n- When `promptError` is set, write an error marker to the session transcript before releasing the lock\n- Preserves conversation history even on model API failures\n\n## Testing\n- Added unit tests for the watchdog logic (`runLockWatchdogCheck`)\n- Added unit tests for `cleanStaleLockFiles`\n- Added test for doctor session lock health check\n- All existing tests pass, `tsc --noEmit` clean\n\n## Root Cause Analysis\n\nSee the detailed analysis in [issue #18060 comment](https://github.com/openclaw/openclaw/issues/18060#issuecomment-3908357661).\n\nThe key insight: the existing `try/finally` in `attempt.ts` does release the lock on normal errors. The problem is specifically when the API call **hangs indefinitely** — the `abort()` mechanism fires but `abortable()` may not force the underlying HTTP promise to reject if the connection doesn't respect the abort signal. The watchdog is the safety net for this edge case.\n\nCloses #18060\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR implements a multi-layered solution to prevent session deadlocks when model API calls hang indefinitely. The implementation adds an in-process watchdog timer that automatically releases locks held longer than 5 minutes, startup cleanup to remove stale lock files from crashed processes, and `openclaw doctor` integration for manual diagnostics. The code also improves error handling by persisting prompt transport errors to session transcripts.\n\n**Key changes:**\n- Watchdog timer checks in-process locks every 60 seconds and force-releases any held longer than `maxHoldMs` (default 5 min)\n- Gateway startup scans for and removes stale `.jsonl.lock` files (dead PID or older than 30 min)  \n- `openclaw doctor` command now reports session lock status with `--fix` mode to clean stale locks\n- Prompt errors are now written to transcripts as custom entries before lock release\n- Comprehensive test coverage for watchdog, cleanup, and edge cases\n\n**Implementation quality:**\n- Proper object identity checks (`current !== held`) prevent stale release handles from affecting new locks\n- `releasePromise` pattern ensures cleanup operations are idempotent and wait for in-progress releases\n- Stale detection correctly distinguishes between dead PIDs, missing metadata, and age-based staleness\n- Lock acquisition checks in-process `HELD_LOCKS` map before file-based stale detection, preventing false positives\n\n<h3>Confidence Score: 5/5</h3>\n\n- This PR is safe to merge with minimal risk\n- The implementation is well-designed with comprehensive safeguards. Tests verify critical edge cases including watchdog force-release, stale handle behavior, and startup cleanup. The code correctly handles race conditions through object identity checks and idempotent release operations. The watchdog timer uses `unref()` to prevent blocking process exit, and all cleanup operations are best-effort with proper error handling. The changes are focused and don't modify core session logic beyond lock management.\n- No files require special attention\n\n<sub>Last reviewed commit: a3c9e64</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(4/5) You can add custom instructions or style guidelines for the agent [here](https://app.greptile.com/review/github)!</sub>\n\n<!-- /greptile_comment -->",
      "author": "Grynn",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T13:58:34Z",
      "updatedAt": "2026-02-16T14:04:12Z",
      "headRef": "fix/session-lock-deadlock-18060",
      "baseRef": "main",
      "filesChanged": 8,
      "additions": 650,
      "deletions": 46,
      "commits": 1,
      "labels": [
        "gateway",
        "commands",
        "agents",
        "size: L"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        18060
      ],
      "changedFiles": [
        "src/agents/pi-embedded-runner.e2e.test.ts",
        "src/agents/pi-embedded-runner/run/attempt.ts",
        "src/agents/session-write-lock.e2e.test.ts",
        "src/agents/session-write-lock.ts",
        "src/commands/doctor-session-locks.test.ts",
        "src/commands/doctor-session-locks.ts",
        "src/commands/doctor.ts",
        "src/gateway/server-startup.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18096.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/agents/pi-embedded-runner.e2e.test.ts",
        "src/agents/session-write-lock.e2e.test.ts",
        "src/commands/doctor-session-locks.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 74,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "696 lines changed (650+/46-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "Grynn (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #18060"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "3 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 4553 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: gateway, commands, agents, size: L"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 89685,
      "title": "Add `retry()`, `componentStack`, and `ownerStack` to error.js",
      "body": "Extends the error components API to give better control over recovery. Previously, the `reset()` prop only cleared the error state and re-rendered the children. However, this only handles a temporary rendering error.\r\n\r\nThe error can be due to data fetching or an RSC phase. In these cases, `reset()` alone is not sufficient. Users would even need to implement retry logic using `router.refresh()`.\r\n\r\nTherefore, this PR adds a new `retry()` prop that calls `router.refresh()` and `reset()` within a `startTransition()` to provide built-in retry logic. This feature is expected to be preferred over the `reset()` prop. Only the cases where you'd choose `reset()` are when you have a reason to do a sync reset without loading any new data.\r\n\r\nThis PR also adds `componentStack` and `ownerStack` (dev-only) to the error components API to improve DX and debugging of error handling.\r\n\r\nCloses NAR-767",
      "author": "devjiwonchoi",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-08T22:51:20Z",
      "updatedAt": "2026-02-15T02:45:31Z",
      "headRef": "jiwon/02-08-add_retry_logic_for_error.js",
      "baseRef": "jiwon/02-08-allow_reset_from_user_s_global-error",
      "filesChanged": 7,
      "additions": 273,
      "deletions": 12,
      "commits": 4,
      "labels": [
        "type: next",
        "created-by: Next.js team",
        "tests"
      ],
      "ciStatus": "pending",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "packages/next/src/client/components/builtin/global-error.tsx",
        "packages/next/src/client/components/error-boundary.tsx",
        "packages/next/src/next-devtools/userspace/app/app-dev-overlay-error-boundary.tsx",
        "test/e2e/app-dir/errors/app/client-component/error.js",
        "test/e2e/app-dir/errors/app/server-component/error.js",
        "test/e2e/app-dir/errors/app/server-component/recover/page.js",
        "test/e2e/app-dir/errors/index.test.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89685.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/e2e/app-dir/errors/app/client-component/error.js",
        "test/e2e/app-dir/errors/app/server-component/error.js",
        "test/e2e/app-dir/errors/app/server-component/recover/page.js",
        "test/e2e/app-dir/errors/index.test.ts"
      ],
      "ageInDays": 7,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 2,
      "commentCount": 3,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 73,
      "signals": [
        {
          "name": "ci_status",
          "score": 50,
          "weight": 0.15,
          "reason": "CI: pending"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "285 lines changed (273+/12-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "devjiwonchoi (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "4 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "7d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (2 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 897 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "3 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, created-by: Next.js team, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 18117,
      "title": "fix(discord): send initial message for non-forum thread creation",
      "body": "## Background\n\nWhile building an automated workflow where Clawdbot creates threads in Discord channels, I discovered that the `message` parameter in `thread-create` was silently ignored. The thread was created successfully, but the initial message never appeared. After multiple failed attempts, I documented the workaround in my memory files:\n\n> ❌ `thread-create` with `message` parameter — creates thread but message doesn't go in\n> ❌ `thread-reply` — sends to main channel instead of thread\n> ✅ Workaround: `thread-create` (no message) + `send` (target=threadId)\n\nThis two-step workaround works but is unintuitive. The `message` parameter should just work.\n\n## Problem\n\nWhen creating a thread in a non-forum channel with the `content` parameter, the content was silently ignored. This happened because only forum/media channels support the `message` field in the Discord thread creation API request body.\n\n**Example that didn't work:**\n```\nmessage action=thread-create messageId=xxx threadName=\"Discussion\" message=\"Hello!\"\n```\nThe thread was created, but \"Hello!\" never appeared.\n\n## Solution\n\nAfter creating the thread, if:\n1. The channel is NOT a forum/media channel, AND\n2. The `content` parameter is provided and non-empty\n\nWe now send the initial message as a separate API call to the newly created thread.\n\n## Changes\n\n- `src/discord/send.messages.ts`: Added follow-up message send for non-forum threads\n- `src/discord/send.creates-thread.test.ts`: Added two test cases covering this behavior\n\n## Testing\n\nAdded tests for:\n- Creating a standalone thread with content (non-forum channel)\n- Creating a message-attached thread with content\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nFixes thread creation with initial messages in non-forum Discord channels. Previously, the `content` parameter was silently ignored when creating threads in text channels because only forum/media channels support the `message` field in the thread creation API. The fix sends the initial message as a separate API call after thread creation for non-forum channels, while maintaining the existing behavior for forum/media channels. Test coverage includes both standalone threads and message-attached threads.\n\n<h3>Confidence Score: 5/5</h3>\n\n- This PR is safe to merge with minimal risk\n- The implementation correctly handles the Discord API limitation where non-forum channels don't support the `message` field during thread creation. The fix is minimal, well-tested with comprehensive test coverage for both standalone and message-attached threads, and maintains backward compatibility for forum/media channels. The logic correctly skips channel type detection for message-attached threads (which can't exist in forums) and only sends the follow-up message when appropriate.\n- No files require special attention\n\n<sub>Last reviewed commit: 857424b</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "zerone0x",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T14:24:10Z",
      "updatedAt": "2026-02-16T14:26:05Z",
      "headRef": "fix/discord-thread-create-content",
      "baseRef": "main",
      "filesChanged": 2,
      "additions": 66,
      "deletions": 1,
      "commits": 1,
      "labels": [
        "channel: discord",
        "size: S",
        "experienced-contributor"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "src/discord/send.creates-thread.test.ts",
        "src/discord/send.messages.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18117.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/discord/send.creates-thread.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 73,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "67 lines changed (66+/1-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "zerone0x (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 2925 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: channel: discord, size: S, experienced-contributor"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18097,
      "title": "(feat): mmr and temporal decay",
      "body": "## Summary\r\n\r\n  - Problem: #13391 drifted from current `main`, and part of its config UI metadata touched `src/config/schema.ts` in a way that no longer matches current config schema organization.\r\n  - Why it matters: a stale PR is harder to review/merge and can introduce avoidable conflict/churn; memory ranking improvements were still relevant and should be mergeable now.\r\n  - What changed: ported MMR re-ranking + temporal decay onto current `main`, aligned config metadata to `src/config/schema.labels.ts` + `src/config/schema.help.ts`, preserved opt-in defaults, and revalidated tests/checks.\r\n  - What did NOT change (scope boundary): no default behavior change for users; no new memory backends, no channel/integration behavior changes, no auth/sandbox capability changes.\r\n\r\n  ## Change Type (select all)\r\n\r\n  - [ ] Bug fix\r\n  - [x] Feature\r\n  - [x] Refactor\r\n  - [x] Docs\r\n  - [ ] Security hardening\r\n  - [ ] Chore/infra\r\n\r\n  ## Scope (select all touched areas)\r\n\r\n  - [ ] Gateway / orchestration\r\n  - [ ] Skills / tool execution\r\n  - [ ] Auth / tokens\r\n  - [x] Memory / storage\r\n  - [ ] Integrations\r\n  - [x] API / contracts\r\n  - [x] UI / DX\r\n  - [ ] CI/CD / infra\r\n\r\n  ## Linked Issue/PR\r\n\r\n  - Closes #\r\n  - Related #13391\r\n\r\n  ## User-visible / Behavior Changes\r\n\r\n  - New optional hybrid memory controls:\r\n    - `agents.defaults.memorySearch.query.hybrid.mmr.enabled` (default `false`)\r\n    - `agents.defaults.memorySearch.query.hybrid.mmr.lambda` (default `0.7`)\r\n    - `agents.defaults.memorySearch.query.hybrid.temporalDecay.enabled` (default `false`)\r\n    - `agents.defaults.memorySearch.query.hybrid.temporalDecay.halfLifeDays` (default `30`)\r\n  - When enabled, hybrid search pipeline becomes:\r\n    - `Vector + Keyword -> Weighted Merge -> Temporal Decay -> Sort -> MMR -> Top-K`\r\n  - Defaults remain unchanged (features are opt-in).\r\n\r\n  ## Security Impact (required)\r\n\r\n  - New permissions/capabilities? (`No`)\r\n  - Secrets/tokens handling changed? (`No`)\r\n  - New/changed network calls? (`No`)\r\n  - Command/tool execution surface changed? (`No`)\r\n  - Data access scope changed? (`No`)\r\n  - If any `Yes`, explain risk + mitigation:\r\n    - None.\r\n\r\n  ## Repro + Verification\r\n\r\n  ### Environment\r\n\r\n  - OS: macOS (local dev machine)\r\n  - Runtime/container: Node/pnpm repo workflow\r\n  - Model/provider: Opus-4-6, Codex-5-3\r\n  - Integration/channel (if any): N/A\r\n  - Relevant config (redacted): default test config + memory hybrid settings in test cases\r\n\r\n  ### Steps\r\n\r\n  1. Check out branch from current `main`.\r\n  2. Run:\r\n     - `pnpm vitest run src/memory/hybrid.test.ts src/memory/mmr.test.ts src/memory/temporal-decay.test.ts src/config/schema.test.ts`\r\n  3. Run:\r\n     - `pnpm check`\r\n\r\n  ### Expected\r\n\r\n  - Memory/config tests pass.\r\n  - Formatting/type/lint checks pass.\r\n  - Diff is limited to memory feature, config schema wiring, docs/changelog.\r\n\r\n  ### Actual\r\n\r\n  - All listed tests/checks passed locally.\r\n\r\n  ## Evidence\r\n\r\n  Attach at least one:\r\n\r\n  - [x] Failing test/log before + passing after\r\n  - [ ] Trace/log snippets\r\n  - [ ] Screenshot/recording\r\n  - [ ] Perf numbers (if relevant)\r\n\r\n  ## Human Verification (required)\r\n\r\n  - Verified scenarios:\r\n    - MMR ranking behavior and tie-break coverage via `src/memory/mmr.test.ts`\r\n    - Temporal decay behavior (dated files, evergreen exclusions, mtime fallback) via `src/memory/temporal-decay.test.ts`\r\n    - Hybrid merge async pipeline integration via `src/memory/hybrid.test.ts`\r\n    - Config schema export/hints still valid via `src/config/schema.test.ts`\r\n  - Edge cases checked:\r\n    - MMR disabled/default behavior\r\n    - Lambda bounds handling\r\n    - Temporal decay disabled/default behavior\r\n    - No timestamp available (fallback/no decay)\r\n\r\n  ## Compatibility / Migration\r\n\r\n  - Backward compatible? (`Yes`)\r\n  - Config/env changes? (`Yes`)\r\n  - Migration needed? (`No`)\r\n  - If yes, exact upgrade steps:\r\n    - N/A. Optional new config keys only.\r\n\r\n  ## Failure Recovery (if this breaks)\r\n\r\n  - How to disable/revert this change quickly:\r\n    - Set `hybrid.mmr.enabled: false` and `hybrid.temporalDecay.enabled: false` (defaults already false).\r\n  - Files/config to restore:\r\n    - Revert PR commits touching memory hybrid post-processing and config schema metadata.\r\n  - Known bad symptoms reviewers should watch for:\r\n    - Unexpected hybrid ranking order shifts when features are enabled.\r\n    - Incorrect decay on evergreen memory files.\r\n\r\n  ## Risks and Mitigations\r\n\r\n  - Risk: ranking regressions when users enable MMR/temporal decay.\r\n    - Mitigation: features are opt-in and independently toggleable; defaults preserve prior behavior.\r\n  - Risk: stale config UI metadata if wired to wrong schema file.\r\n    - Mitigation: metadata placed in current canonical files (`schema.labels.ts`, `schema.help.ts`) and validated with schema tests.\r\n  - Risk: async merge path could introduce subtle ordering differences.\r\n    - Mitigation: targeted hybrid/MMR/temporal tests and full `pnpm check` passed.\r\n\r\n<!-- greptile_comment -->\r\n\r\n<h3>Greptile Summary</h3>\r\n\r\nAdds MMR (Maximal Marginal Relevance) re-ranking and optional temporal decay to the hybrid memory search pipeline. Both features are opt-in (disabled by default) and can be enabled independently via `memorySearch.query.hybrid.mmr` and `memorySearch.query.hybrid.temporalDecay`.\r\n\r\n**Key Changes:**\r\n- Implements MMR algorithm using Jaccard similarity on tokenized content to reduce near-duplicate results\r\n- Adds exponential temporal decay with configurable half-life to boost recent memories over stale ones\r\n- Evergreen files (`MEMORY.md`, non-dated `memory/*.md`) are exempt from temporal decay\r\n- Integrates both features into the existing hybrid search pipeline: `Vector + Keyword → Merge → Temporal Decay → Sort → MMR → Top-K`\r\n- Config schema properly aligned with current `schema.labels.ts` and `schema.help.ts` structure\r\n- Comprehensive test coverage (371 tests for MMR, 173 for temporal decay)\r\n- Excellent documentation with real-world examples in `docs/concepts/memory.md`\r\n\r\n**Implementation Quality:**\r\n- Clean separation of concerns with dedicated modules (`mmr.ts`, `temporal-decay.ts`)\r\n- Proper async handling in hybrid merge pipeline\r\n- Edge case handling (tie-breaking, negative scores, future dates, missing timestamps)\r\n- Type-safe with generic constraints\r\n- Lambda clamping and half-life validation\r\n- Efficient token caching in MMR algorithm\r\n\r\n<h3>Confidence Score: 5/5</h3>\r\n\r\n- This PR is safe to merge with minimal risk\r\n- The implementation is production-ready with excellent test coverage, proper defaults (features opt-in), clean architecture, comprehensive documentation, and no breaking changes to existing behavior. The code follows best practices with proper error handling, type safety, and edge case coverage.\r\n- No files require special attention\r\n\r\n<sub>Last reviewed commit: b5d57df</sub>\r\n\r\n<!-- greptile_other_comments_section -->\r\n\r\n<!-- /greptile_comment -->",
      "author": "rodrigouroz",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T14:01:46Z",
      "updatedAt": "2026-02-16T14:17:35Z",
      "headRef": "feat/mmr-temporal-refresh-2026-02-16",
      "baseRef": "main",
      "filesChanged": 14,
      "additions": 1228,
      "deletions": 25,
      "commits": 5,
      "labels": [
        "docs",
        "agents",
        "size: XL",
        "trusted-contributor"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        13391,
        13391
      ],
      "changedFiles": [
        "CHANGELOG.md",
        "docs/concepts/memory.md",
        "src/agents/memory-search.ts",
        "src/config/schema.help.ts",
        "src/config/schema.labels.ts",
        "src/config/types.tools.ts",
        "src/config/zod-schema.agent-runtime.ts",
        "src/memory/hybrid.test.ts",
        "src/memory/hybrid.ts",
        "src/memory/manager.ts",
        "src/memory/mmr.test.ts",
        "src/memory/mmr.ts",
        "src/memory/temporal-decay.test.ts",
        "src/memory/temporal-decay.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18097.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/memory/hybrid.test.ts",
        "src/memory/mmr.test.ts",
        "src/memory/temporal-decay.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 73,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "1253 lines changed (1228+/25-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "rodrigouroz (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #13391, #13391"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "3 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 6981 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: docs, agents, size: XL, trusted-contributor"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 17996,
      "title": "fix(cron): resolve accountId from agent bindings in isolated sessions",
      "body": "**tl;dr:** 2 files, ~30 lines, 5 new tests — mirrors existing inbound binding resolution for the outbound path.\r\n\r\n## Summary\r\n\r\nCloses the remaining gap from #12628 / #16259: the **message tool path** in isolated cron sessions now correctly resolves the agent's bound Telegram (or Discord) account.\r\n\r\n- When an isolated cron session has no `lastAccountId` (first-run or fresh session), `resolveDeliveryTarget()` now falls back to the agent's bound account from the `bindings` config\r\n- Session-derived `accountId` still takes precedence when present\r\n- Uses the existing `buildChannelAccountBindings()` utility — no new abstractions\r\n\r\n## Problem\r\n\r\nIn multi-account setups (one bot per agent), the `message` tool in isolated cron sessions defaults to `accountId: \"default\"`. Since named accounts (e.g. `accounts[\"willy\"]`) don't include a `\"default\"` key, `resolveTelegramToken()` fails with \"bot token missing\".\r\n\r\nPR #16259 fixed the **delivery path** (threading `accountId` through `CronDelivery`), but the **message tool path** (`delivery.mode: \"none\"` jobs where the agent prompt uses the `message` tool directly) remained broken.\r\n\r\n**Resolution chain that fails:**\r\n1. `resolveDeliveryTarget()` → `resolveSessionDeliveryTarget()` → `lastAccountId` is `undefined` (fresh session)\r\n2. `undefined` flows to `runEmbeddedPiAgent()` as `agentAccountId`\r\n3. Message tool defaults to `DEFAULT_ACCOUNT_ID` (\"default\")\r\n4. `resolveTelegramToken({ accountId: \"default\" })` → `accounts[\"default\"]` doesn't exist → fail\r\n\r\n## Fix\r\n\r\nIn `resolveDeliveryTarget()`, when `accountId` is undefined and the channel is known, look up the agent's bound account via `buildChannelAccountBindings()`. This mirrors the same binding resolution already used for inbound routing.\r\n\r\n```typescript\r\nlet accountId = resolved.accountId;\r\nif (!accountId && channel) {\r\n  const bindings = buildChannelAccountBindings(cfg);\r\n  const byAgent = bindings.get(channel);\r\n  const boundAccounts = byAgent?.get(normalizeAgentId(agentId));\r\n  if (boundAccounts && boundAccounts.length > 0) {\r\n    accountId = boundAccounts[0];\r\n  }\r\n}\r\n```\r\n\r\n## Changes\r\n\r\n| File | Change |\r\n|------|--------|\r\n| `src/cron/isolated-agent/delivery-target.ts` | Fall back to agent binding when session has no `lastAccountId` |\r\n| `src/cron/isolated-agent/delivery-target.test.ts` | 5 test cases covering binding fallback, session precedence, multi-agent, and cross-channel scenarios |\r\n\r\n## Test plan\r\n\r\n- [x] New unit tests: binding fallback, session precedence, no-binding, multi-agent selection, cross-channel isolation\r\n- [x] All existing cron tests pass (127 tests, 27 files)\r\n- [x] All routing tests pass (45 tests)\r\n- Validated against production multi-agent Telegram setup (3 agents, 3 bots)\r\n\r\nFixes #17889\r\nRelated: #12628, #16259, #9503\r\n\r\n\r\n<!-- greptile_comment -->\r\n\r\n<h3>Greptile Summary</h3>\r\n\r\nFixes isolated cron sessions to correctly resolve bot account IDs in multi-account setups by falling back to agent bindings when session has no `lastAccountId`. The fix adds a lookup to `buildChannelAccountBindings()` after checking session state, ensuring the message tool can resolve the correct bot token for first-run or fresh cron sessions.\r\n\r\n- Adds binding fallback logic in `resolveDeliveryTarget()` (lines 75-87) that checks agent bindings when `accountId` is undefined\r\n- Preserves existing precedence: session-derived `accountId` takes priority over bindings\r\n- Comprehensive test coverage: 5 test cases validate binding fallback, session precedence, multi-agent selection, and cross-channel isolation\r\n- Uses existing utilities (`buildChannelAccountBindings`, `normalizeAgentId`) following established patterns in the codebase\r\n\r\n<h3>Confidence Score: 5/5</h3>\r\n\r\n- This PR is safe to merge with minimal risk\r\n- The fix is well-designed and follows existing patterns. It adds a simple fallback mechanism that only activates when session state is missing, preserving all existing behavior. The comprehensive test suite covers key edge cases (session precedence, multi-agent, cross-channel), and the implementation uses established utilities from the codebase.\r\n- No files require special attention\r\n\r\n<sub>Last reviewed commit: 2ff8568</sub>\r\n\r\n<!-- greptile_other_comments_section -->\r\n\r\n<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>\r\n\r\n<!-- /greptile_comment -->",
      "author": "simonemacario",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T11:03:02Z",
      "updatedAt": "2026-02-16T14:11:07Z",
      "headRef": "fix/isolated-cron-session-account-binding",
      "baseRef": "main",
      "filesChanged": 2,
      "additions": 150,
      "deletions": 3,
      "commits": 1,
      "labels": [
        "size: S"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        17889
      ],
      "changedFiles": [
        "src/cron/isolated-agent/delivery-target.test.ts",
        "src/cron/isolated-agent/delivery-target.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17996.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/cron/isolated-agent/delivery-target.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 73,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "153 lines changed (150+/3-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 42,
          "weight": 0.12,
          "reason": "simonemacario (NONE, rep: 69)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #17889"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 4378 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: size: S"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 17630,
      "title": "Fix LINE media temp files accumulating in os.tmpdir",
      "body": "## Description\n`downloadLineMedia` writes received media to `os.tmpdir()` but never cleans up the files. On a busy LINE bot, this causes unbounded temp file growth until the OS reboots or tmpdir is manually purged.\n\n## Fix\nSchedule a best-effort `unlink` 5 minutes after download — enough time for the media pipeline to process the file. The timer is `unref`'d so it doesn't keep the process alive.\n\n## Tests\nAdded `src/line/download-cleanup.test.ts` verifying:\n- Temp files are created with correct prefix\n- Cleanup removes the file\n- Cleanup handles non-existent files gracefully\n\n## AI Transparency\n- **Assisted by**: OpenClaw Agent (Claude 3.5 Sonnet / Opus)\n- **Testing level**: Fully tested with new unit tests (`src/line/download-cleanup.test.ts`)\n- **Prompt strategy**: Self-correction loop based on codebase analysis",
      "author": "Clawborn",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T01:24:33Z",
      "updatedAt": "2026-02-16T14:38:09Z",
      "headRef": "fix/line-media-temp-cleanup",
      "baseRef": "main",
      "filesChanged": 2,
      "additions": 79,
      "deletions": 0,
      "commits": 3,
      "labels": [
        "size: S"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "src/line/download-cleanup.test.ts",
        "src/line/download.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17630.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/line/download-cleanup.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 2,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 72,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "79 lines changed (79+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 29,
          "weight": 0.12,
          "reason": "Clawborn (NONE, rep: 25)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 825 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "2 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: size: S"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 17866,
      "title": "fix: accept workspace-relative session transcript paths",
      "body": "## Problem\n\nSubagent transcript files in workspace directory (e.g., `/Users/me/workspace/<uuid>.jsonl`) are rejected by Dashboard because they fall outside the sessions directory tree.\n\n## Solution\n\nAdded `isPlausibleSessionTranscriptPath()` to accept workspace-relative paths with UUID basename while rejecting arbitrary paths.\n\n## Changes\n\n- Added validation function for workspace transcript paths\n- Added 4 test cases covering UUID/non-UUID paths\n\nFixes #17860\n",
      "author": "irchelper",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T07:54:27Z",
      "updatedAt": "2026-02-16T14:22:20Z",
      "headRef": "fix/17860-session-path-resolution",
      "baseRef": "main",
      "filesChanged": 2,
      "additions": 161,
      "deletions": 0,
      "commits": 1,
      "labels": [
        "size: S"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        17860
      ],
      "changedFiles": [
        "src/config/sessions/paths.ts",
        "src/config/sessions/sessions.test.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17866.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/config/sessions/sessions.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 72,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "161 lines changed (161+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 41,
          "weight": 0.12,
          "reason": "irchelper (NONE, rep: 66)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #17860"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 70,
          "weight": 0.04,
          "reason": "Body: 465 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: size: S"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 16565,
      "title": "feat: Add tool_invocation provenance for A2A tool calls",
      "body": "# PR: Add tool_invocation provenance for A2A tool calls\n\n## Summary\n\nExtends `inputProvenance` to support agent-to-agent tool invocations, enabling structured multi-agent workflows with full provenance tracking.\n\n## Related Work\n\n- **#15154** — Fixed session path resolution for multi-agent (merged 2026-02-13)\n- **#10486** — A2A protocol plugin for external agent communication\n- **#7516** — Auto-inject From:/To: identity headers in agent-to-agent messages\n- **#10999** — A2A announce delivery fix\n\nThis PR is the missing piece: provenance fields for internal `agent_call`/`debate_call` tools.\n\n## The Problem\n\nOpenClaw has two agent communication modes:\n- `sessions_spawn` — Ephemeral sub-agent for fire-and-forget tasks\n- `sessions_send` — Unstructured text between persistent sessions\n\n**What's missing:** Structured skill invocation between peers. Agents couldn't call each other with declared capabilities, receive structured responses, or track what skill was invoked.\n\nThe `agent_call` and `debate_call` tools EXIST and WORK, but their provenance is incomplete:\n- They currently send `kind: \"inter_session\"` (same as sessions_send)\n- They **don't** include `skill` or `mode` fields\n- Target agents can't distinguish tool calls from generic inter-session messages\n- Target agents don't know what skill was invoked or in what mode\n\n## The Solution\n\nComplete the provenance pipeline:\n\n| Change | File |\n|--------|------|\n| Add `\"tool_invocation\"` to kind enum | `src/sessions/input-provenance.ts` |\n| Add `skill?: string` to InputProvenance type | `src/sessions/input-provenance.ts` |\n| Add `mode?: string` to InputProvenance type | `src/sessions/input-provenance.ts` |\n| Update `normalizeInputProvenance()` | `src/sessions/input-provenance.ts` |\n| Add fields to TypeBox schema | `src/gateway/protocol/schema/agent.ts` |\n| Update tools to use `\"tool_invocation\"` kind | `agent-call-tool.ts`, `debate-call-tool.ts` |\n| Add helper functions for provenance checking | `src/sessions/input-provenance.ts` |\n\n### Helper Functions\n\n- `isToolInvocationProvenance(value)` — Check if provenance is a tool invocation\n- `isCrossSessionProvenance(value)` — Check if provenance is any cross-session communication (`inter_session` or `tool_invocation`)\n- `hasInterSessionUserProvenance(message)` — Updated to use `isCrossSessionProvenance()` so tool invocations are filtered correctly\n\n## Use Cases\n\n### 1. Peer-to-Peer Skill Invocation\n\n```\nAtlas calls Clio.investigate({query: \"...\", depth: \"deep\"})\n  ↓\nClio sees provenance: {kind: \"tool_invocation\", skill: \"investigate\", mode: \"execute\"}\n  ↓\nClio routes to research workflow, returns structured {findings, sources, confidence}\n```\n\n### 2. Multi-Agent Debate\n\n```\ndebate_call({proposer: Atlas, critics: [Metis, Mentor], resolver: Atlas})\n  ↓\nEach participant sees full provenance: what skill, what mode, who requested\n  ↓\nConfidence progression tracked across rounds\n```\n\n### 3. Service Discovery\n\nAgents advertise capabilities (research, critique, investigate) and call each other directly. No orchestrator bottleneck.\n\n## Design Decisions\n\n| Decision | Rationale |\n|----------|-----------|\n| Add to existing provenance system | Minimal change, consistent with existing patterns |\n| Schemaless services | Let agents discover capabilities organically |\n| `tool_invocation` kind | Distinguishes from `inter_session` (sessions_send) |\n| `skill` field | Target knows what capability was invoked |\n| `mode` field | Target knows execute vs critique mode |\n\n## What This Enables\n\n| Before | After |\n|--------|-------|\n| Agent sees \"from another session\" | Agent sees \"from agent_call, skill=X, mode=Y\" |\n| Skill routing requires parsing message body | Skill routing via provenance fields |\n| Incomplete logging | Full call chain visible |\n| Mode tracking lost | Agent distinguishes execute vs critique |\n\n## Security Considerations\n\nThis change is additive only:\n- No new attack surface (provenance already validated)\n- No new fields exposed (skill/mode are caller-provided)\n- Consistent with existing validation patterns\n\n## Testing\n\nVerified in production multi-agent environment:\n- ✅ Bidirectional A2A (Atlas ↔ Metis)\n- ✅ Service invocation (research, consult, ping, investigate)\n- ✅ Graceful failure (unknown skill → helpful response)\n- ✅ Provenance tracking (sourceSessionKey, sourceTool preserved)\n- ✅ Multiple agents (5+ agents: main, metis, clio, deepthought, mentor)\n\n## Related Issues\n\nMulti-agent context from recent bug reports:\n- **#15141** — Session path validation failure in multi-agent setups (fixed by #15154)\n- **#15245** — resolveSessionFilePath missing agentId\n- **#15601** — Multi-agent session path resolution issues\n\nThese demonstrate the complexity of multi-agent routing. Proper provenance tracking helps debug these scenarios.\n\n## Files Changed\n\n- `src/sessions/input-provenance.ts` — Add `tool_invocation` kind, `skill`/`mode` fields to type and normalizer; add helper functions `isToolInvocationProvenance()` and `isCrossSessionProvenance()`; update `hasInterSessionUserProvenance()` to use `isCrossSessionProvenance()`\n- `src/gateway/protocol/schema/agent.ts` — Add `skill`/`mode` fields to TypeBox schema\n- `src/agents/tools/agent-call-tool.ts` — Change `kind` from `\"inter_session\"` to `\"tool_invocation\"`, add `skill`/`mode` (2 locations)\n- `src/agents/tools/debate-call-tool.ts` — Change `kind` from `\"inter_session\"` to `\"tool_invocation\"`, add `skill`/`mode`\n\n## Breaking Changes\n\nNone. This is additive only.\n\n---\n\n**AI-assisted:** Claude + battle-tested in production multi-agent environment\n\n**Co-authored-by:** Metis (A2A architecture rationale)\n\n<!-- greptile_comment -->\n\n<h2>Greptile Overview</h2>\n\n<h3>Greptile Summary</h3>\n\nThis PR adds `tool_invocation` provenance tracking for agent-to-agent tool calls (`agent_call` and `debate_call`), enabling structured multi-agent workflows with full provenance visibility.\n\n## Key Changes\n\n- Extended `InputProvenance` type with `tool_invocation` kind and added `skill`/`mode` fields to differentiate tool-based invocations from generic inter-session messages\n- Added helper functions `isToolInvocationProvenance()` and `isCrossSessionProvenance()` for provenance checking\n- Updated `hasInterSessionUserProvenance()` to use `isCrossSessionProvenance()` so tool invocations are properly filtered\n- Updated TypeBox schema (`AgentParamsSchema`) to include `skill` and `mode` fields in `inputProvenance`\n- Modified `agent_call` and `debate_call` tools to send `kind: \"tool_invocation\"` with `skill` and `mode` metadata\n\n## Architecture\n\nThe changes complete the provenance pipeline for A2A tool invocations:\n- Target agents can now distinguish between `sessions_send` (generic inter-session) vs structured tool calls (`tool_invocation`)\n- `skill` field enables agents to route to appropriate capabilities\n- `mode` field distinguishes execute vs critique modes\n- All provenance flows through existing validation in `normalizeInputProvenance()`\n\n## Security\n\nStrong security validation is present:\n- Agent ID validation (`^[a-z0-9_-]+$`, max 64 chars)\n- Session key validation (`^agent:[a-z0-9_-]+:[a-z0-9_-]+$`)\n- Skill name validation (alphanumeric, hyphens, underscores, max 128 chars)\n- Input size limits (1MB max)\n- Confidence bounding (0-1 range, handles NaN/Infinity)\n- A2A policy enforcement via `checkA2APolicy()`\n- Comprehensive security audit logging\n- Concurrency limits for critics (batch size: 3)\n- Minimum critic success threshold\n\n## Testing\n\nTest coverage is comprehensive:\n- 7 unit tests for `agent_call` (policy, self-calls, structured I/O, timeout, fire-and-forget, text fallback, errors)\n- 3 unit tests for `debate_call` (proposer failure, full debate flow, early stopping)\n- 3 integration tests (tool creation, schema validation)\n- Extensive validation tests (50+ test cases for security validators)\n\n## Issue Found\n\nThe `skill` field in `inputProvenance` uses the raw `skillRaw` parameter instead of the validated `skill` variable in two locations in `agent-call-tool.ts:296` and `agent-call-tool.ts:332`. While this is low risk (validation occurs before provenance creation), it's inconsistent with the validation pattern.\n\n<h3>Confidence Score: 4/5</h3>\n\n- This PR is safe to merge with low risk - changes are additive, well-tested, and security-hardened\n- Score of 4 reflects high confidence with minor issues: comprehensive test coverage (13 tests), strong security validation, additive-only changes with no breaking modifications, and clear architectural design. Two minor logic issues exist where raw skill parameters are used in provenance instead of validated values (lines 296, 332 in agent-call-tool.ts), but these don't affect runtime behavior since validation occurs before provenance creation. The implementation follows existing patterns, includes extensive security hardening (input validation, size limits, confidence bounding, audit logging), and demonstrates thorough consideration of edge cases.\n- src/agents/tools/agent-call-tool.ts requires minor fix to use validated skill parameter in provenance (lines 296, 332)\n\n<sub>Last reviewed commit: bec8d8e</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>\n\n<!-- /greptile_comment -->",
      "author": "mdlmarkham",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-14T21:45:24Z",
      "updatedAt": "2026-02-16T14:13:03Z",
      "headRef": "feat/a2a-tool-invocation-provenance",
      "baseRef": "main",
      "filesChanged": 25,
      "additions": 4360,
      "deletions": 20,
      "commits": 18,
      "labels": [
        "app: web-ui",
        "gateway",
        "agents",
        "size: XL"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        15154,
        10486,
        7516,
        10999,
        15141,
        15154,
        15245,
        15601
      ],
      "changedFiles": [
        "IMPLEMENTATION.md",
        "PR-A2A-TOOL-INVOCATION-CRITIQUE.md",
        "PR-A2A-TOOL-INVOCATION-REVIEW.md",
        "PR-A2A-TOOL-INVOCATION.md",
        "PR-A2A-TOOL-INVOCATION.patch",
        "RFC-A2A-RESPONSE-ROUTING.md",
        "SECURITY_FIXES_SUMMARY.md",
        "src/agents/openclaw-tools.ts",
        "src/agents/tools/a2a-tools.integration.test.ts",
        "src/agents/tools/agent-call-tool.test.ts",
        "src/agents/tools/agent-call-tool.ts",
        "src/agents/tools/debate-call-tool.test.ts",
        "src/agents/tools/debate-call-tool.ts",
        "src/agents/tools/sessions-helpers.ts",
        "src/agents/tools/sessions-helpers.validation.test.ts",
        "src/gateway/protocol/schema/agent.ts",
        "src/gateway/server-methods/agent-job.ts",
        "src/gateway/server-methods/agent.test.ts",
        "src/gateway/server-methods/agent.ts",
        "src/gateway/server-methods/types.ts",
        "src/gateway/server-runtime-state.ts",
        "src/gateway/server.impl.ts",
        "src/infra/agent-events.ts",
        "src/infra/response-router.ts",
        "src/sessions/input-provenance.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/16565.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/agents/tools/a2a-tools.integration.test.ts",
        "src/agents/tools/agent-call-tool.test.ts",
        "src/agents/tools/debate-call-tool.test.ts",
        "src/agents/tools/sessions-helpers.validation.test.ts",
        "src/gateway/server-methods/agent.test.ts"
      ],
      "ageInDays": 1,
      "mergeable": "unknown",
      "reviewState": "commented",
      "reviewCount": 6,
      "commentCount": 2,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 72,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 30,
          "weight": 0.07,
          "reason": "4380 lines changed (4360+/20-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 46,
          "weight": 0.12,
          "reason": "mdlmarkham (NONE, rep: 82)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #15154, #10486, #7516, #10999, #15141, #15154, #15245, #15601"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "5 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (6 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 9278 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "2 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: app: web-ui, gateway, agents, size: XL"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 89281,
      "title": "fix: resolve transition deadlock when navigating with pending server action",
      "body": "## What?\n\nThis PR fixes a transition deadlock that occurs when a navigation action is dispatched while a server action is pending.\n\n## Why?\n\nFixes #84299\n\nWhen a user triggers a navigation with a pending server action (e.g., clicking a button that calls `router.push()` followed by a server action inside `startTransition`), and then clicks again before the first action completes, the application enters a deadlock state where:\n- The navigation never completes\n- Subsequent button presses have no effect\n- The app becomes unresponsive\n\nThis was introduced in v15.2.2 (likely by #75362).\n\n## How?\n\nThe root cause was in the action queue logic in `app-router-instance.ts`. When a navigation action is dispatched while a server action is pending:\n\n1. The pending action is correctly marked as `discarded`\n2. However, the discarded action's promise was **never resolved**\n3. This left React's `useTransition` hanging indefinitely, causing the deadlock\n\nThe fix ensures that discarded actions still resolve their promises (using the current state) even if the result is discarded. This allows the React transition to complete successfully without applying the stale state update.\n\n```typescript\n// Before: Promise never resolved for discarded actions\nif (action.discarded) {\n  runRemainingActions(actionQueue, setState)\n  return  // ❌ BUG: Promise never resolved!\n}\n\n// After: Resolve promise with current state\nif (action.discarded) {\n  runRemainingActions(actionQueue, setState)\n  action.resolve(actionQueue.state)  // ✅ FIX: Transition can complete\n  return\n}\n```\n\n## Test Plan\n\nAdded e2e test that:\n1. Starts a transition with navigation + server action\n2. Clicks again while the first action is pending\n3. Verifies navigation completes without deadlock\n\nThe test reproduces the exact scenario from the issue report.",
      "author": "Suhaib3100",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-01-30T09:09:43Z",
      "updatedAt": "2026-02-16T06:25:01Z",
      "headRef": "fix/action-queue-transition-deadlock",
      "baseRef": "canary",
      "filesChanged": 7,
      "additions": 141,
      "deletions": 4,
      "commits": 4,
      "labels": [
        "type: next",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        84299
      ],
      "changedFiles": [
        "packages/next/src/client/components/app-router-instance.ts",
        "test/e2e/app-dir/action-queue-transition-deadlock/action-queue-transition-deadlock.test.ts",
        "test/e2e/app-dir/action-queue-transition-deadlock/app/actions.ts",
        "test/e2e/app-dir/action-queue-transition-deadlock/app/layout.tsx",
        "test/e2e/app-dir/action-queue-transition-deadlock/app/other/page.tsx",
        "test/e2e/app-dir/action-queue-transition-deadlock/app/page.tsx",
        "test/e2e/app-dir/action-queue-transition-deadlock/next.config.js"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89281.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/e2e/app-dir/action-queue-transition-deadlock/action-queue-transition-deadlock.test.ts",
        "test/e2e/app-dir/action-queue-transition-deadlock/app/actions.ts",
        "test/e2e/app-dir/action-queue-transition-deadlock/app/layout.tsx",
        "test/e2e/app-dir/action-queue-transition-deadlock/app/other/page.tsx",
        "test/e2e/app-dir/action-queue-transition-deadlock/app/page.tsx",
        "test/e2e/app-dir/action-queue-transition-deadlock/next.config.js"
      ],
      "ageInDays": 17,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 9,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 71,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "145 lines changed (141+/4-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "Suhaib3100 (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #84299"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "6 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "17d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1816 chars"
        },
        {
          "name": "activity",
          "score": 90,
          "weight": 0.04,
          "reason": "9 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 89956,
      "title": "fix(next/legacy/image): add deployment id (dpl) query string support",
      "body": "## What?\n\nAdd deployment ID (`?dpl`) query string support to `next/legacy/image`.\n\n## Why?\n\nThe shared `image-loader.ts` (used by `next/image`) already extracts and appends the `?dpl` deployment ID to optimized image URLs. The legacy image component (`next/legacy/image`) has its own inline `defaultLoader` that was missing this handling, causing inconsistent behavior between the two components.\n\n## How?\n\nPorted the `?dpl` deployment ID logic from `image-loader.ts` to the legacy component's `defaultLoader`:\n\n1. Import `getDeploymentId` from the shared deployment-id module\n2. Extract `?dpl` from the src URL before validation (to avoid false positives on query string checks)\n3. Append `&dpl=<deploymentId>` to the optimized image URL for local images",
      "author": "sokra",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-13T13:50:10Z",
      "updatedAt": "2026-02-15T15:54:19Z",
      "headRef": "sokra/legacy-image-loader",
      "baseRef": "canary",
      "filesChanged": 1,
      "additions": 17,
      "deletions": 1,
      "commits": 1,
      "labels": [
        "type: next",
        "created-by: Turbopack team"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "packages/next/src/client/legacy/image.tsx"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89956.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 3,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 2,
      "commentCount": 2,
      "isDraft": true,
      "requestedReviewers": [
        "ijjk"
      ],
      "codeowners": [],
      "totalScore": 71,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "18 lines changed (17+/1-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "sokra (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "3d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (2 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 755 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "2 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, created-by: Turbopack team"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 80,
          "weight": 0.05,
          "reason": "1 reviewer(s): ijjk"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90017,
      "title": "fix: read middleware config when using grouped export (export { middleware, config })",
      "body": "## For Contributors\n\n### Fixing a bug\n\n- [x] Related issues linked using `fixes #56451`\n- [x] Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\n- [x] Errors have a helpful link attached (N/A – no new error messages)\n\n---\n\n### What?\n\nWhen middleware uses a **grouped export** for config (e.g. `const config = { matcher: [...] }; export { middleware, config };`), the matcher was not applied. Middleware then ran for every request, including static assets. Inline `export const config = ...` worked correctly.\n\n### Why?\n\n`extractExportedConstValue()` only handled `ExportDeclaration` + `VariableDeclaration` (inline `export const config = ...`). It did not resolve a top-level `const config = ...` that was later re-exported via `export { middleware, config }`.\n\n### How?\n\n- **`packages/next/src/build/analysis/extract-const-value.ts`**: Extended `extractExportedConstValue()` to:\n  1. Handle `ExportNamedDeclaration` with an inline `VariableDeclaration` (e.g. `export const config = ...` when parsed as a named export).\n  2. If the exported name is still not found, scan the module body for a top-level `VariableDeclaration` with the same name, so that `const config = { matcher: [...] }; export { middleware, config };` is supported.\n- **Test**: Added fixture `test/unit/fixtures/page-runtime/middleware-grouped-export.js` and a unit test in `test/unit/parse-page-static-info.test.ts` that asserts middleware config (matchers) is correctly parsed for the grouped-export case.\n\nFixes #56451",
      "author": "randyyates",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-15T01:33:43Z",
      "updatedAt": "2026-02-15T02:16:53Z",
      "headRef": "fix-56451-middleware-grouped-export-config",
      "baseRef": "canary",
      "filesChanged": 3,
      "additions": 130,
      "deletions": 16,
      "commits": 2,
      "labels": [
        "type: next",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        56451,
        56451
      ],
      "changedFiles": [
        "packages/next/src/build/analysis/extract-const-value.ts",
        "test/unit/fixtures/page-runtime/middleware-grouped-export.js",
        "test/unit/parse-page-static-info.test.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90017.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/unit/fixtures/page-runtime/middleware-grouped-export.js",
        "test/unit/parse-page-static-info.test.ts"
      ],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 2,
      "commentCount": 2,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 71,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "146 lines changed (130+/16-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 43,
          "weight": 0.12,
          "reason": "randyyates (NONE, rep: 72)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #56451, #56451"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "2 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (2 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 1557 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "2 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 17269,
      "title": "feat(memoryrouter): Add MemoryRouter persistent memory integration",
      "body": "# feat(memoryrouter): Add MemoryRouter persistent memory integration\n\n## Summary\n\nAdds optional [MemoryRouter](https://memoryrouter.ai) integration that gives OpenClaw persistent memory across sessions. When enabled, conversations are automatically remembered and relevant context is injected into every query. Your AI actually remembers you.\n\n**Why:** OpenClaw sessions are ephemeral — the AI forgets everything between conversations. This integration adds opt-in persistent memory so users who want continuity can enable it with one command.\n\n**BYOK** — provider API keys pass through untouched. MemoryRouter handles memory only.\n\n## How It Works\n\n```\nUser → OpenClaw → MemoryRouter (inject memory) → Provider → Response\n```\n\nMemoryRouter intercepts the request, injects relevant past context into the system prompt, and forwards to the provider. The response returns untouched. Memory metadata is in response headers only — zero changes to the provider's response body.\n\n## CLI\n\n```bash\nopenclaw mr <key>            # Enable with memory key\nopenclaw mr status           # Vault stats (memories, tokens)\nopenclaw mr status --json    # Machine-readable\nopenclaw mr upload           # Upload workspace + session history\nopenclaw mr upload <path>    # Upload specific file or directory\nopenclaw mr delete           # Clear vault\nopenclaw mr off              # Disable (direct provider access)\nopenclaw mr setup            # Interactive setup wizard\n```\n\n`memoryrouter` also works as the full command name.\n\n## Config\n\n```json\n{\n  \"memoryRouter\": {\n    \"enabled\": true,\n    \"key\": \"mk_xxx\"\n  }\n}\n```\n\nOptional fields: `endpoint` (custom API URL), `fallbackOnUnsupported` (default: true).\n\n## What Gets Stored\n\nOnly direct human ↔ AI conversation. Nothing else.\n\n| Context | Store | Retrieve |\n|---------|:-----:|:--------:|\n| User talks to bot | ✅ | ✅ |\n| Bot responds to user | ✅ | ✅ |\n| Tool use (internal LLM calls) | — | ✅ |\n| Subagent work | — | ✅ |\n\nDetection: context messages are inspected for `tool_result` (Anthropic) or `role: \"tool\"` (OpenAI) to identify intermediate calls.\n\n## Upload\n\n`openclaw mr upload` auto-discovers and uploads:\n\n- Workspace files: `MEMORY.md`, `memory/**/*.md`, `AGENTS.md`, `TOOLS.md`\n- Session transcripts: `~/.openclaw/agents/main/sessions/*.jsonl`\n\nPer-batch progress is shown during upload with stored/skipped counts. Broken content (e.g. orphaned Unicode) is skipped gracefully — everything else stores.\n\n## Supported Providers\n\nAnthropic, OpenAI, Google, xAI, Cerebras, DeepSeek, Mistral, OpenRouter, Azure, Ollama\n\nUnsupported providers fall back to direct access automatically.\n\n## Breaking Changes\n\nNone. Opt-in, disabled by default.\n\n## Testing\n\nAll passing:\n\n- [x] Enable, disable, status, delete, setup commands\n- [x] Upload with 23K+ items → 14K+ vectors stored, 0 failures\n- [x] Memory recall across people, projects, and conversations\n- [x] Subagents and tool iterations don't pollute storage\n- [x] Provider keys pass through correctly (BYOK)\n- [x] Unsupported providers fall back to direct access\n- [x] Onboarding wizard integration\n- [x] Broken Unicode handled gracefully\n\n## Files Changed\n\n18 files, +1,869 lines\n\n| File | Change |\n|------|--------|\n| `src/agents/memoryrouter-integration.ts` | **New** — routing, headers, storage policy, tool-use detection |\n| `src/agents/pi-embedded-runner/run/attempt.ts` | Apply MR to agent streamFn |\n| `src/cli/memoryrouter-cli.ts` | **New** — all CLI commands |\n| `src/cli/program/register.subclis.ts` | Register `memoryrouter` + `mr` alias |\n| `src/commands/onboard-memoryrouter.ts` | **New** — onboarding wizard step |\n| `src/config/types.memory.ts` | Config types |\n| `src/config/types.openclaw.ts` | Add memoryRouter to OpenClawConfig |\n| `src/config/zod-schema.ts` | Zod schema validation |\n| `src/config/plugin-auto-enable.ts` | Config state |\n| `src/plugins/config-state.ts` | Config state for MR |\n| `src/logging/redact.ts` | Add `mk_` key redaction pattern |\n| `src/wizard/onboarding.ts` | Hook into onboarding flow |\n| `extensions/memoryrouter/*` | Plugin extension (README, index, manifest, package) |\n\n---\n\n## Local Validation\n\n- ✅ `pnpm build` — clean\n- ✅ `pnpm lint` — 0 warnings, 0 errors\n- ✅ Manual testing: all CLI commands, upload (14K+ vectors), memory recall, storage policy\n- ⬜ `pnpm test` — not yet run (no test files added in this PR, existing tests unmodified)\n\n## Scope\n\nSingle focused feature: MemoryRouter integration. All changes serve this one purpose — CLI commands, agent routing, config schema, onboarding wizard step, key redaction, and plugin extension.\n\n## 🤖 AI Assistance Disclosure\n\nThis PR was **AI-assisted** using Claude (via Cursor IDE).\n\n- **Testing level:** Fully tested — build, lint, all CLI commands exercised, upload tested with 23K+ items producing 14K+ vectors with 0 failures, memory recall verified with live queries, storage policy (subagent/tool-use filtering) confirmed working.\n- **I understand what the code does:** The integration wraps the agent's `streamFn` to route LLM calls through MemoryRouter's API, injecting `X-Memory-Key` and `X-Memory-Store` headers. The storage policy inspects context messages for `tool_result`/`role: \"tool\"` to detect intermediate calls. The CLI commands interact with MemoryRouter's REST API for vault management. The upload pipeline batches items at 100/2MB with 150ms pacing.\n- **Prompts/session logs:** Available on request — this was a multi-hour iterative session covering implementation, debugging (CF Workers AI token limits, Unicode chunking, retrieval tuning), and testing.\n\n## Greptile Review Issues — Resolved\n\n- ~~Dev scripts (`clawdbot`, `clawdbot-mr`) with hardcoded paths~~ — **Removed** from the commit.\n- ~~`mk_` keys not in logging redaction~~ — **Added** `mk_`/`mk-` pattern to `src/logging/redact.ts`.\n",
      "author": "John-Rood",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-15T16:00:18Z",
      "updatedAt": "2026-02-16T14:54:56Z",
      "headRef": "feat/memoryrouter-integration",
      "baseRef": "main",
      "filesChanged": 18,
      "additions": 1831,
      "deletions": 5,
      "commits": 1,
      "labels": [
        "cli",
        "commands",
        "agents",
        "size: XL"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "extensions/memoryrouter/README.md",
        "extensions/memoryrouter/index.ts",
        "extensions/memoryrouter/openclaw.plugin.json",
        "extensions/memoryrouter/package.json",
        "package.json",
        "pnpm-lock.yaml",
        "src/agents/memoryrouter-integration.ts",
        "src/agents/pi-embedded-runner/run/attempt.ts",
        "src/cli/memoryrouter-cli.ts",
        "src/cli/program/register.subclis.ts",
        "src/commands/onboard-memoryrouter.ts",
        "src/config/plugin-auto-enable.ts",
        "src/config/types.memory.ts",
        "src/config/types.openclaw.ts",
        "src/config/zod-schema.ts",
        "src/logging/redact.ts",
        "src/plugins/config-state.ts",
        "src/wizard/onboarding.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17269.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 3,
      "commentCount": 3,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 71,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "1836 lines changed (1831+/5-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 74,
          "weight": 0.12,
          "reason": "John-Rood (CONTRIBUTOR, rep: 84)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (3 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 5808 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "3 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "Risky files: package.json"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: cli, commands, agents, size: XL"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18129,
      "title": "fix: add catalog validation to `models set` command",
      "body": "## Summary\n\n- Problem: `models set` accepts any string as model ID — typos silently persist in config and fail at runtime with \"Unknown model\"\n- Why it matters: Silent misconfiguration is hard to diagnose; empty `{}` entries bypass provider routing constraints configured for other models\n- What changed: Added catalog validation (rejects unknown model IDs) and a warning when adding models with no existing config entry\n- What did NOT change (scope boundary): No changes to `/model` chat command, `models list`, or the allowlist/routing logic itself\n\n## Change Type (select all)\n\n- [x] Bug fix\n- [ ] Feature\n- [ ] Refactor\n- [ ] Docs\n- [ ] Security hardening\n- [ ] Chore/infra\n\n## Scope (select all touched areas)\n\n- [ ] Gateway / orchestration\n- [ ] Skills / tool execution\n- [ ] Auth / tokens\n- [ ] Memory / storage\n- [ ] Integrations\n- [ ] API / contracts\n- [x] UI / DX\n- [ ] CI/CD / infra\n\n## Linked Issue/PR\n\n- Closes #17183\n\n## User-visible / Behavior Changes\n\n- `openclaw models set <invalid-model>` now exits with an error: `Unknown model: <id>` (previously succeeded silently)\n- `openclaw models set <valid-model-without-config>` now prints a warning before applying (previously silent)\n- When the catalog is empty (initial setup before first gateway connection), validation is skipped to avoid blocking setup\n\n## Security Impact (required)\n\n- New permissions/capabilities? `No`\n- Secrets/tokens handling changed? `No`\n- New/changed network calls? `No`\n- Command/tool execution surface changed? `No`\n- Data access scope changed? `No`\n\n## Repro + Verification\n\n### Environment\n\n- OS: Amazon Linux 2023 (aarch64)\n- Runtime/container: Node.js v22, npm global install\n- Model/provider: OpenRouter\n- Integration/channel (if any): Slack (socket mode)\n- Relevant config (redacted): `agents.defaults.models` with provider routing entries\n\n### Steps\n\n1. `openclaw models set openrouter/nonexistent/fake-model-v99`\n2. Observe error message\n3. `openclaw models set openrouter/openai/gpt-4o` (valid model not in config)\n4. Observe warning + successful update\n\n### Expected\n\n- Step 1: Error with \"Unknown model\" message\n- Step 3: Warning about empty config, then success\n\n### Actual\n\n- Before fix: Both steps succeed silently\n- After fix: Matches expected behavior\n\n## Evidence\n\n- [x] Trace/log snippets\n\nBefore:\n```\n$ openclaw models set openrouter/typo/nonexistent\nConfig updated.\nDefault model: openrouter/typo/nonexistent\n```\n\nAfter:\n```\n$ openclaw models set openrouter/typo/nonexistent\nError: Unknown model: openrouter/typo/nonexistent\nModel not found in catalog. Run \"openclaw models list\" to see available models.\n```\n\n## Human Verification (required)\n\n- Verified scenarios: Typo rejection, valid model switch, new model addition warning\n- Edge cases checked: Empty catalog (initial setup) — validation is skipped\n- What you did **not** verify: Interaction with `--force` or `--skip-validation` flags (none exist)\n\n## Compatibility / Migration\n\n- Backward compatible? `Yes` — existing valid configurations are unaffected\n- Config/env changes? `No`\n- Migration needed? `No`\n\n## Failure Recovery (if this breaks)\n\n- How to disable/revert this change quickly: Revert this single commit\n- Files/config to restore: `src/commands/models/set.ts`\n- Known bad symptoms reviewers should watch for: False rejections of valid model IDs (would indicate catalog loading failure)\n\n## Risks and Mitigations\n\n- Risk: Catalog loading may fail in offline/air-gapped environments, causing all `models set` to be rejected\n  - Mitigation: Catalog is skipped when empty (length === 0), which covers initial setup and environments where the gateway hasn't been contacted\n\n✍️ Author: Claude Code with @carrotRakko (AI-written, human-approved)\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nAdded validation to reject invalid model IDs in `models set` command by checking against the catalog loaded from `loadModelCatalog`. The validation is skipped when the catalog is empty to allow initial setup scenarios. The implementation also warns when adding models that don't have existing config entries.\n\nThe change prevents typos from being silently persisted in config by validating model IDs against the catalog before applying updates. The warning for new entries helps users understand when models are being added without explicit provider routing configuration.\n\n<h3>Confidence Score: 4/5</h3>\n\n- This PR is safe to merge with only minor concerns about test coverage\n- The implementation is straightforward and follows existing patterns. The validation logic is sound and includes proper edge case handling (empty catalog). However, the new validation logic lacks test coverage, which prevents a score of 5.\n- Consider adding tests that mock `loadModelCatalog` to verify the validation behavior in `src/commands/models.set.e2e.test.ts`\n\n<sub>Last reviewed commit: 11aab35</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "carrotRakko",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T14:41:38Z",
      "updatedAt": "2026-02-16T14:45:06Z",
      "headRef": "fix/models-set-catalog-validation",
      "baseRef": "main",
      "filesChanged": 1,
      "additions": 37,
      "deletions": 3,
      "commits": 1,
      "labels": [
        "commands",
        "size: XS"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        17183
      ],
      "changedFiles": [
        "src/commands/models/set.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18129.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 71,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "40 lines changed (37+/3-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 47,
          "weight": 0.12,
          "reason": "carrotRakko (NONE, rep: 86)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #17183"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 4936 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: commands, size: XS"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18036,
      "title": "fix(slack): honour replyToMode off for typing indicator",
      "body": "## Summary\n\nWhen `replyToMode` is `\"off\"` in DMs, replies should stay in the main conversation even when the typing indicator creates a thread context.\n\n## Problem\n\nPreviously, when `incomingThreadTs` was set (from the typing indicator's thread), `replyToMode` was forced to `\"all\"`, causing all replies to go into the thread. This created an unexpected UX where:\n\n1. Typing indicator shows in a thread (expected Slack behavior)\n2. First reply goes to main channel (respects `replyToMode: off`)\n3. User replies → now has `incomingThreadTs` set\n4. Subsequent bot replies forced into thread (ignores `replyToMode: off`)\n\n## Solution\n\nFor **direct messages**, always respect the user's configured `replyToMode`. For **channels/groups**, preserve existing behavior (stay in thread if already in one).\n\n```typescript\n// Before\nconst effectiveMode = params.incomingThreadTs ? \"all\" : params.replyToMode;\n\n// After\nconst effectiveMode =\n  params.chatType === \"direct\"\n    ? params.replyToMode  // DMs: always respect user config\n    : params.incomingThreadTs\n      ? \"all\"           // Channels: stay in thread\n      : params.replyToMode;\n```\n\n## Changes\n\n- `src/slack/monitor/replies.ts`: Add `chatType` param, respect `replyToMode` in DMs\n- `src/slack/monitor/message-handler/dispatch.ts`: Pass `chatType` to reply planner\n\n## Testing\n\n- [x] Unit tests pass\n- [x] Manually verified in Slack DM:\n  - ✅ Typing indicator shows\n  - ✅ Replies stay in main conversation (no thread)\n\nFixes #16868",
      "author": "theoseo",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T12:15:13Z",
      "updatedAt": "2026-02-16T14:39:42Z",
      "headRef": "fix/slack-reply-to-mode-status-thread",
      "baseRef": "main",
      "filesChanged": 2,
      "additions": 23,
      "deletions": 4,
      "commits": 1,
      "labels": [
        "channel: slack",
        "size: XS"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        16868
      ],
      "changedFiles": [
        "src/slack/monitor/message-handler/dispatch.ts",
        "src/slack/monitor/replies.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18036.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 71,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "27 lines changed (23+/4-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 51,
          "weight": 0.12,
          "reason": "theoseo (NONE, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #16868"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 1484 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: channel: slack, size: XS"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 14995,
      "title": "fix(mattermost): honor chatmode mention fallback in group mention gating",
      "body": "## Example: Before vs Now\n\n### Bad (before this fix)\n\nThis looked correct, but still behaved mention-only in group channels:\n\n```json5\n{\n  channels: {\n    mattermost: {\n      chatmode: \"onmessage\",\n      groupPolicy: \"open\"\n    }\n  }\n}\n```\n\nResult before fix: untagged group messages were often ignored unless `@hal` was present.\n\n### Good now (after this fix)\n\nThis now works as expected:\n\n```json5\n{\n  channels: {\n    mattermost: {\n      chatmode: \"onmessage\",\n      groupPolicy: \"open\"\n    }\n  }\n}\n```\n\nResult after fix: untagged group messages are processed.\n\n## Group Admission Truth Table (`groupPolicy`)\n\n| `groupPolicy` | `groupAllowFrom` | Group message admitted? |\n| --- | --- | --- |\n| `open` | any | yes (all senders) |\n| `allowlist` | empty/unset | no |\n| `allowlist` | populated | yes only for listed senders |\n| `disabled` | any | no |\n\n## Mention Behavior Truth Table\n\n| `chatmode` | `groups.\"*\".requireMention` | Effective mention behavior in groups |\n| --- | --- | --- |\n| unset | unset | mention required |\n| `oncall` | unset | mention required |\n| `onmessage` | unset | mention not required |\n| `onchar` | unset | mention required unless trigger prefix is used |\n| any | `true` | mention required |\n| any | `false` | mention not required |\n\n## Summary\n- pass Mattermost account-level mention preference (`chatmode` -> `requireMention`) into group mention resolution\n- keep per-group overrides authoritative by using `overrideOrder: \"after-config\"`\n- add regression tests for direct-chat bypass and group fallback behavior\n\n## Why\n`chatmode: \"onmessage\"` could still behave mention-only when mention gating was resolved through the generic group policy path without the account fallback.\n\n## Testing\n- `pnpm exec vitest run extensions/mattermost/src/mattermost/monitor.require-mention.test.ts extensions/mattermost/src/channel.test.ts`\n",
      "author": "ninjaa",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-12T21:07:12Z",
      "updatedAt": "2026-02-16T14:14:02Z",
      "headRef": "fix/mattermost-chatmode-mention-gating",
      "baseRef": "main",
      "filesChanged": 2,
      "additions": 85,
      "deletions": 8,
      "commits": 2,
      "labels": [
        "channel: mattermost",
        "size: S"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "extensions/mattermost/src/mattermost/monitor.require-mention.test.ts",
        "extensions/mattermost/src/mattermost/monitor.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/14995.diff",
      "hasTests": true,
      "testFilesChanged": [
        "extensions/mattermost/src/mattermost/monitor.require-mention.test.ts"
      ],
      "ageInDays": 3,
      "mergeable": "unknown",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 71,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "93 lines changed (85+/8-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 51,
          "weight": 0.12,
          "reason": "ninjaa (NONE, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "3d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1855 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: channel: mattermost, size: S"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18049,
      "title": "feat: triple-layer post-compaction context enforcement",
      "body": "After session compaction, agents often skip their configured startup sequence because the compaction summary creates a false 'I already know everything' illusion.\n\nThis PR implements triple-layer enforcement to ensure post-compaction recovery:\n\n## Layer 1: Summary Append\nAppend critical workspace rules (AGENTS.md Session Startup + Red Lines) into the compaction summary via `<workspace-critical-rules>` tags. 100% reliable — rules are physically in the prompt.\n\n## Layer 2: System Event  \nInject workspace context as a system event for the next agent turn after compaction. Explicit reminder to execute startup sequence.\n\n## Layer 3: Post-Turn Audit\nAfter the agent's first post-compaction turn, audit whether required files were actually read. If not, inject a one-time warning listing missing files. Max 1 retry to prevent loops.\n\n## Changes\n- `src/agents/pi-extensions/compaction-safeguard.ts` — Layer 1: append workspace context to summary\n- `src/auto-reply/reply/agent-runner.ts` — Layer 2 + 3: system event injection + audit integration\n- `src/auto-reply/reply/post-compaction-context.ts` — reads and formats AGENTS.md sections\n- `src/auto-reply/reply/post-compaction-audit.ts` — audits post-compaction file reads\n- `src/auto-reply/reply/post-compaction-context.test.ts` — tests for context extraction\n- `src/auto-reply/reply/post-compaction-audit.test.ts` — tests for read audit\n\n## Design decisions\n- Reuses existing `enqueueSystemEvent()` infrastructure\n- Only activates if workspace has AGENTS.md\n- `extractSections` handles H2/H3, case-insensitive, code-block aware\n- Truncation limits prevent token explosion / Yo-Yo re-compaction\n- Silent failure on errors (best-effort)\n- Audit fires at most once per compaction (no infinite loops)\n- Cross-platform path normalization (forward-slash unification) for Windows compatibility in audit layer\n\nFixes #18023\n",
      "author": "irchelper",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T12:41:05Z",
      "updatedAt": "2026-02-16T14:02:20Z",
      "headRef": "feat/post-compaction-context-inject",
      "baseRef": "main",
      "filesChanged": 6,
      "additions": 685,
      "deletions": 0,
      "commits": 7,
      "labels": [
        "agents",
        "size: L"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        18023
      ],
      "changedFiles": [
        "src/agents/pi-extensions/compaction-safeguard.ts",
        "src/auto-reply/reply/agent-runner.ts",
        "src/auto-reply/reply/post-compaction-audit.test.ts",
        "src/auto-reply/reply/post-compaction-audit.ts",
        "src/auto-reply/reply/post-compaction-context.test.ts",
        "src/auto-reply/reply/post-compaction-context.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18049.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/auto-reply/reply/post-compaction-audit.test.ts",
        "src/auto-reply/reply/post-compaction-context.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 71,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "685 lines changed (685+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 41,
          "weight": 0.12,
          "reason": "irchelper (NONE, rep: 66)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #18023"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "2 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1867 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: agents, size: L"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 89536,
      "title": "Fix: Image component ignores images.qualities in Jest environment",
      "body": "- Fixes #89492\r\n- Fixes #18415 \r\n\r\n## Problem\r\n\r\nWhen testing Next.js <Image /> components with Jest, custom images.qualities configured in next.config.js are ignored, causing:\r\n- Image URLs to use default quality (q=75) instead of configured values\r\n- Warning: \"Image with src ... is using quality X which is not configured in images.qualities [75]\"\r\n\r\n### Root Cause\r\n\r\nIn production and development, Next.js uses webpack's DefinePlugin to inject the image configuration via process.env.__NEXT_IMAGE_OPTS. However, *Jest tests don't use webpack*, so process.env.__NEXT_IMAGE_OPTS is undefined, causing the Image component to fall back to default configuration.\r\n\r\n## Solution\r\n\r\nThis PR implements a two-part fix:\r\n\r\n1. *Jest globals population* (packages/next/src/build/jest/jest.ts):\r\n   - Expose nextConfig.images via Jest globals.__NEXT_IMAGE_OPTS\r\n\r\n2. *Runtime fallback* (image components):\r\n   - When process.env.__NEXT_IMAGE_OPTS is undefined, fall back to globalThis.__NEXT_IMAGE_OPTS\r\n   - Applied to:\r\n     - packages/next/src/client/image-component.tsx\r\n     - packages/next/src/shared/lib/image-external.tsx  \r\n     - packages/next/src/client/legacy/image.tsx\r\n\r\n## Changes\r\n\r\n- ✅ Minimal, targeted fix (4 files, ~40 lines)\r\n- ✅ No production/development behavior changes\r\n- ✅ No test-only conditionals or environment checks\r\n- ✅ Comprehensive test coverage added\r\n\r\n## Testing\r\n\r\nAdded test in test/production/app-dir/image-jest-qualities/ that:\r\n- Configures custom qualities [90, 100] in next.config.js\r\n- Renders <Image quality={100} /> in Jest with jsdom\r\n- Asserts generated image URLs contain q=100 not q=75\r\n\r\nTest correctly *fails on canary* (shows warning about unconfigured quality) and *passes with fix*.\r\n\r\n## Verification\r\n\r\n- ✅ New test passes with fix\r\n- ✅ Existing image tests unaffected\r\n- ✅ Addresses original issue reproduction exactly",
      "author": "rishishanbhag",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-05T15:59:10Z",
      "updatedAt": "2026-02-15T08:37:06Z",
      "headRef": "fix-image-qualities-jest",
      "baseRef": "canary",
      "filesChanged": 7,
      "additions": 176,
      "deletions": 0,
      "commits": 23,
      "labels": [
        "type: next",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        89492,
        18415
      ],
      "changedFiles": [
        "packages/next/src/build/jest/jest.ts",
        "packages/next/src/build/swc/jest-transformer.ts",
        "packages/next/src/build/swc/options.ts",
        "test/production/app-dir/image-jest-qualities/app/app/page.tsx",
        "test/production/app-dir/image-jest-qualities/app/jest.config.js",
        "test/production/app-dir/image-jest-qualities/app/next.config.js",
        "test/production/app-dir/image-jest-qualities/image-jest-qualities.test.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89536.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/production/app-dir/image-jest-qualities/app/app/page.tsx",
        "test/production/app-dir/image-jest-qualities/app/jest.config.js",
        "test/production/app-dir/image-jest-qualities/app/next.config.js",
        "test/production/app-dir/image-jest-qualities/image-jest-qualities.test.ts"
      ],
      "ageInDays": 10,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 12,
      "commentCount": 12,
      "isDraft": false,
      "requestedReviewers": [
        "styfle"
      ],
      "codeowners": [],
      "totalScore": 70,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "176 lines changed (176+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 51,
          "weight": 0.12,
          "reason": "rishishanbhag (NONE, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #89492, #18415"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "4 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "10d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (12 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1870 chars"
        },
        {
          "name": "activity",
          "score": 90,
          "weight": 0.04,
          "reason": "12 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 80,
          "weight": 0.05,
          "reason": "1 reviewer(s): styfle"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 18126,
      "title": "Fix process tree kill leaving orphans on Unix (manual traversal fallback)",
      "body": "## Description\nPreviously, `killProcessTree` tried `process.kill(-pid)` which only works if the pid is a process group leader. When processes are spawned without `detached: true`, they share the parent's group, so this call fails. Fallback was `process.kill(pid)`, which left children orphaned.\n\n## Fix\nAdded manual descendant discovery using `pgrep -P` when group kill fails, ensuring the entire tree is terminated.\n\n## AI Transparency\n- **Assisted by**: OpenClaw Agent (Claude 3.5 Sonnet / Opus)\n- **Testing level**: Fully tested with new unit tests\n- **Prompt strategy**: Self-correction loop based on codebase analysis\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nFixed process tree orphaning on Unix when `process.kill(-pid)` fails for non-group-leader processes by adding manual tree traversal using `pgrep -P`.\n\n- Previously, when process group kill failed (e.g., processes spawned without `detached: true`), only the parent was killed, leaving children orphaned\n- Now falls back to BFS traversal with `pgrep -P` to discover and kill all descendants\n- Added comprehensive Unix-specific test coverage for the manual traversal path\n- Implementation includes proper input validation, infinite loop protection via `seen` Set, and graceful degradation if `pgrep` is unavailable\n\n<h3>Confidence Score: 4/5</h3>\n\n- Safe to merge with strong test coverage and solid implementation\n- The implementation correctly fixes the orphan process bug with proper validation, error handling, and test coverage. Minor deduction for potential performance impact on very large process trees (multiple pgrep calls) and reliance on external `pgrep` utility availability, though the code degrades gracefully.\n- No files require special attention\n\n<sub>Last reviewed commit: 4008fe8</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "Clawborn",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T14:35:28Z",
      "updatedAt": "2026-02-16T14:59:34Z",
      "headRef": "fix/process-tree-kill",
      "baseRef": "main",
      "filesChanged": 2,
      "additions": 139,
      "deletions": 5,
      "commits": 1,
      "labels": [
        "size: S"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "src/process/kill-tree.ts",
        "src/process/kill-tree.unix.test.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18126.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/process/kill-tree.unix.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 70,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "144 lines changed (139+/5-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 29,
          "weight": 0.12,
          "reason": "Clawborn (NONE, rep: 25)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1849 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: size: S"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18002,
      "title": "fix: add Azure AI Foundry URL support for custom providers",
      "body": "## Summary\n\nFixed the issue where configuring OpenAI models from Azure AI Foundry returns a 400 error. The fix detects Azure AI Foundry URLs (both services.ai.azure.com and openai.azure.com) and transforms them to include the proper deployment path (/openai/deployments/<model-id>) required by Azure's API.\n\n## Changes\n\n- Added isAzureUrl() function to detect Azure AI Foundry and Azure OpenAI URLs\n- Added transformAzureUrl() function to transform Azure URLs to include the deployment path\n- Updated requestOpenAiVerification() and requestAnthropicVerification() to transform Azure URLs before verification\n- Updated applyCustomApiConfig() to store the transformed URL so API calls also work correctly\n\n## Testing\n\n- Build completed successfully\n- Code follows existing patterns in onboard-custom.ts\n- E2E tests use non-Azure URLs so should continue to pass\n\nFixes openclaw/openclaw#17992\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR adds Azure AI Foundry and Azure OpenAI URL detection and transformation to the custom provider onboarding flow. When a user provides an Azure-style base URL (matching `*.services.ai.azure.com` or `*.openai.azure.com`), the code automatically appends `/openai/deployments/<model-id>` to the URL path, which Azure's API requires for routing requests to the correct deployment.\n\nThe approach is reasonable and the `new URL()` resolution in the verification functions produces correct endpoint URLs. However:\n\n- **Bug**: `transformAzureUrl` uses string concatenation to build the URL path. If the user provides a base URL with query parameters (e.g., `?api-version=...`), the deployment path is appended after the query string, producing an invalid URL. The `URL` API should be used instead for proper path manipulation.\n- The Azure deployment path transformation is also applied in `requestAnthropicVerification`, which is unnecessary since Azure endpoints are OpenAI-compatible, not Anthropic-compatible.\n\n<h3>Confidence Score: 3/5</h3>\n\n- Functional for the primary use case but has a URL parsing bug with query parameters that should be fixed before merging.\n- The core Azure URL detection and transformation logic works correctly for the common case (bare Azure hostnames). However, the string concatenation approach in transformAzureUrl breaks when the base URL contains query parameters, which is a plausible user input scenario for Azure endpoints that require api-version. The fix is straightforward (use the URL API for path manipulation).\n- Pay close attention to `src/commands/onboard-custom.ts`, specifically the `transformAzureUrl` function's URL construction logic.\n\n<sub>Last reviewed commit: 5597b74</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "MisterGuy420",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T11:18:58Z",
      "updatedAt": "2026-02-16T14:16:40Z",
      "headRef": "fix/issue-17992",
      "baseRef": "main",
      "filesChanged": 1,
      "additions": 66,
      "deletions": 7,
      "commits": 2,
      "labels": [
        "commands",
        "size: S"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        17992
      ],
      "changedFiles": [
        "src/commands/onboard-custom.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18002.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "commented",
      "reviewCount": 3,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 70,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "73 lines changed (66+/7-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 57,
          "weight": 0.12,
          "reason": "MisterGuy420 (CONTRIBUTOR, rep: 26)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #17992"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (3 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 2741 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: commands, size: S"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 17953,
      "title": "fix(telegram): prevent silent message loss and duplicate messages in streaming mode",
      "body": "## Summary\n\nTwo complementary fixes for Telegram reply delivery reliability in streaming mode.\n\n### Fix 1: Block reply delivery tracking (fixes #15772)\n\nWhen block reply delivery fails (e.g., Telegram API timeout or formatting rejection), the pipeline previously marked payloads as \"sent\" before delivery completed. This caused `buildReplyPayloads` to blanket-drop all final payloads, silently losing messages that were never delivered to the user.\n\n**Root cause:** `onBlockReply` called `dispatcher.sendBlockReply()` (fire-and-forget), so the pipeline resolved before delivery completed.\n\n**Fix:**\n- Add `sendBlockReplyAsync` to `ReplyDispatcher` that returns a delivery Promise\n- `onBlockReply` in `dispatch-from-config.ts` now awaits actual delivery\n- Add `hasDeliveryFailures()` to `BlockReplyPipeline`\n- When failures occur, use per-payload `hasSentPayload` checks instead of blanket-dropping — failed payloads survive as final fallback\n- When all deliveries succeed (including coalesced), behavior is unchanged\n\n### Fix 2: Draft stream duplicate prevention (refs #8691)\n\nWhen partial streaming finalization attempts `editMessageText` with content identical to the current draft, Telegram rejects it with \"message is not modified\". This triggers failover cleanup (delete + resend), creating duplicate messages.\n\n**Fix:**\n- Add `lastAppliedText()` to `TelegramDraftStream` tracking successfully applied text (not just attempted)\n- Skip redundant final edits when draft matches final text and no formatting/buttons/linkPreview mutation is needed\n- Still edits when mutations are required (buttons, formatting pass, link preview)\n\n## Behavior Changes\n\n| Scenario | Before | After |\n|---|---|---|\n| Block reply delivery fails | Final payload dropped, message lost | Failed payloads preserved as final fallback |\n| Block reply delivery succeeds | Final payload dropped (correct) | Same |\n| All block replies fail | All messages lost | All payloads fall back to final delivery |\n| Draft matches final text (no mutation) | \"message not modified\" error → delete + resend | Skip edit, mark as delivered |\n| Draft matches but needs buttons/formatting | N/A | Still edits (correct) |\n\n## Tests\n\n- **22 new test cases** across 4 files\n- `block-reply-delivery-fallback.test.ts` — integration tests for partial failure, full success, full failure\n- `draft-stream.test.ts` — `lastAppliedText` tracking on success and failure\n- `bot-message-dispatch.test.ts` — skip-edit and still-edit-with-buttons scenarios\n- All 5041 existing tests pass (1 pre-existing unrelated failure in browser profile test)\n\n## AI Disclosure\n\n- **AI-assisted**: Built with Claude (via OpenClaw agent)\n- **Testing**: Full test suite run, all relevant tests passing\n- **Human review**: Code reviewed by human operator\n- **Understanding**: Both fixes address race conditions in the reply delivery pipeline — the async gap between pipeline resolution and actual Telegram API delivery\n\nFixes #15772\nRefs #8691\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nTwo complementary reliability fixes for Telegram reply delivery in streaming mode:\n\n- **Fix 1 — Block reply delivery tracking (#15772):** The `onBlockReply` callback in `dispatch-from-config.ts` now awaits actual dispatcher delivery via the new `sendBlockReplyAsync` method. The pipeline tracks delivery failures (`hadDeliveryFailure`) and `buildReplyPayloads` uses per-payload `hasSentPayload` checks when failures occurred, preserving undelivered payloads as final fallback instead of blanket-dropping them.\n- **Fix 2 — Draft stream duplicate prevention (#8691):** Adds `lastAppliedText()` tracking to `TelegramDraftStream` (only updated on successful API calls). The final edit path in `bot-message-dispatch.ts` skips redundant `editMessageText` calls when the draft already matches the final text and no formatting/button mutation is needed, avoiding Telegram's \"message is not modified\" error that previously triggered failover cleanup and duplicates.\n\nThe error propagation chain is well-structured: dispatcher rejects → `await result.delivered` throws in `onBlockReply` → pipeline catches and sets `hadDeliveryFailure` → `buildReplyPayloads` preserves failed payloads. Tests cover partial failure, full success, and full failure scenarios across 4 new test files.\n\n<h3>Confidence Score: 5/5</h3>\n\n- This PR is safe to merge — both fixes are well-designed, backward-compatible, and thoroughly tested.\n- Both fixes address real race conditions with correct error propagation chains. The async delivery tracking in the dispatcher/pipeline is logically sound — errors propagate correctly through the promise chain. The draft stream skip-edit optimization has proper guards for formatting, buttons, and link preview mutations. The `hasDeliveryFailures?.()` optional chaining provides backward compatibility. 22 new tests cover all key scenarios (partial failure, full success, full failure, skip-edit, still-edit-with-buttons). No breaking changes to existing behavior when all deliveries succeed.\n- No files require special attention. All changes are internally consistent and well-tested.\n\n<sub>Last reviewed commit: 40d1976</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(3/5) Reply to the agent's comments like \"Can you suggest a fix for this @greptileai?\" or ask follow-up questions!</sub>\n\n<!-- /greptile_comment -->",
      "author": "zuyan9",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T10:20:20Z",
      "updatedAt": "2026-02-16T14:05:49Z",
      "headRef": "fix/telegram-reply-delivery-reliability",
      "baseRef": "main",
      "filesChanged": 12,
      "additions": 386,
      "deletions": 198,
      "commits": 3,
      "labels": [
        "channel: discord",
        "channel: telegram",
        "size: L"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        15772,
        8691,
        15772,
        8691
      ],
      "changedFiles": [
        "src/auto-reply/dispatch.test.ts",
        "src/auto-reply/reply/agent-runner-payloads.ts",
        "src/auto-reply/reply/block-reply-delivery-fallback.test.ts",
        "src/auto-reply/reply/block-reply-pipeline.ts",
        "src/auto-reply/reply/dispatch-from-config.test.ts",
        "src/auto-reply/reply/dispatch-from-config.ts",
        "src/auto-reply/reply/reply-dispatcher.ts",
        "src/discord/monitor/message-handler.process.test.ts",
        "src/telegram/bot-message-dispatch.test.ts",
        "src/telegram/bot-message-dispatch.ts",
        "src/telegram/draft-stream.test.ts",
        "src/telegram/draft-stream.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17953.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/auto-reply/dispatch.test.ts",
        "src/auto-reply/reply/block-reply-delivery-fallback.test.ts",
        "src/auto-reply/reply/dispatch-from-config.test.ts",
        "src/discord/monitor/message-handler.process.test.ts",
        "src/telegram/bot-message-dispatch.test.ts",
        "src/telegram/draft-stream.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 70,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "584 lines changed (386+/198-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 48,
          "weight": 0.12,
          "reason": "zuyan9 (NONE, rep: 90)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #15772, #8691, #15772, #8691"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "6 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 5355 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "198 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: channel: discord, channel: telegram, size: L"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 90021,
      "title": "feat: support metadata/generateMetadata in nested not-found pages",
      "body": "### What?\n\nSupport `metadata` and `generateMetadata()` exports in nested `not-found.tsx` files, so they work when `notFound()` is called from a page component in a dynamic route.\n\n### Why?\n\nWhen `notFound()` is called inside a page component in a nested route (e.g., `app/items/[id]/page.tsx`), the not-found boundary renders correctly, but any `metadata` or `generateMetadata()` exported from the corresponding `not-found.tsx` file is silently ignored. The page ends up using the parent layout's metadata instead of the not-found page's metadata.\n\nThis happens because the metadata resolution runs independently of page rendering. By the time the `HTTPAccessFallbackBoundary` catches the `notFound()` error, the metadata has already been resolved from the layout chain. The error boundary re-renders the not-found component, but the metadata in `<head>` is never updated.\n\n**Root-level `not-found.tsx` metadata already works** (via the error re-render flow in `app-render.tsx`), but nested not-found pages were broken.\n\n### How?\n\nDuring component tree creation, when building the fallback element for `not-found`, `forbidden`, and `unauthorized` conventions, we now also:\n\n1. Load the convention module and check for `metadata` or `generateMetadata` exports\n2. Resolve the metadata (including dynamic `generateMetadata` with route params)\n3. Render the metadata as React `<title>` and `<meta>` elements alongside the boundary component\n\nReact 19 hoists `<title>` and `<meta>` elements from anywhere in the component tree to `<head>`. When the error boundary activates and renders the not-found component, these metadata elements override the layout's metadata.\n\nThis supports both static `metadata` exports and dynamic `generateMetadata()` with route params:\n\n```tsx\n// app/items/[id]/not-found.tsx\nexport async function generateMetadata({ params }) {\n  const { id } = await params\n  return {\n    title: `Item ${id} not found`,\n    description: `No item with id \"${id}\" exists`,\n  }\n}\n\nexport default function NotFound() {\n  return <div>Item not found</div>\n}\n```\n\n### Test plan\n\n- Added new test suite `test/e2e/app-dir/not-found/metadata/` covering:\n  - [x] Static `metadata` in root `not-found.tsx`\n  - [x] Static `metadata` in nested `not-found.tsx`\n  - [x] `generateMetadata()` with dynamic route params in nested `not-found.tsx`\n  - [x] Different params produce different metadata\n  - [x] 404 status code is preserved\n  - [x] Normal page rendering is unaffected\n- Verified existing test suites still pass:\n  - [x] `test/e2e/app-dir/not-found/basic/` (13 tests)\n  - [x] `test/e2e/app-dir/metadata-navigation/` (7 tests)\n  - [x] `test/e2e/app-dir/global-not-found/metadata/` (1 test)\n  - [x] `test/e2e/app-dir/parallel-route-not-found/` (5 tests)\n  - [x] `test/e2e/app-dir/global-error/basic/` (6 tests)\n\nFixes #45620",
      "author": "veeceey",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-15T07:19:57Z",
      "updatedAt": "2026-02-15T07:20:19Z",
      "headRef": "feat/issue-45620-not-found-metadata-tests",
      "baseRef": "canary",
      "filesChanged": 10,
      "additions": 262,
      "deletions": 1,
      "commits": 1,
      "labels": [
        "type: next",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        45620
      ],
      "changedFiles": [
        "packages/next/src/server/app-render/create-component-tree.tsx",
        "test/e2e/app-dir/not-found/metadata/app/dynamic/[id]/not-found.tsx",
        "test/e2e/app-dir/not-found/metadata/app/dynamic/[id]/page.tsx",
        "test/e2e/app-dir/not-found/metadata/app/dynamic/layout.tsx",
        "test/e2e/app-dir/not-found/metadata/app/layout.tsx",
        "test/e2e/app-dir/not-found/metadata/app/not-found.tsx",
        "test/e2e/app-dir/not-found/metadata/app/page.tsx",
        "test/e2e/app-dir/not-found/metadata/app/static-metadata/not-found.tsx",
        "test/e2e/app-dir/not-found/metadata/app/static-metadata/page.tsx",
        "test/e2e/app-dir/not-found/metadata/not-found-metadata.test.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90021.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/e2e/app-dir/not-found/metadata/app/dynamic/[id]/not-found.tsx",
        "test/e2e/app-dir/not-found/metadata/app/dynamic/[id]/page.tsx",
        "test/e2e/app-dir/not-found/metadata/app/dynamic/layout.tsx",
        "test/e2e/app-dir/not-found/metadata/app/layout.tsx",
        "test/e2e/app-dir/not-found/metadata/app/not-found.tsx",
        "test/e2e/app-dir/not-found/metadata/app/page.tsx",
        "test/e2e/app-dir/not-found/metadata/app/static-metadata/not-found.tsx",
        "test/e2e/app-dir/not-found/metadata/app/static-metadata/page.tsx",
        "test/e2e/app-dir/not-found/metadata/not-found-metadata.test.ts"
      ],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 69,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "263 lines changed (262+/1-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 47,
          "weight": 0.12,
          "reason": "veeceey (NONE, rep: 86)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #45620"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "9 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 2822 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90011,
      "title": "fix(metadata): escape XML special characters in generated sitemap",
      "body": "## What?\n\nEscape XML special characters (`&`, `<`, `>`, `\"`, `'`) in all user-provided strings interpolated into sitemap XML output.\n\n## Why?\n\nURLs containing query parameters (e.g., `https://example.com?a=1&b=2`) produce invalid XML in the generated sitemap. The unescaped `&` character breaks XML parsers and causes validation errors in tools like Google Search Console.\n\nThis affects all Next.js apps using `sitemap.ts` with URLs containing XML special characters.\n\n## How?\n\nAdded an `escapeXml()` helper function that performs standard XML entity escaping, applied to all user-provided string interpolations in `resolveSitemap()`:\n\n- `<loc>` URLs\n- `<xhtml:link>` alternate language URLs and `hreflang` attributes\n- `<image:loc>` URLs\n- All `<video:*>` fields (title, description, URLs, tags, restriction, platform, uploader)\n\nNumeric and enum fields (`duration`, `view_count`, `rating`, `family_friendly`, `requires_subscription`, `live`, date fields) are not escaped as they do not contain user-provided free-text strings.\n\nAdded test coverage for XML escaping across all sitemap field types.\n\nCloses #77340",
      "author": "shtse8",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-14T21:25:20Z",
      "updatedAt": "2026-02-14T21:32:23Z",
      "headRef": "fix/sitemap-xml-escaping",
      "baseRef": "canary",
      "filesChanged": 2,
      "additions": 123,
      "deletions": 14,
      "commits": 2,
      "labels": [
        "type: next"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        77340
      ],
      "changedFiles": [
        "packages/next/src/build/webpack/loaders/metadata/resolve-route-data.test.ts",
        "packages/next/src/build/webpack/loaders/metadata/resolve-route-data.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90011.diff",
      "hasTests": true,
      "testFilesChanged": [
        "packages/next/src/build/webpack/loaders/metadata/resolve-route-data.test.ts"
      ],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 69,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "137 lines changed (123+/14-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 51,
          "weight": 0.12,
          "reason": "shtse8 (NONE, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #77340"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1113 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 16330,
      "title": "fix(gateway): preserve conversation history on gateway restart",
      "body": "Fixes #10018\r\n\r\n> Re-submitted from a clean branch. The previous PR #10060 was automatically closed due to a noisy commit history.\r\n\r\n## Problem\r\n\r\nWhen the gateway restarts, it sends a notification message (e.g., \"Gateway restarted\") to external channels via `deliverOutboundPayloads`. However, this message was **not** being written to the session transcript. This caused a gap in the conversation history — the boot message had no `parentId`, effectively creating a new tree root and orphaning all previous conversation history.\r\n\r\n## Solution\r\n\r\nThis PR implements a lightweight fix by calling the existing `appendAssistantMessageToSessionTranscript` function from `src/config/sessions/transcript.ts` right before `deliverOutboundPayloads`. This ensures the restart message is written directly to the session transcript, which automatically handles the `parentId` chain and preserves the conversation history. This approach reuses existing infrastructure, including error handling and real-time UI updates (`emitSessionTranscriptUpdate`), and avoids code duplication.\r\n\r\n## Behavior Changes\r\n\r\n*   Boot/restart messages are now recorded in the session transcript with a correct `parentId`, preserving the conversation tree.\r\n*   No AI agent run is triggered. No additional token consumption.\r\n*   External notification delivery behavior is completely unchanged.\r\n\r\n## Files Changed\r\n\r\n| File                                     | Change                                                                              |\r\n| :--------------------------------------- | :---------------------------------------------------------------------------------- |\r\n| `src/gateway/server-restart-sentinel.ts` | **Modified** — calls `appendAssistantMessageToSessionTranscript` before delivering the notification |\r\n\r\n*(Self-correction based on Greptile's feedback to reuse existing functions and remove the custom `transcript-writer.ts`)*\r\n\r\n\r\n<!-- greptile_comment -->\r\n\r\n<h2>Greptile Overview</h2>\r\n\r\n<h3>Greptile Summary</h3>\r\n\r\nThis PR fixes #10018 by writing gateway restart messages to the session transcript before delivering them externally. It replaces the previous `agentCommand` approach (which triggered a full AI agent run) with a lighter-weight `deliverOutboundPayloads` call, and adds a new `writeAssistantMessageToTranscript` function to persist the restart message in the conversation history with a proper `parentId` chain.\r\n\r\n- **Duplicate `loadSessionEntry` call** in `server-restart-sentinel.ts`: `storePath` is already destructured on line 45 but `loadSessionEntry` is called again on line 89 inside the transcript-write block, causing an unnecessary re-read of the session store from disk.\r\n- **Silent failure on transcript write**: The return value of `writeAssistantMessageToTranscript` is never checked. If writing fails, the conversation history gap (the core issue being fixed) will still occur with no diagnostic signal.\r\n- **New file duplicates existing functionality**: `transcript-writer.ts` (~123 lines) largely reimplements `appendAssistantMessageToSessionTranscript` from `src/config/sessions/transcript.ts`. The existing function also handles `emitSessionTranscriptUpdate` (for real-time UI updates) and session store updates, both of which are missing from the new file.\r\n\r\n<h3>Confidence Score: 3/5</h3>\r\n\r\n- The core approach is sound but has a redundant I/O call and silently drops transcript write failures, which could leave the original bug undetected in edge cases.\r\n- The PR correctly identifies and addresses the root cause (restart messages missing from transcript), and the switch from agentCommand to deliverOutboundPayloads is a clear improvement. However, the duplicate loadSessionEntry call is wasteful, and silently ignoring write failures undermines confidence that the fix will work reliably. The new transcript-writer.ts also duplicates existing infrastructure without the event emission that powers real-time UI updates.\r\n- Both `src/gateway/server-restart-sentinel.ts` (duplicate loadSessionEntry, silent error swallowing) and `src/gateway/transcript-writer.ts` (code duplication, missing emitSessionTranscriptUpdate) need attention.\r\n\r\n<sub>Last reviewed commit: 6bcdc3c</sub>\r\n\r\n<!-- greptile_other_comments_section -->\r\n\r\n<!-- /greptile_comment -->",
      "author": "openperf",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-14T16:53:21Z",
      "updatedAt": "2026-02-16T14:49:16Z",
      "headRef": "fix-boot-message-injection-v2",
      "baseRef": "main",
      "filesChanged": 1,
      "additions": 8,
      "deletions": 0,
      "commits": 2,
      "labels": [
        "gateway",
        "size: XS"
      ],
      "ciStatus": "pending",
      "hasIssueRef": true,
      "issueNumbers": [
        10018,
        10018
      ],
      "changedFiles": [
        "src/gateway/server-restart-sentinel.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/16330.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 5,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 69,
      "signals": [
        {
          "name": "ci_status",
          "score": 50,
          "weight": 0.15,
          "reason": "CI: pending"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "8 lines changed (8+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 76,
          "weight": 0.12,
          "reason": "openperf (CONTRIBUTOR, rep: 91)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #10018, #10018"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (5 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 4295 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: gateway, size: XS"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 89370,
      "title": "Optimize how we track data for persistence",
      "body": "## What?\n\nOptimizes the change tracking mechanism used for persistent cache snapshots in turbo-tasks-backend.\n\n## Why?\n\nThe previous implementation used a `FxDashMap<TaskId, ModifiedState>` to track modified tasks, where `ModifiedState` was an enum with `Modified` and `Snapshot(Option<Box<TaskStorage>>)` variants. This had several inefficiencies:\n\n1. **Memory overhead**: The `ModifiedState` enum was 16 bytes to account for the rare 'snapshot race' case\n2. **Datastructure overhead**: the DashMap for the `modified` map was highly sharded leading to large amounts of memory overhead.  Most acquisitions were extremely short lived and so this isn't necessary.\n3. **Separate task cache log**: New task types were tracked in a separate `TaskCacheLog` structure (`Sharded<ChunkedVec<...>>`), requiring additional synchronization and a separate persistence path.  \n\n## How?\n\n**Restructured change tracking into two separate data structures:**\n\n1. **`modified: Sharded<Vec<TaskId>>`** - A sharded append-only list for tracking modified task IDs. Since modifications are guarded by a transition in the `any_modified` flag on `TaskStorage`, each task is only added once, avoiding duplicates without additional synchronization.\n\n2. **`snapshots: FxDashMap<TaskId, Option<Box<TaskStorage>>>`** - A small, rarely-used map for the uncommon case where a task is modified during an active snapshot operation. Uses only 16 shards since this is rare (only during dev mode idle-callback persistence races), so a little bit of contention on mutating threads is not a huge concern.\n\n**Unified task cache persistence:**\n\n- Removed the separate `TaskCacheLog` and `ChunkedVec` infrastructure\n- New tasks now include their `task_type` directly in the `SnapshotItem` struct\n- Task cache entries are written inline with task data during persistence, simplifying the write path\n\n**Other optimizations:**\n\n- Simplified snapshot iteration using `scope_and_block` with chunked shards, this reduces the number of 'scratch buffers' allocated to 'one per chunk' instead of 'one per original shard'\n- Fixed a very subtle race in `end_snapshot` where multiple racing save_snapshot calls could corrupt state.\n\n### Results on vercel-site\n\nI ran a sequence of builds on vercel-site comparing canary and this branch\n\n## Cold Cache Builds\n\n| Metric | Optimization (87071fe) | Canary (479877d) | Difference |\n|--------|------------------------|------------------|------------|\n| **Duration (avg)** | 82.98s | 82.56s | +0.51% |\n| **Duration (min)** | 82.44s | 80.39s | |\n| **Duration (max)** | 83.20s | 87.24s | |\n| **Duration (std dev)** | 0.27s | 2.22s | |\n| **Peak Memory (avg)** | 21.92 GB | 23.07 GB | **-4.98%** |\n| **Peak Memory (min)** | 21.83 GB | 22.64 GB | |\n| **Peak Memory (max)** | 22.06 GB | 23.78 GB | |\n| **Sample Size** | n=6 | n=6 | |\n\n## Warm Cache Builds\n\n| Metric | Optimization (87071fe) | Canary (479877d) | Difference |\n|--------|------------------------|------------------|------------|\n| **Duration (avg)** | 13.71s | 14.75s | **-7.02%** |\n| **Duration (min)** | 10.65s | 11.41s | |\n| **Duration (max)** | 17.77s | 19.84s | |\n| **Peak Memory (avg)** | 11.10 GB | 11.39 GB | **-2.49%** |\n| **Peak Memory (min)** | 10.76 GB | 10.68 GB | |\n| **Peak Memory (max)** | 11.48 GB | 12.06 GB | |\n| **Sample Size** | n=12 | n=12 | |\n\nThe latency deltas are mostly in the noise but there are substantial memory wins from this change",
      "author": "lukesandberg",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-02T07:18:02Z",
      "updatedAt": "2026-02-16T01:22:05Z",
      "headRef": "optimized_change_tracking",
      "baseRef": "fix_verification_tasks",
      "filesChanged": 15,
      "additions": 548,
      "deletions": 637,
      "commits": 1,
      "labels": [
        "type: next",
        "Turbopack",
        "created-by: Turbopack team",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "test/integration/config-output-export/test/index.test.ts",
        "turbopack/crates/turbo-persistence/src/value_buf.rs",
        "turbopack/crates/turbo-tasks-backend/fuzz/Cargo.toml",
        "turbopack/crates/turbo-tasks-backend/fuzz/graph.dict",
        "turbopack/crates/turbo-tasks-backend/fuzz/src/graph.rs",
        "turbopack/crates/turbo-tasks-backend/src/backend/mod.rs",
        "turbopack/crates/turbo-tasks-backend/src/backend/operation/aggregation_update.rs",
        "turbopack/crates/turbo-tasks-backend/src/backend/operation/connect_child.rs",
        "turbopack/crates/turbo-tasks-backend/src/backend/operation/mod.rs",
        "turbopack/crates/turbo-tasks-backend/src/backend/storage.rs",
        "turbopack/crates/turbo-tasks-backend/src/backend/storage_schema.rs",
        "turbopack/crates/turbo-tasks-backend/src/backing_storage.rs",
        "turbopack/crates/turbo-tasks-backend/src/kv_backing_storage.rs",
        "turbopack/crates/turbo-tasks-backend/src/utils/chunked_vec.rs",
        "turbopack/crates/turbo-tasks-backend/src/utils/mod.rs"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89370.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/integration/config-output-export/test/index.test.ts"
      ],
      "ageInDays": 14,
      "mergeable": "mergeable",
      "reviewState": "approved",
      "reviewCount": 12,
      "commentCount": 5,
      "isDraft": false,
      "requestedReviewers": [
        "sokra"
      ],
      "codeowners": [],
      "totalScore": 68,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "1185 lines changed (548+/637-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "lukesandberg (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "14d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 100,
          "weight": 0.08,
          "reason": "Review: approved (12 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 3411 chars"
        },
        {
          "name": "activity",
          "score": 90,
          "weight": 0.04,
          "reason": "5 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "637 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, Turbopack, created-by: Turbopack team, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 80,
          "weight": 0.05,
          "reason": "1 reviewer(s): sokra"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 89987,
      "title": "Expand deferred entries test suite and fix turbopack build",
      "body": "Adds more coverage to deferred entries test suite to ensure we're handling all entry types and reverts change that caused issues with turbopack build and this feature. ",
      "author": "ijjk",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-14T03:09:27Z",
      "updatedAt": "2026-02-15T23:48:53Z",
      "headRef": "ijjk/fix-deferred",
      "baseRef": "canary",
      "filesChanged": 31,
      "additions": 954,
      "deletions": 158,
      "commits": 15,
      "labels": [
        "type: next",
        "created-by: Next.js team",
        "Turbopack",
        "tests"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "crates/next-api/src/project.rs",
        "crates/next-api/src/route.rs",
        "crates/next-core/src/emit.rs",
        "crates/next-core/src/lib.rs",
        "crates/next-napi-bindings/src/next_api/analyze.rs",
        "crates/next-napi-bindings/src/next_api/project.rs",
        "packages/next/src/build/swc/generated-native.d.ts",
        "packages/next/src/build/swc/index.ts",
        "packages/next/src/build/swc/types.ts",
        "packages/next/src/build/turbopack-build/impl.ts",
        "test/e2e/deferred-entries/app/app-catch-all/[...slug]/page.tsx",
        "test/e2e/deferred-entries/app/app-dynamic/[slug]/page.tsx",
        "test/e2e/deferred-entries/app/app-optional-catch-all/[[...slug]]/page.tsx",
        "test/e2e/deferred-entries/app/apple-icon.tsx",
        "test/e2e/deferred-entries/app/edge-runtime/page.tsx",
        "test/e2e/deferred-entries/app/layout.tsx",
        "test/e2e/deferred-entries/app/opengraph-image.tsx",
        "test/e2e/deferred-entries/app/parallel/@analytics/page.tsx",
        "test/e2e/deferred-entries/app/parallel/@team/page.tsx",
        "test/e2e/deferred-entries/app/parallel/layout.tsx",
        "test/e2e/deferred-entries/app/parallel/page.tsx",
        "test/e2e/deferred-entries/app/route-handler/route.ts",
        "test/e2e/deferred-entries/app/twitter-image.tsx",
        "test/e2e/deferred-entries/deferred-entries.test.ts",
        "test/e2e/deferred-entries/instrumentation.ts",
        "test/e2e/deferred-entries/middleware.ts",
        "test/e2e/deferred-entries/next.config.js",
        "test/e2e/deferred-entries/pages/api/dynamic/[slug].ts",
        "test/e2e/deferred-entries/pages/pages-catch-all/[...slug].tsx",
        "test/e2e/deferred-entries/pages/pages-dynamic/[slug].tsx",
        "test/e2e/deferred-entries/pages/pages-optional-catch-all/[[...slug]].tsx"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89987.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/e2e/deferred-entries/app/app-catch-all/[...slug]/page.tsx",
        "test/e2e/deferred-entries/app/app-dynamic/[slug]/page.tsx",
        "test/e2e/deferred-entries/app/app-optional-catch-all/[[...slug]]/page.tsx",
        "test/e2e/deferred-entries/app/apple-icon.tsx",
        "test/e2e/deferred-entries/app/edge-runtime/page.tsx",
        "test/e2e/deferred-entries/app/layout.tsx",
        "test/e2e/deferred-entries/app/opengraph-image.tsx",
        "test/e2e/deferred-entries/app/parallel/@analytics/page.tsx",
        "test/e2e/deferred-entries/app/parallel/@team/page.tsx",
        "test/e2e/deferred-entries/app/parallel/layout.tsx",
        "test/e2e/deferred-entries/app/parallel/page.tsx",
        "test/e2e/deferred-entries/app/route-handler/route.ts",
        "test/e2e/deferred-entries/app/twitter-image.tsx",
        "test/e2e/deferred-entries/deferred-entries.test.ts",
        "test/e2e/deferred-entries/instrumentation.ts",
        "test/e2e/deferred-entries/middleware.ts",
        "test/e2e/deferred-entries/next.config.js",
        "test/e2e/deferred-entries/pages/api/dynamic/[slug].ts",
        "test/e2e/deferred-entries/pages/pages-catch-all/[...slug].tsx",
        "test/e2e/deferred-entries/pages/pages-dynamic/[slug].tsx",
        "test/e2e/deferred-entries/pages/pages-optional-catch-all/[[...slug]].tsx"
      ],
      "ageInDays": 2,
      "mergeable": "conflicting",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 2,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 68,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "1112 lines changed (954+/158-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "ijjk (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "21 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "2d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Body: 168 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "2 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "Risky files: test/e2e/deferred-entries/pages/api/dynamic/[slug].ts; 158 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, created-by: Next.js team, Turbopack, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90009,
      "title": "fix(eslint-plugin-next): respect next.config pageExtensions in no-htm…",
      "body": "## What\r\n\r\nThis PR updates `@next/next/no-html-link-for-pages` to respect custom `pageExtensions` from `next.config.*` when building internal route URL matchers.\r\n\r\n## Why\r\n\r\nThe rule currently assumes only default extensions and can miss internal routes when projects use custom `pageExtensions` (for example `page.tsx`-style extensions). This leads to false negatives.\r\n\r\nFixes #53473.\r\n\r\n## How\r\n\r\n- Added `pageExtensions` resolution in the rule from supported config files:\r\n  - `next.config.js`\r\n  - `next.config.mjs`\r\n  - `next.config.cjs`\r\n  - `next.config.ts`\r\n  - `next.config.mts`\r\n  - `next.config.cts`\r\n- Kept default fallback extensions when no config is found.\r\n- Updated URL parsing utilities to use configurable extensions for both `pages` and `app` route discovery.\r\n- Added regression tests and fixtures for custom `pageExtensions`.\r\n\r\n## Testing\r\n\r\n- `pnpm --filter=@next/eslint-plugin-next build`\r\n- `pnpm exec jest test/unit/eslint-plugin-next/no-html-link-for-pages.test.ts`\r\n- `pnpm exec jest test/unit/eslint-plugin-next/`\r\n",
      "author": "x0m4ek",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-14T20:22:32Z",
      "updatedAt": "2026-02-14T20:22:52Z",
      "headRef": "fix/no-html-link-page-extensions-config",
      "baseRef": "canary",
      "filesChanged": 7,
      "additions": 245,
      "deletions": 25,
      "commits": 1,
      "labels": [
        "type: next",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        53473
      ],
      "changedFiles": [
        "packages/eslint-plugin-next/src/rules/no-html-link-for-pages.ts",
        "packages/eslint-plugin-next/src/utils/url.ts",
        "test/unit/eslint-plugin-next/no-html-link-for-pages.test.ts",
        "test/unit/eslint-plugin-next/with-custom-page-extensions/app/docs/page.page.tsx",
        "test/unit/eslint-plugin-next/with-custom-page-extensions/app/page.page.tsx",
        "test/unit/eslint-plugin-next/with-custom-page-extensions/next.config.js",
        "test/unit/eslint-plugin-next/with-custom-page-extensions/pages/docs/about.page.tsx"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90009.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/unit/eslint-plugin-next/no-html-link-for-pages.test.ts",
        "test/unit/eslint-plugin-next/with-custom-page-extensions/app/docs/page.page.tsx",
        "test/unit/eslint-plugin-next/with-custom-page-extensions/app/page.page.tsx",
        "test/unit/eslint-plugin-next/with-custom-page-extensions/next.config.js",
        "test/unit/eslint-plugin-next/with-custom-page-extensions/pages/docs/about.page.tsx"
      ],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 68,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "270 lines changed (245+/25-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 47,
          "weight": 0.12,
          "reason": "x0m4ek (NONE, rep: 86)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #53473"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "5 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1048 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90005,
      "title": "fix: clear inherited robots metadata on error pages to prevent duplicate meta tags",
      "body": "## Summary\n\nFixes #67907\n\nWhen `notFound()` is called in `generateMetadata()` and a parent layout defines `robots: { index: true, follow: true }`, the HTML output contains duplicate conflicting robots meta tags:\n\n```html\n<meta name=\"robots\" content=\"noindex\"/>\n<meta name=\"robots\" content=\"index, follow\"/>\n```\n\n### Root Cause\n\nThree independent sources emit robots meta tags:\n\n1. **Metadata component** — resolves metadata via `resolveMetadata()` → `accumulateMetadata()` → `mergeMetadata()`, renders `<meta name=\"robots\">` via `BasicMeta`.\n2. **Error boundary** (`error-boundary.tsx`) — unconditionally renders `<meta name=\"robots\" content=\"noindex\" />` when catching `HTTPAccessFallbackError`.\n3. **Server-inserted HTML** (`make-get-server-inserted-html.tsx`) — adds `<meta name=\"robots\" content=\"noindex\" />` for captured errors.\n\nWhen `notFound()` is called in `generateMetadata()`, metadata resolution retries with `errorConvention='not-found'`. During `mergeMetadata()`, robots uses a \"child overrides parent\" strategy — if the not-found module doesn't set robots, the parent layout's `robots: { index: true, follow: true }` persists. The Metadata component renders \"index, follow\" while the error boundary independently renders \"noindex\", producing conflicting tags.\n\n### Fix\n\nIn `resolveMetadata()`, after `accumulateMetadata()` returns, nullify `resolved.robots` when `errorConvention` is set. This way the Metadata component renders no robots tag, and the error boundary is the sole source of the noindex directive — producing exactly one `<meta name=\"robots\" content=\"noindex\"/>`.\n\nThis applies to all three error conventions: `not-found`, `forbidden`, and `unauthorized`.\n\n## Test Plan\n\n- Added test fixture with a parent layout defining `robots: { index: true, follow: true }` and a page calling `notFound()` in `generateMetadata()`\n- Verified SSR HTML contains exactly 1 robots meta tag with content \"noindex\"\n- Verified no \"index, follow\" robots content in HTML\n- Verified client-side DOM matches after browser navigation\n- Existing metadata-navigation tests remain unaffected",
      "author": "4RH1T3CT0R7",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-14T18:36:04Z",
      "updatedAt": "2026-02-14T19:16:03Z",
      "headRef": "fix/notfound-duplicate-robots-meta",
      "baseRef": "canary",
      "filesChanged": 5,
      "additions": 58,
      "deletions": 1,
      "commits": 1,
      "labels": [
        "type: next",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        67907
      ],
      "changedFiles": [
        "packages/next/src/lib/metadata/resolve-metadata.ts",
        "test/e2e/app-dir/metadata-navigation/app/async/robots-parent/layout.tsx",
        "test/e2e/app-dir/metadata-navigation/app/async/robots-parent/not-found.tsx",
        "test/e2e/app-dir/metadata-navigation/app/async/robots-parent/page.tsx",
        "test/e2e/app-dir/metadata-navigation/metadata-navigation.test.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90005.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/e2e/app-dir/metadata-navigation/app/async/robots-parent/layout.tsx",
        "test/e2e/app-dir/metadata-navigation/app/async/robots-parent/not-found.tsx",
        "test/e2e/app-dir/metadata-navigation/app/async/robots-parent/page.tsx",
        "test/e2e/app-dir/metadata-navigation/metadata-navigation.test.ts"
      ],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 68,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "59 lines changed (58+/1-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 46,
          "weight": 0.12,
          "reason": "4RH1T3CT0R7 (NONE, rep: 82)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #67907"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "4 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 2092 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 18134,
      "title": "feat(discord): add semantic search tool for Discord messages",
      "body": "## Summary\n\nImplements Discord semantic search capability as requested in #17875. This enables finding Discord messages by meaning and context rather than just keywords.\n\n- **Problem:** Discord's built-in search is keyword-only and terrible at finding old threads/conversations\n- **Why it matters:** Users need semantic search to find discussions by concept/topic\n- **What changed:** Added discord_search tool with vector database backend\n- **What did NOT change:** No modifications to existing Discord message handling\n\n## Change Type (select all)\n\n- [x] Feature\n\n## Scope (select all touched areas)\n\n- [x] Skills / tool execution\n- [x] Integrations\n\n## Linked Issue/PR\n\n- Closes #17875\n\n## User-visible / Behavior Changes\n\n- New `discord_search` tool available to agents\n- Semantic search of Discord message history\n- Automatic message indexing in background (when implemented)\n\n## Security Impact (required)\n\n- New permissions/capabilities? **No**\n- Secrets/tokens handling changed? **No** \n- New/changed network calls? **Yes** - OpenAI embeddings API calls\n- Command/tool execution surface changed? **Yes** - New discord_search tool\n- Data access scope changed? **Yes** - Stores Discord message content locally\n\n**Risk + mitigation:** Local SQLite storage of Discord messages for search indexing. Data stays within workspace, no external transmission except OpenAI embeddings API (standard usage).\n\n## Repro + Verification\n\n### Environment\n\n- OS: Linux\n- Integration/channel: Discord\n\n### Steps\n\n1. Configure OpenAI API key for embeddings\n2. Use discord_search tool with semantic query\n3. Verify results match message content semantically\n\n### Expected\n\n- Returns relevant Discord messages ranked by semantic similarity\n- Includes message links for easy navigation\n- Handles filters (channel, author, date range)\n\n### Actual\n\n- ✅ Tool registers correctly in agent system\n- ⚠️ Testing requires running Discord integration (not tested in isolation)\n\n## Evidence\n\n- [x] New tool implementation with proper TypeBox schema\n- [x] SQLite vector database integration with sqlite-vec\n- [x] OpenAI embeddings integration \n- [x] Fallback to text search when embeddings unavailable\n\n## Human Verification (required)\n\n**What you personally verified:**\n- File structure follows existing patterns\n- Tool integration matches existing tools\n- Database schema handles Discord message format\n- Basic instantiation works\n\n**Edge cases checked:**\n- Missing OpenAI API key (graceful fallback)\n- SQLite-vec extension not available (text search fallback)\n- Empty search results handling\n\n**What you did NOT verify:**\n- Full end-to-end with live Discord messages\n- Performance with large message volumes\n- Embedding generation rate limits\n\n## Compatibility / Migration\n\n- Backward compatible? **Yes**\n- Config/env changes? **No** (uses existing OpenAI config)\n- Migration needed? **No**\n\n## Failure Recovery (if this breaks)\n\n- **How to disable:** Remove from agent tools list or disable via config\n- **Files to restore:** Only new files added, no existing files modified significantly\n- **Known bad symptoms:** Tool errors, database connection issues\n\n## Risks and Mitigations\n\n- **Risk:** SQLite-vec extension not available\n  - **Mitigation:** Graceful fallback to text-based search\n- **Risk:** OpenAI API quota/rate limits  \n  - **Mitigation:** Error handling with fallback search\n- **Risk:** Database performance with large message history\n  - **Mitigation:** Indexed queries, configurable limits\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR adds semantic search capabilities for Discord messages using vector embeddings. The implementation introduces a new `discord_search` tool that agents can use to find messages by meaning rather than keywords.\n\n**Major changes:**\n- New `DiscordSemanticSearch` class in `src/discord/semantic-search.ts` with SQLite vector storage\n- New `discord_search` agent tool in `src/agents/tools/discord-semantic-search-tool.ts`\n- Integration into the agent tools system via `src/agents/openclaw-tools.ts`\n\n**Critical issues:**\n- Uses `better-sqlite3` package which is NOT in dependencies - will cause runtime errors\n- Inconsistent with codebase standard (rest of project uses Node's native `node:sqlite` module)\n- Missing directory creation will cause database initialization failures\n- Database path uses `process.cwd()/data/` instead of standard `~/.openclaw/` state directory\n- OpenAI API key access bypasses the project's auth management system\n- sqlite-vec extension loading doesn't use the project's existing `loadSqliteVecExtension()` helper\n- Logging uses `console.*` instead of `createSubsystemLogger()`\n\nThe feature design is solid but the implementation needs alignment with existing patterns before merge.\n\n<h3>Confidence Score: 1/5</h3>\n\n- This PR has critical issues that will cause runtime failures and needs significant rework before it can be merged safely.\n- Score reflects multiple critical bugs: missing dependency (`better-sqlite3`) will cause immediate import failures, missing directory creation will crash on database initialization, and the implementation deviates from established codebase patterns (database module, state directory location, auth management, logging). These are not minor style issues - they're blocking defects that prevent the feature from working.\n- Primary attention needed on `src/discord/semantic-search.ts` - contains all critical issues. The tool integration file (`src/agents/tools/discord-semantic-search-tool.ts`) is well-structured but depends on the broken implementation.\n\n<sub>Last reviewed commit: eebc049</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "zerone0x",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T14:54:21Z",
      "updatedAt": "2026-02-16T15:03:23Z",
      "headRef": "feat/discord-semantic-search",
      "baseRef": "main",
      "filesChanged": 3,
      "additions": 551,
      "deletions": 3,
      "commits": 3,
      "labels": [
        "channel: discord",
        "agents",
        "size: L",
        "experienced-contributor"
      ],
      "ciStatus": "pending",
      "hasIssueRef": true,
      "issueNumbers": [
        17875
      ],
      "changedFiles": [
        "src/agents/openclaw-tools.ts",
        "src/agents/tools/discord-semantic-search-tool.ts",
        "src/discord/semantic-search.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18134.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 68,
      "signals": [
        {
          "name": "ci_status",
          "score": 50,
          "weight": 0.15,
          "reason": "CI: pending"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "554 lines changed (551+/3-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "zerone0x (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #17875"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 5671 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: channel: discord, agents, size: L, experienced-contributor"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18104,
      "title": "feat(workspace): config types + rclone infrastructure for workspace cloud sync (PR 1/4)",
      "body": "## Summary\n\nFoundation for **bidirectional workspace sync** with cloud storage providers (Dropbox, Google Drive, S3, and 70+ others via rclone).\n\nThis is a **working implementation** — I've been running it daily on my own Gateway for months. Resubmitting as a clean, scoped PR after #4146 was auto-closed by triage.\n\n## Why this matters\n\nThere are **7+ open issues** from the community asking for exactly this capability:\n\n| Issue | Problem |\n|-------|---------|\n| #17913 | **Gateway update deletes user workspace files** via git merge conflict |\n| #17418 | Need first-class export/import of Gateway + workspace state |\n| #13616 | Need backup/restore for config, cron jobs, session history |\n| #13988 | PR implementing backup/restore with S3 (addresses #13616) |\n| #7598 | Session history lost to compaction — need backup layer |\n| #8255 | No post-write hooks for workspace files (auto-commit, sync) |\n| #2597 | Context/state lost after unexpected compaction or reset |\n\nUsers are building DIY workarounds: manual cron+tar scripts, git backup skills, custom shell wrappers. This PR provides the native infrastructure to solve all of these.\n\nMeta-issue: #18106\n\n## Architecture\n\n```mermaid\nflowchart TB\n    subgraph local[\"🖥️ Local Machine\"]\n        direction LR\n        localFolder[\"~/Dropbox/openclaw/\"]\n        localApp[\"Native cloud app<br/>(Dropbox/GDrive/OneDrive)\"]\n        localFolder <--> localApp\n    end\n\n    subgraph cloud[\"☁️ Cloud Provider\"]\n        cloudStorage[\"Dropbox / Google Drive / OneDrive / S3 / R2 + 70 more\"]\n    end\n\n    subgraph remote[\"🌐 Remote Gateway (Fly/VPS)\"]\n        direction LR\n        rclone[\"rclone bisync<br/>(background sync)\"]\n        remoteFolder[\"&lt;workspace&gt;/shared/\"]\n        rclone <--> remoteFolder\n    end\n\n    localApp <--> cloudStorage\n    cloudStorage <--> rclone\n\n    style local fill:#e8f5e9,stroke:#4caf50\n    style cloud fill:#e3f2fd,stroke:#2196f3\n    style remote fill:#fff3e0,stroke:#ff9800\n```\n\n## This PR (1 of 4)\n\nAdds core infrastructure only — **no user-facing features yet**. Subsequent PRs build on this:\n\n```mermaid\nflowchart TD\n    subgraph PR1[\"PR 1: Foundation — this PR\"]\n        types[\"src/config/types.workspace.ts<br/><i>Config types</i>\"]\n        rclone[\"src/infra/rclone.ts<br/><i>rclone wrapper + config gen</i>\"]\n    end\n\n    subgraph PR2[\"PR 2: CLI\"]\n        cli[\"src/cli/workspace-cli.ts<br/><i>CLI commands</i>\"]\n    end\n\n    subgraph PR3[\"PR 3: Auto-sync\"]\n        hooks[\"src/hooks/bundled/workspace-sync/<br/><i>Session hooks</i>\"]\n        manager[\"src/gateway/workspace-sync-manager.ts<br/><i>Background interval sync</i>\"]\n    end\n\n    subgraph PR4[\"PR 4: Docs\"]\n        docs[\"docs/gateway/workspace-sync.md<br/><i>Full documentation</i>\"]\n        skill[\"skills/workspace-sync/SKILL.md<br/><i>Agent skill</i>\"]\n    end\n\n    types --> rclone\n    rclone --> cli\n    rclone --> hooks\n    hooks --> manager\n    cli --> docs\n    manager --> docs\n    docs --> skill\n```\n\n## Changes\n\n| File | Lines | Purpose |\n|------|-------|---------|\n| `src/config/types.workspace.ts` | 129 | Config types for `workspace.sync` block — provider options (dropbox, gdrive, onedrive, s3, custom), sync paths, intervals, conflict resolution, provider-specific settings |\n| `src/infra/rclone.ts` | 598 | rclone wrapper: binary detection in PATH + common install locations, config file generation from `openclaw.json` credentials, OAuth authorization flow for Dropbox/GDrive/OneDrive, `bisync` (bidirectional) and `sync` (one-way) operations, remote listing and connection health checks, cross-platform path handling (macOS, Linux, Windows) |\n| `src/infra/rclone.test.ts` | 277 | 23 unit tests covering config generation, path resolution, binary detection |\n| `src/config/types.openclaw.ts` | +2 | Wire `workspace?: WorkspaceConfig` into root config type |\n\n**Total: ~1,006 lines** (4 files, reviewable in one sitting)\n\n## Testing\n\n- ✅ 23 unit tests pass\n- ✅ Rebased cleanly on current `main`\n- ✅ Running in production on my own Gateway daily\n\n## Related\n\n- Meta-issue: #18106\n- Previous PR (auto-closed by triage): #4146\n- Original monolith PR (closed for size): #3505\n- Discussion: #3509\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR adds foundational infrastructure for bidirectional workspace sync with cloud storage providers via rclone. It introduces config types (`WorkspaceSyncConfig`) wired into the root `OpenClawConfig`, and a comprehensive rclone wrapper with binary detection, config generation, OAuth authorization, and sync operations (bisync + one-way).\n\n- **Config types** (`types.workspace.ts`) are clean and well-documented, covering Dropbox, Google Drive, OneDrive, S3, and custom providers with appropriate per-provider options.\n- **rclone wrapper** (`rclone.ts`) handles binary detection across platforms, config file generation with `0o600` permissions, OAuth token extraction, and both `bisync` and `sync` operations with proper error handling.\n- **Security concern**: `ensureRcloneInstalled` downloads and executes a remote script via `sudo bash -c` without integrity verification. While the user is prompted, this `curl | sudo bash` pattern is risky. The Homebrew path is safer; the fallback script install should at minimum write to a temp file for user inspection.\n- **Minor security inconsistency**: `writeRcloneConfig` creates parent directories without `mode: 0o700`, inconsistent with other infra modules (`json-file.ts`, `device-identity.ts`) that protect directories containing sensitive files.\n- **Test coverage** is solid for the pure/sync functions (23 tests), though the async functions involving binary execution are untested (reasonable for a unit test suite).\n\n<h3>Confidence Score: 3/5</h3>\n\n- PR is mostly safe as infrastructure-only with no user-facing features yet, but has two security concerns in the rclone install and config directory permissions that should be addressed before merge.\n- Score of 3 reflects: clean type definitions and config wiring (no risk), solid test coverage for pure functions, but a `curl | sudo bash` install pattern that runs unverified remote code as root, and a directory permissions inconsistency with the rest of the codebase's security patterns. Neither issue will cause runtime errors today, but the install flow introduces risk if ever triggered.\n- `src/infra/rclone.ts` — the `ensureRcloneInstalled` function (lines 127-152) and `writeRcloneConfig` (lines 273-279) need security review.\n\n<sub>Last reviewed commit: ebf7a83</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(5/5) You can turn off certain types of comments like style [here](https://app.greptile.com/review/github)!</sub>\n\n<!-- /greptile_comment -->",
      "author": "ashbrener",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T14:07:40Z",
      "updatedAt": "2026-02-16T14:13:43Z",
      "headRef": "feat/workspace-sync-pr1",
      "baseRef": "main",
      "filesChanged": 4,
      "additions": 1006,
      "deletions": 0,
      "commits": 1,
      "labels": [
        "size: XL"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        13616
      ],
      "changedFiles": [
        "src/config/types.openclaw.ts",
        "src/config/types.workspace.ts",
        "src/infra/rclone.test.ts",
        "src/infra/rclone.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18104.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/infra/rclone.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 68,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "1006 lines changed (1006+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 51,
          "weight": 0.12,
          "reason": "ashbrener (NONE, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #13616"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 6681 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: size: XL"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18055,
      "title": "fix: preserve parent announce for nested subagents waiting for descendants",
      "body": "## Summary\n\nThis PR adds Azure AI Foundry URL support for custom providers AND includes a fix for session-memory hook failing after /new or /reset.\n\n## Changes\n\n### Azure AI Foundry Support\n- Added `isAzureUrl()` to detect Azure URLs\n- Added `transformAzureUrl()` to transform Azure URLs to include deployment path\n- Added `api-version` query parameter for Azure verification\n\n### Session Memory Fix (Issue #18088)\n- Session-memory hook now finds previous session file after /new/reset\n- Falls back to most recent non-reset .jsonl file when current file is empty\n\nFixes openclaw/openclaw#18088",
      "author": "MisterGuy420",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T12:46:22Z",
      "updatedAt": "2026-02-16T14:09:59Z",
      "headRef": "fix/issue-18037-nested-subagent-announce",
      "baseRef": "main",
      "filesChanged": 3,
      "additions": 953,
      "deletions": 9,
      "commits": 4,
      "labels": [
        "commands",
        "size: L"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        18088,
        18088
      ],
      "changedFiles": [
        "skills/gh-issues/SKILL.md",
        "src/commands/onboard-custom.ts",
        "src/hooks/bundled/session-memory/handler.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18055.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "commented",
      "reviewCount": 3,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 68,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "962 lines changed (953+/9-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 57,
          "weight": 0.12,
          "reason": "MisterGuy420 (CONTRIBUTOR, rep: 26)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #18088, #18088"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (3 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 593 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: commands, size: L"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 89334,
      "title": "dx: Add match logging to --debug-build-paths",
      "body": "### Why?\r\n\r\nWhen using `--debug-build-paths`, the intention is that I expect to match patterns. If it doesn't, I want to know right away, but currently, it just warns and proceeds to build the whole app. Especially when you run on agents, it's better to fail fast and save tokens.\r\n\r\nAlso, it didn't mention how many files had matched. Sometimes there's a case where just `/_not-found` is built and not the files I intended. Displaying the whole files would be spam, so just list how many files it matched so I can quickly check whether it's working as intended.\r\n\r\n### How?\r\n\r\n- Throw when no patterns matched\r\n- Show number of files matched\r\n\r\nSupersedes https://github.com/vercel/next.js/pull/88909\r\n\r\n---\r\n<a href=\"https://cursor.com/background-agent?bcId=bc-88b9af76-8bac-45f0-a1d8-9ca3ab49fdac\"><picture><source media=\"(prefers-color-scheme: dark)\" srcset=\"https://cursor.com/assets/images/open-in-cursor-dark.png\"><source media=\"(prefers-color-scheme: light)\" srcset=\"https://cursor.com/assets/images/open-in-cursor-light.png\"><img alt=\"Open in Cursor\" width=\"131\" height=\"28\" src=\"https://cursor.com/assets/images/open-in-cursor-dark.png\"></picture></a>&nbsp;<a href=\"https://cursor.com/agents?id=bc-88b9af76-8bac-45f0-a1d8-9ca3ab49fdac\"><picture><source media=\"(prefers-color-scheme: dark)\" srcset=\"https://cursor.com/assets/images/open-in-web-dark.png\"><source media=\"(prefers-color-scheme: light)\" srcset=\"https://cursor.com/assets/images/open-in-web-light.png\"><img alt=\"Open in Web\" width=\"114\" height=\"28\" src=\"https://cursor.com/assets/images/open-in-web-dark.png\"></picture></a>\r\n\r\n",
      "author": "devjiwonchoi",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-01-31T11:04:16Z",
      "updatedAt": "2026-02-14T21:51:03Z",
      "headRef": "cursor/pr-88909-ci-failures-78af",
      "baseRef": "canary",
      "filesChanged": 3,
      "additions": 40,
      "deletions": 16,
      "commits": 4,
      "labels": [
        "type: next",
        "created-by: Next.js team",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "packages/next/errors.json",
        "packages/next/src/lib/resolve-build-paths.ts",
        "test/production/debug-build-path/debug-build-paths.test.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89334.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/production/debug-build-path/debug-build-paths.test.ts"
      ],
      "ageInDays": 16,
      "mergeable": "unknown",
      "reviewState": "commented",
      "reviewCount": 6,
      "commentCount": 6,
      "isDraft": false,
      "requestedReviewers": [
        "unstubbable"
      ],
      "codeowners": [],
      "totalScore": 67,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "56 lines changed (40+/16-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "devjiwonchoi (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "16d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (6 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1598 chars"
        },
        {
          "name": "activity",
          "score": 90,
          "weight": 0.04,
          "reason": "6 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, created-by: Next.js team, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 80,
          "weight": 0.05,
          "reason": "1 reviewer(s): unstubbable"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90007,
      "title": "fix(eslint-plugin-next): recurse appDir parser in no-html-link-for-pages",
      "body": "## What\r\n\r\nThis PR fixes app directory traversal in `no-html-link-for-pages` URL discovery.\r\n\r\n`parseUrlForAppDir` was recursively delegating into `parseUrlForPages`, which uses pages-specific semantics.  \r\nThis change keeps recursion in app-dir mode (`parseUrlForAppDir` -> `parseUrlForAppDir`) and adds a regression test fixture to ensure `layout`-only paths are not treated as routable page paths.\r\n\r\n## Why\r\n\r\nThe app router and pages router have different file semantics.  \r\nMixing parsers during recursion can produce incorrect URL candidates and false positives in linting.\r\n\r\nThis is a follow-up to the appDir support work in [#68770](https://github.com/vercel/next.js/issues/68770).\r\n\r\n## How\r\n\r\n- Updated recursion in:\r\n  - `packages/eslint-plugin-next/src/utils/url.ts`\r\n- Added regression coverage in:\r\n  - `test/unit/eslint-plugin-next/no-html-link-for-pages.test.ts`\r\n- Added dedicated fixture:\r\n  - `test/unit/eslint-plugin-next/with-app-dir-layout-only/app/page.tsx`\r\n  - `test/unit/eslint-plugin-next/with-app-dir-layout-only/app/nested/layout.tsx`\r\n\r\n## Testing\r\n\r\n- `pnpm exec jest test/unit/eslint-plugin-next/no-html-link-for-pages.test.ts` ✅\r\n- `pnpm exec jest test/unit/eslint-plugin-next/` ✅\r\n\r\n## Related\r\n\r\n- Follow-up: #68770\r\n- Original issue context: #51742\r\n",
      "author": "x0m4ek",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-14T19:30:59Z",
      "updatedAt": "2026-02-14T19:31:19Z",
      "headRef": "fix/no-html-link-appdir-recursion",
      "baseRef": "canary",
      "filesChanged": 4,
      "additions": 32,
      "deletions": 2,
      "commits": 1,
      "labels": [
        "type: next",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        68770,
        68770,
        51742
      ],
      "changedFiles": [
        "packages/eslint-plugin-next/src/utils/url.ts",
        "test/unit/eslint-plugin-next/no-html-link-for-pages.test.ts",
        "test/unit/eslint-plugin-next/with-app-dir-layout-only/app/nested/layout.tsx",
        "test/unit/eslint-plugin-next/with-app-dir-layout-only/app/page.tsx"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90007.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/unit/eslint-plugin-next/no-html-link-for-pages.test.ts",
        "test/unit/eslint-plugin-next/with-app-dir-layout-only/app/nested/layout.tsx",
        "test/unit/eslint-plugin-next/with-app-dir-layout-only/app/page.tsx"
      ],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 67,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "34 lines changed (32+/2-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 47,
          "weight": 0.12,
          "reason": "x0m4ek (NONE, rep: 86)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #68770, #68770, #51742"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "3 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1288 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 18110,
      "title": "enhance: elevate special context files (soul.md, identity.md, user.md, memory.md) into dedicated prompt sections",
      "body": "Closes #17810\r\n\r\nElevates `soul.md`, `identity.md`, `user.md`, and `memory.md` out of the flat `# Project Context` list into dedicated sections (`## Doctrine`,` ## Identity`, `## User Context`, `## Memory`) with scoped preambles. Non-special files render in Project Context as before; elevated files are filtered out to save tokens.\r\n\r\nRunning in production since 2026.2.3 across all releases up to and including 2026.2.3 with zero conflicts or regressions.\r\n\r\nSee issue #17810 for full design rationale and patch documentation.\r\n\r\n**AI Disclosure:** This patch was developed with AI assistance (Claude) for code review, syntax fixes, type safety refinements, and documentation.\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR elevates four special context files (`soul.md`, `identity.md`, `user.md`, `memory.md`) from the flat `# Project Context` section into dedicated prompt sections (`## Doctrine`, `## Identity`, `## User Context`, `## Memory`) with scoped preambles for `soul.md` and `identity.md`. Non-special files continue to render in Project Context as before, and elevated files are filtered out to avoid token duplication.\n\n- The filtering logic at line 624-627 uses **reference equality** (`specialFiles.get(base) !== file`) to exclude elevated files, which means duplicate special files from different paths (e.g., `./soul.md` and `dir/soul.md`) will leak into Project Context. Using `specialFiles.has(base)` would be more robust.\n- Existing tests at lines 316-330 and 349-361 assert behavior that this PR changes: `IDENTITY.md` is now elevated (not in Project Context with `## IDENTITY.md` heading), and the old soul.md guidance string is replaced with a new preamble. These tests likely need updating to match the new behavior.\n\n<h3>Confidence Score: 3/5</h3>\n\n- Functional logic is mostly sound but a filtering bug causes duplicate special files to leak into Project Context, and existing tests likely fail with the new behavior.\n- Score of 3 reflects that the core approach is well-designed and the change is scoped to one file, but the reference-equality filter creates a correctness issue for duplicate special files, and existing test assertions (IDENTITY.md rendering, SOUL.md guidance string) appear incompatible with the new code paths.\n- `src/agents/system-prompt.ts` (filtering logic at line 624-627) and `src/agents/system-prompt.e2e.test.ts` (tests at lines 316-330 and 349-361 likely need updates)\n\n<sub>Last reviewed commit: 26bcc9f</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>\n\n<!-- /greptile_comment -->",
      "author": "sar618",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T14:13:46Z",
      "updatedAt": "2026-02-16T15:00:20Z",
      "headRef": "enhance/context-elevation",
      "baseRef": "main",
      "filesChanged": 2,
      "additions": 63,
      "deletions": 17,
      "commits": 3,
      "labels": [
        "agents",
        "size: S"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        17810
      ],
      "changedFiles": [
        "src/agents/system-prompt.e2e.test.ts",
        "src/agents/system-prompt.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18110.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/agents/system-prompt.e2e.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 67,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "80 lines changed (63+/17-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 39,
          "weight": 0.12,
          "reason": "sar618 (NONE, rep: 60)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #17810"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 2643 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: agents, size: S"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 7358,
      "title": "feat: Event-Sourced Memory with NATS JetStream",
      "body": "# feat: Event-Sourced Memory with NATS JetStream\n\n## What This Does\n\nAdds optional event sourcing for OpenClaw sessions using NATS JetStream. Every conversation event (messages in/out, tool calls, lifecycle events) is persisted to an append-only log with sequence numbers and timestamps.\n\nThis enables capabilities that aren't possible with traditional memory approaches:\n\n## Capabilities\n\n### 1. Event Replay\nEvery event has a sequence number. You can retrieve any event by sequence, or replay a range to reconstruct state.\n\n```bash\n# Get event #47832\nnats stream get openclaw-events 47832\n\n# Replay last 1000 events\nnats stream get openclaw-events --last 1000\n```\n\n**Use case:** Debugging agent behavior, auditing decisions, disaster recovery.\n\n### 2. Temporal Queries\nQuery events by time range and agent. Answer questions like \"What happened last Tuesday at 14:00?\"\n\n```typescript\nconst events = await eventStore.query({\n  agent: \"main\",\n  since: \"2026-01-28T14:00:00Z\",\n  until: \"2026-01-28T15:00:00Z\"\n});\n```\n\n**Use case:** Context reconstruction, compliance, understanding past decisions.\n\n### 3. Projections\nSubscribe to the event stream and build derived views:\n- Learning systems that extract preferences from conversation patterns\n- Analytics dashboards\n- Knowledge graphs built from entity extraction\n- Compliance/audit reports\n\n**Use case:** Any downstream processing that benefits from complete history.\n\n### 4. Multi-Agent Isolation\nEach agent writes to its own subject prefix (`openclaw.events.{agent}.*`). Agents can share a stream while maintaining logical isolation. Cross-agent queries are possible when needed.\n\n### 5. Real-time Subscriptions\nExternal tools can subscribe to events via WebSocket or NATS directly. Build dashboards, triggers, or integrations that react to agent activity in real-time.\n\n---\n\n## What This Doesn't Do\n\n- **Not a replacement for context windows** — This is persistence, not prompt injection\n- **Not automatic RAG** — You still need to build retrieval on top\n- **Not magic memory** — Events are raw data; intelligence comes from how you process them\n\n---\n\n## Production Data\n\nRunning in production for 4+ days:\n\n| Metric | Value |\n|--------|-------|\n| Events stored | 187,000+ |\n| Storage used | 236 MB |\n| Active agents | 5 |\n| Consumer lag | 0 (real-time) |\n| Write latency | <15ms |\n| Data loss | Zero |\n| Unplanned downtime | Zero |\n\n---\n\n## Trade-offs\n\n| Benefit | Cost |\n|---------|------|\n| Complete history | Storage grows linearly (~1.3KB/event avg) |\n| Temporal queries | Requires NATS JetStream (additional service) |\n| Multi-agent isolation | More complex configuration |\n| Real-time subscriptions | WebSocket bridge needed for browser access |\n\n**Honest assessment:** If you only need \"remember last N messages\", this is overkill. If you need audit trails, debugging, or learning systems — this is the right architecture.\n\n---\n\n## Quick Start\n\n### 1. Start NATS with JetStream\n\n```bash\n# Docker (simplest)\ndocker run -d --name nats \\\n  -p 4222:4222 \\\n  nats:latest -js -sd /data\n\n# Or native install\nnats-server -js -sd /var/lib/nats\n```\n\n### 2. Configure OpenClaw\n\nAdd to your gateway config (`~/.openclaw/openclaw.json`):\n\n```json\n{\n  \"gateway\": {\n    \"eventStore\": {\n      \"enabled\": true,\n      \"natsUrl\": \"nats://localhost:4222\",\n      \"streamName\": \"openclaw-events\",\n      \"subjectPrefix\": \"openclaw.events\"\n    }\n  }\n}\n```\n\n### 3. Restart Gateway\n\n```bash\nopenclaw gateway restart\n```\n\n### 4. Verify\n\n```bash\n# Check stream exists\nnats stream info openclaw-events\n\n# Watch events in real-time\nnats sub \"openclaw.events.>\"\n```\n\nEvents now flow automatically. Every message, tool call, and lifecycle event is persisted.\n\n---\n\n## Optional: Multi-Agent Setup\n\nFor per-agent isolation with separate credentials:\n\n```bash\n# Create NATS users (nats-server.conf)\nauthorization {\n  users = [\n    { user: \"main\", password: \"xxx\", permissions: { publish: \"openclaw.events.main.>\", subscribe: \"openclaw.events.main.>\" } }\n    { user: \"viola\", password: \"yyy\", permissions: { publish: \"openclaw.events.viola.>\", subscribe: \"openclaw.events.viola.>\" } }\n  ]\n}\n```\n\nEach agent connects with its own credentials and can only access its own events.\n\n---\n\n## Optional: Learning Consumer\n\nProcess events to extract patterns:\n\n```bash\n# In scripts/\nnode event-consumer.mjs --status    # Check consumer lag\nnode learning-processor-v2.mjs 24   # Process last 24h of events\n```\n\nOutputs to `learning/{agent}/context.md` — preferences, skill gaps, frequent topics.\n\n---\n\n## Security Considerations\n\n- **NATS binds to localhost by default** — No external exposure unless you configure it\n- **Credentials per agent** — Isolation at the auth level\n- **No sensitive data in events by default** — Message content is included; configure `excludeContent: true` if needed\n- **Stream retention configurable** — Set limits on age/size if storage is a concern\n\n---\n\n## Files Changed\n\n| File | Purpose |\n|------|---------|\n| `src/event-store/client.ts` | NATS JetStream client with reconnection handling |\n| `src/event-store/context.ts` | Temporal query builder |\n| `src/event-store/types.ts` | Event schema definitions |\n| `docs/event-store.md` | Setup guide and API reference |\n\n---\n\n## Comparison with Alternatives\n\n| Approach | Replay | Temporal | Projections | Self-hosted |\n|----------|--------|----------|-------------|-------------|\n| Conversation summaries | ❌ Lossy | ❌ | ❌ | ✅ |\n| Vector DB (RAG) | ❌ | ❌ | ⚠️ Limited | ✅ |\n| SQLite message log | ⚠️ Manual | ⚠️ Manual | ⚠️ Manual | ✅ |\n| **NATS JetStream** | ✅ Native | ✅ Native | ✅ Native | ✅ |\n\nThe difference: This is **actual event sourcing**, not \"we save messages to a database.\" Immutable log, sequence numbers, temporal queries, consumer groups — the full pattern.\n\n---\n\n## When NOT to Use This\n\n- You only need short-term context (last few messages)\n- You can't run an additional service (NATS)\n- Storage is extremely constrained (<500MB available)\n- You don't need audit/debug/learning capabilities\n\nFor simple use cases, OpenClaw's built-in context management is sufficient.\n\n---\n\n**Questions?** Open an issue or ask in Discord.\n",
      "author": "alberthild",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-02T18:46:03Z",
      "updatedAt": "2026-02-16T14:59:01Z",
      "headRef": "feature/event-store-only",
      "baseRef": "main",
      "filesChanged": 11,
      "additions": 1224,
      "deletions": 0,
      "commits": 13,
      "labels": [
        "docs",
        "gateway",
        "size: L"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        47832
      ],
      "changedFiles": [
        "docs/concepts/event-store.md",
        "openclaw-2026.2.9.tgz",
        "src/config/types.eventstore.ts",
        "src/config/types.openclaw.ts",
        "src/config/zod-schema.ts",
        "src/gateway/server-close.ts",
        "src/gateway/server.impl.ts",
        "src/infra/__test__/event-store.helpers.ts",
        "src/infra/event-store.test.ts",
        "src/infra/event-store.ts",
        "src/types/nats.d.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/7358.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/infra/__test__/event-store.helpers.ts",
        "src/infra/event-store.test.ts"
      ],
      "ageInDays": 13,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 5,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 67,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "1224 lines changed (1224+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 44,
          "weight": 0.12,
          "reason": "alberthild (NONE, rep: 78)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #47832"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "2 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "13d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 6136 chars"
        },
        {
          "name": "activity",
          "score": 90,
          "weight": 0.04,
          "reason": "5 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: docs, gateway, size: L"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 15379,
      "title": "fix(antigravity): strip unsigned thinking blocks in agent loop via transformContext",
      "body": "## Summary\n\nFixes #13826\n\nGoogle Antigravity returns Claude thinking blocks without `signature` fields. The existing `sanitizeAntigravityThinkingBlocks` in `sanitizeSessionHistory` only runs once per user turn (at session load), but within the same turn, pi-ai's `agent-loop.js` accumulates assistant responses—with unsigned thinking blocks—in `context.messages` and replays them on subsequent API calls during tool-call iterations. This causes:\n\n```\nLLM request rejected: messages.N.content.0.thinking.signature: Field required\n```\n\n### Fix\n\nUse the `Agent.transformContext` hook (called by the agent loop before every API call) to run `sanitizeAntigravityThinkingBlocks`, stripping unsigned thinking blocks both at session replay **and** between tool-call iterations within a single turn.\n\nThe hook is only set when `transcriptPolicy.normalizeAntigravityThinkingBlocks` is true (i.e., Antigravity providers), so non-Antigravity providers are unaffected.\n\n### Code flow (before fix)\n\n```\nagent-loop.js: streamAssistantResponse()\n  → API returns assistant with thinking block (no signature)\n  → stored in context.messages\n\nagent-loop.js: tool execution → next streamAssistantResponse()\n  → context.messages still has unsigned thinking blocks\n  → API rejects: \"thinking.signature: Field required\"\n```\n\n### Code flow (after fix)\n\n```\nagent-loop.js: streamAssistantResponse()\n  → config.transformContext(messages)  ← strips unsigned thinking blocks\n  → clean messages sent to API\n```\n\n## Test plan\n\n- [x] All 81 `pi-embedded-runner` tests pass\n- [x] `pnpm build && pnpm check` clean\n- [x] Verified on live Antigravity deployment with tool-calling conversations\n\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\n\n<!-- greptile_comment -->\n\n<h2>Greptile Overview</h2>\n\n<h3>Greptile Summary</h3>\n\nThis PR updates the embedded Pi runner to sanitize Google Antigravity “thinking” blocks (which may be missing required signature fields) before *every* API call, not just once when loading a session transcript.\n\nConcretely, `runEmbeddedAttempt` now conditionally attaches a `transformContext` hook on the active agent when `transcriptPolicy.normalizeAntigravityThinkingBlocks` is enabled, so the agent loop will strip invalid/unsigned thinking blocks during tool-call iterations within the same user turn. This aligns the between-iteration behavior with the existing session-load sanitization already performed in `sanitizeSessionHistory`.\n\n<h3>Confidence Score: 4/5</h3>\n\n- This PR appears safe to merge and is narrowly scoped to Antigravity-only transcript sanitization.\n- The change is small, gated by `transcriptPolicy.normalizeAntigravityThinkingBlocks`, and reuses existing sanitization logic already applied at session load. No other behavior changes were observed in the runner. I could not fully verify upstream `pi-ai`/`pi-agent-core` behavior around `transformContext` because those implementations are external dependencies not present in-repo, so there is some residual integration uncertainty.\n- src/agents/pi-embedded-runner/run/attempt.ts\n\n<sub>Last reviewed commit: 0fa4a6a</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "jg-noncelogic",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-13T11:02:50Z",
      "updatedAt": "2026-02-16T14:08:24Z",
      "headRef": "fix/antigravity-thinking-transform-context",
      "baseRef": "main",
      "filesChanged": 1,
      "additions": 12,
      "deletions": 0,
      "commits": 2,
      "labels": [
        "agents",
        "size: XS"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        13826
      ],
      "changedFiles": [
        "src/agents/pi-embedded-runner/run/attempt.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/15379.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 3,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 67,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "12 lines changed (12+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 55,
          "weight": 0.12,
          "reason": "jg-noncelogic (CONTRIBUTOR, rep: 21)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #13826"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "3d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 3172 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: agents, size: XS"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 17916,
      "title": "[ fix ] : correct config directory path during onboarding",
      "body": "Changed the target configuration directory from the legacy /home/node/.clawdbot to /home/node/.openclaw.\r\n\r\nFixed #17524\r\n\r\nChange Type\r\n\r\n    [x] Bug fix\r\n    [ ] Feature\r\n    [ ] Refactor\r\n    [ ] Docs\r\n    [ ] Security hardening\r\n    [x] Chore/infra\r\n\r\nBefore:\r\n- CLI output: Config: .../.clawdbot/moltbot.json (Host dir empty).\r\n\r\nAfter:\r\n- CLI output: Config: .../.openclaw/moltbot.json (Host dir populated).\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nAdds the `OPENCLAW_STATE_DIR` environment variable to both services in `docker-compose.yml`, explicitly pointing to `/home/node/.openclaw`. This aligns docker-compose with other deployment configs (`fly.toml`, `render.yaml`) that already set this variable.\n\n- Without this env var, `resolveStateDir()` in `src/config/paths.ts` relies on filesystem checks to pick the state directory. During initial container startup (before the volume is populated), this could cause fallback to legacy directories like `.clawdbot`, resulting in config being written to the wrong path.\n- The fix is minimal and correctly targets the root cause. Both the `openclaw-gateway` and `openclaw-cli` services are updated consistently.\n- No issues found with this change.\n\n<h3>Confidence Score: 5/5</h3>\n\n- This PR is safe to merge — it adds a single, well-understood environment variable to two docker-compose services with no risk of side effects.\n- The change is a two-line addition of a standard environment variable that other deployment configs (fly.toml, render.yaml) already set. The variable is the documented override for state directory resolution, and the value matches the existing volume mount target. No logic changes, no new dependencies, and the fix is consistent with the rest of the codebase.\n- No files require special attention.\n\n<sub>Last reviewed commit: 6f3c22f</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>\n\n<!-- /greptile_comment -->",
      "author": "Dijo-404",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T09:13:47Z",
      "updatedAt": "2026-02-16T14:06:20Z",
      "headRef": "fix/config-directory-path",
      "baseRef": "main",
      "filesChanged": 1,
      "additions": 2,
      "deletions": 0,
      "commits": 5,
      "labels": [
        "docker",
        "size: XS"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        17524
      ],
      "changedFiles": [
        "docker-compose.yml"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17916.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 67,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 20,
          "weight": 0.07,
          "reason": "2 lines changed (2+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 51,
          "weight": 0.12,
          "reason": "Dijo-404 (NONE, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #17524"
        },
        {
          "name": "spam",
          "score": 60,
          "weight": 0.12,
          "reason": "<3 lines"
        },
        {
          "name": "test_coverage",
          "score": 60,
          "weight": 0.12,
          "reason": "Docs/config PR — tests not expected"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1994 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: docker, size: XS"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 90046,
      "title": "Turbopack: allow resolving TS files in tailwind config",
      "body": "<!-- Thanks for opening a PR! Your contribution is much appreciated.\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\nChoose the right checklist for the change(s) that you're making:\n\n## For Contributors\n\n### Improving Documentation\n\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\n\n### Fixing a bug\n\n- Related issues linked using `fixes #number`\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\n\n### Adding a feature\n\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\n- Related issues/discussions are linked using `fixes #number`\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\n- Documentation added\n- Telemetry added. In case of a feature if it's used or not.\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\n\n\n## For Maintainers\n\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\n- When linking to a Slack thread, you might want to share details of the conclusion\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\n- Add review comments if necessary to explain to the reviewer the logic behind a change\n\n### What?\n\n### Why?\n\n### How?\n\nCloses NEXT-\nFixes #\n\n-->\n",
      "author": "mischnic",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-16T13:26:15Z",
      "updatedAt": "2026-02-16T13:47:32Z",
      "headRef": "mischnic/tailwind-tracing-ts",
      "baseRef": "canary",
      "filesChanged": 4,
      "additions": 13,
      "deletions": 1,
      "commits": 1,
      "labels": [
        "Turbopack",
        "created-by: Turbopack team"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "crates/next-api/src/next_server_nft.rs",
        "turbopack/crates/turbopack-resolve/src/resolve_options_context.rs",
        "turbopack/crates/turbopack/src/evaluate_context.rs",
        "turbopack/crates/turbopack/src/lib.rs"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90046.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 3,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 66,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "14 lines changed (13+/1-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "mischnic (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1842 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "3 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: Turbopack, created-by: Turbopack team"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 18114,
      "title": "feat: agent hardening — modifying after_tool_call hook, cron context & quality gate, structured subagent tools",
      "body": "## Summary\n\nThis PR improves agent reliability across three areas:\n\n- **Modifying `after_tool_call` hook** — The hook now supports returning `{ appendContent }` so plugins can inject extra text into tool results the LLM sees (without mutating persisted messages). This is the foundation for plugins like [verify-tool-output](https://github.com/roelven/openclaw-agent-plugins/tree/main/verify-tool-output) that nudge agents to verify their work.\n\n- **Cron self-contained context & output quality gate** — Cron jobs now inject a `[CRON_JOB_SPEC]` block with full job metadata (schedule, last run, delivery target, task) so the agent has context even after compaction. A configurable quality gate checks output before delivery — blocks too-short, too-long, or degraded responses (e.g. \"I don't have enough context\").\n\n- **Structured subagent spawn + verify/poll tools** — `sessions_spawn` accepts optional structured fields (`objective`, `successCriteria`, `expectedOutputs`, `constraints`, `reportBack`) that get formatted into a `[TASK_SPEC]` block. New `sessions_verify` and `sessions_poll` tools let the parent agent check subagent completion, artifacts, and transcript patterns.\n\n## Changes\n\n| File | What |\n|------|------|\n| `src/plugins/types.ts` | New `PluginHookAfterToolCallResult` type with `appendContent` |\n| `src/plugins/hooks.ts` | `runAfterToolCall` now uses `runModifyingHook` and merges `appendContent` |\n| `src/agents/pi-tool-definition-adapter.ts` | Consumes hook result, appends content to tool result |\n| `src/config/types.cron.ts` | New `CronQualityCheckConfig` type |\n| `src/cron/isolated-agent/run.ts` | `buildCronJobSpec()`, `formatSchedule()`, `checkCronOutputQuality()`, quality gate integration |\n| `src/agents/tools/sessions-spawn-tool.ts` | Structured fields + `buildTaskSpec()` |\n| `src/agents/tools/sessions-verify-tool.ts` | New tool — completion + artifact + transcript checks |\n| `src/agents/tools/sessions-poll-tool.ts` | New tool — lightweight in-memory status poll |\n| `src/agents/openclaw-tools.ts` | Register new tools |\n\n## Companion plugins\n\nThese core changes enable a set of community plugins published separately: [openclaw-agent-plugins](https://github.com/roelven/openclaw-agent-plugins)\n\n- **sanitize-tool-results** — Fixes malformed tool blocks, truncates oversized results, strips ANSI\n- **verify-tool-output** — Injects `[VERIFY]` hints after exec/write/cron calls (uses the `appendContent` hook from this PR)\n- **session-scorer** — Scores sessions on accuracy, completeness, autonomy, consistency\n- **event-stream** — Streams JSON events over Unix socket for monitoring\n\n## Test plan\n\n- [ ] All 5048 existing tests pass (`pnpm test:fast`)\n- [ ] Cron jobs include `[CRON_JOB_SPEC]` block in transcript\n- [ ] Quality gate blocks degraded cron output, allows heartbeats through\n- [ ] Structured spawn produces `[TASK_SPEC]` block\n- [ ] `sessions_poll` returns status for running/completed subagents\n- [ ] `sessions_verify` checks artifacts and transcript patterns\n- [ ] `verify-tool-output` plugin appends hints via `appendContent`\n\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR adds three agent reliability improvements:\n\n- **Modifying `after_tool_call` hook**: The hook now runs sequentially (changed from parallel) and supports returning `{ appendContent }` to inject extra text into tool results. The plugin adapter correctly spreads appended content onto results without mutation. This is the foundation for companion plugins like `verify-tool-output`.\n\n- **Cron self-contained context + quality gate**: `buildCronJobSpec()` replaces the old terse `[cron:id name] message` format with a rich `[CRON_JOB_SPEC]` block containing schedule, last run status, delivery config, and full task. `checkCronOutputQuality()` blocks delivery of degraded output (too short, too long, or matching configurable reject patterns) while correctly allowing heartbeats and structured media through.\n\n- **Structured spawn + verify/poll tools**: `sessions_spawn` accepts optional structured fields that format into a `[TASK_SPEC]` block. New `sessions_verify` polls for completion, checks artifacts, and matches transcript patterns. New `sessions_poll` does lightweight in-memory status checks.\n\nAll three features follow existing codebase patterns (session key resolution, tool schema conventions, hook runner patterns). The changes are additive and backwards compatible. No `Type.Union` in tool schemas, consistent with project guidelines.\n\n- Minor: `sessions-verify-tool.ts` has an unused `loadConfig()` call in `checkTranscriptPatterns` (line 88)\n- Minor: No unit tests for the two new tools (`sessions_verify`, `sessions_poll`), though manual test plan is documented\n\n<h3>Confidence Score: 4/5</h3>\n\n- This PR is safe to merge — changes are additive, backwards compatible, and follow existing patterns\n- Score of 4 reflects clean, well-structured code with only minor issues (unused variable, no new unit tests for new tools). The hook behavior change from parallel to sequential is intentional and necessary for the new return-value semantics. The quality gate logic is sound with proper skip conditions for heartbeats and structured content. Tool schemas comply with project conventions (no Type.Union).\n- `src/agents/tools/sessions-verify-tool.ts` has an unused variable and accepts user-supplied regex patterns that could theoretically cause performance issues on large transcripts\n\n<sub>Last reviewed commit: 4f8b617</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>\n\n<!-- /greptile_comment -->",
      "author": "roelven",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T14:19:24Z",
      "updatedAt": "2026-02-16T14:46:36Z",
      "headRef": "feat/agent-hardening",
      "baseRef": "main",
      "filesChanged": 9,
      "additions": 640,
      "deletions": 13,
      "commits": 6,
      "labels": [
        "agents",
        "size: L"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "src/agents/openclaw-tools.ts",
        "src/agents/pi-tool-definition-adapter.ts",
        "src/agents/tools/sessions-poll-tool.ts",
        "src/agents/tools/sessions-spawn-tool.ts",
        "src/agents/tools/sessions-verify-tool.ts",
        "src/config/types.cron.ts",
        "src/cron/isolated-agent/run.ts",
        "src/plugins/hooks.ts",
        "src/plugins/types.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18114.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 66,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "653 lines changed (640+/13-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 51,
          "weight": 0.12,
          "reason": "roelven (NONE, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 5701 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: agents, size: L"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 7396,
      "title": "feat(slack): add message search, Block Kit support, and interaction handling",
      "body": "# PR: Slack Search and Block Kit Support\n\n## Summary\nThis PR adds three major features to OpenClaw's Slack integration:\n1. **Message Search** - Search Slack messages using the `search.messages` API\n2. **Block Kit Support** - Send interactive messages with buttons and components\n3. **Interaction Handling** - Handle button clicks and send events to agents\n\n## Changes\n\n### 1. Message Search (`src/slack/actions.ts`, `src/agents/tools/slack-actions.ts`, `src/channels/plugins/slack.actions.ts`)\n- Added `searchSlackMessages()` function using Slack's Web API\n- Supports query, sort (timestamp/score), sort direction, count, and pagination\n- **Requires user token** (bot tokens cannot use search API)\n- Returns matches with message text, channel info, user, permalink, and timestamps\n\n### 2. Block Kit Support (`src/slack/send.ts`, `src/slack/actions.ts`, `src/agents/tools/slack-actions.ts`, `src/channels/plugins/slack.actions.ts`)\n- Added `blocks` parameter to `sendMessageSlack()` for Block Kit JSON\n- Blocks are passed to Slack's `chat.postMessage` API\n- Supports buttons, sections, actions, and all Block Kit components\n- Falls back to text for multi-chunk messages (blocks only on first message)\n\n### 3. Interaction Handling (`src/slack/monitor/events/interactions.ts`, `src/slack/monitor/events.ts`)\n- New handler for `block_actions` events from Slack Bolt\n- Acknowledges button clicks immediately (prevents warning icon)\n- Sends ephemeral confirmation to user\n- Enqueues system event so agents can respond to interactions\n\n## Usage Examples\n\n### Search Messages\n```json\n{\n  \"action\": \"search\",\n  \"channel\": \"slack\",\n  \"query\": \"from:@user in:#channel keyword\",\n  \"sort\": \"timestamp\",\n  \"sortDir\": \"desc\",\n  \"count\": 20\n}\n```\n\n### Send Message with Button\n```json\n{\n  \"action\": \"send\",\n  \"channel\": \"slack\",\n  \"to\": \"channel:C123\",\n  \"message\": \"Choose an option:\",\n  \"blocks\": [\n    {\n      \"type\": \"section\",\n      \"text\": { \"type\": \"mrkdwn\", \"text\": \"*Hello!*\" }\n    },\n    {\n      \"type\": \"actions\",\n      \"elements\": [\n        {\n          \"type\": \"button\",\n          \"text\": { \"type\": \"plain_text\", \"text\": \"Click me\" },\n          \"action_id\": \"my_button\",\n          \"value\": \"button_value\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n### Handle Button Click\nWhen a user clicks a button, the agent receives a system event:\n```\nSlack button clicked: actionId=my_button value=button_value user=U123\n```\n\n## Configuration\n\n### Required: User Token for Search\nAdd to `openclaw.json`:\n```json\n{\n  \"channels\": {\n    \"slack\": {\n      \"userToken\": \"xoxp-...\",\n      \"userTokenReadOnly\": true\n    }\n  }\n}\n```\n\n### Enable Search Action\nSearch is enabled by default. To explicitly enable:\n```json\n{\n  \"channels\": {\n    \"slack\": {\n      \"actions\": {\n        \"search\": true\n      }\n    }\n  }\n}\n```\n\n## Testing\n\nAll features tested and working:\n- ✅ Search returns results with correct pagination\n- ✅ Block Kit messages render buttons correctly\n- ✅ Button clicks acknowledged without warning icon\n- ✅ Ephemeral confirmation sent to user\n- ✅ System events enqueued for agent handling\n\n## Files Changed\n- `src/slack/actions.ts` - Search function and types\n- `src/slack/send.ts` - Block Kit support in message sending\n- `src/agents/tools/slack-actions.ts` - Action handlers for search and blocks\n- `src/agents/tools/slack-actions.test.ts` - Tests for new features\n- `src/channels/plugins/slack.actions.ts` - Channel plugin wiring\n- `src/slack/monitor/events/interactions.ts` - NEW: Interaction handler\n- `src/slack/monitor/events.ts` - Register interaction handler\n\n## Backwards Compatibility\n- All changes are additive\n- Existing Slack functionality unchanged\n- New features opt-in via parameters\n\n<!-- greptile_comment -->\n\n<h2>Greptile Overview</h2>\n\n<h3>Greptile Summary</h3>\n\nThis PR extends OpenClaw’s Slack integration by wiring a new `searchMessages` action (Slack `search.messages`, requiring a user token), adding optional Block Kit `blocks` passthrough for sends, and registering a Bolt `block_actions` handler that acks interactions and enqueues a system event for agents.\n\nThe search and blocks changes fit cleanly into the existing action/tool/plugin plumbing (`src/slack/actions.ts` → `src/agents/tools/slack-actions.ts` → `src/channels/plugins/slack.actions.ts`) and the new interaction handler is registered alongside other Slack monitor event hooks in `src/slack/monitor/events.ts`.\n\n<h3>Confidence Score: 3/5</h3>\n\n- This PR is mostly safe to merge, but the interaction handler’s broad matcher and session routing edge cases could cause unexpected behavior in production Slack apps.\n- Search and Block Kit passthrough are straightforward and covered by unit tests, but the new `ctx.app.action(/^.*/)` handler will catch all interactive payloads and the use of `\"unknown\"` placeholders can route events to unintended sessions, which can lead to noisy/incorrect agent events.\n- src/slack/monitor/events/interactions.ts\n\n<!-- greptile_other_comments_section -->\n\n<sub>(3/5) Reply to the agent's comments like \"Can you suggest a fix for this @greptileai?\" or ask follow-up questions!</sub>\n\n<!-- /greptile_comment -->",
      "author": "Solvely-Colin",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-02T19:36:37Z",
      "updatedAt": "2026-02-16T14:11:47Z",
      "headRef": "feat/slack-search-and-blocks",
      "baseRef": "main",
      "filesChanged": 8,
      "additions": 418,
      "deletions": 11,
      "commits": 9,
      "labels": [
        "channel: slack",
        "agents",
        "size: M"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "src/agents/tools/slack-actions.e2e.test.ts",
        "src/agents/tools/slack-actions.ts",
        "src/channels/plugins/slack.actions.ts",
        "src/slack/actions.ts",
        "src/slack/message-actions.ts",
        "src/slack/monitor/events.ts",
        "src/slack/monitor/events/interactions.ts",
        "src/slack/send.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/7396.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/agents/tools/slack-actions.e2e.test.ts"
      ],
      "ageInDays": 13,
      "mergeable": "conflicting",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 7,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 66,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "429 lines changed (418+/11-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 41,
          "weight": 0.12,
          "reason": "Solvely-Colin (NONE, rep: 68)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "13d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 5115 chars"
        },
        {
          "name": "activity",
          "score": 90,
          "weight": 0.04,
          "reason": "7 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: channel: slack, agents, size: M"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 17559,
      "title": "fix: don't rotate auth profile on timeout during active tool use",
      "body": "Fixes #17555\nRelated: #14228, #11715\n\n## Problem\n\nWhen an embedded run times out while the agent is **actively executing tool calls** (e.g., long-running `exec`, sub-agents), the timeout is treated as an API rate limit stall. This triggers `markAuthProfileFailure()` with exponential backoff cooldown (1min → 5min → 25min → 1hr) and auth profile rotation — even though the API responded successfully and the agent was doing legitimate work.\n\nOn single-account setups this causes a crash loop:\n1. Agent spawns long-running exec (>timeoutSeconds)\n2. Run timer fires → `timedOut = true`\n3. `shouldRotate` evaluates true → profile marked failed → rotation attempted → no fallback\n4. Session stuck in `processing` → gateway self-restarts → repeat\n\n## Fix\n\nCheck for tool activity before deciding to rotate:\n\n```typescript\nconst hadToolActivity =\n  timedOut && (attempt.toolMetas.length > 0 || attempt.assistantTexts.length > 0);\nconst shouldRotate =\n  (!aborted && failoverFailure) ||\n  (timedOut && !timedOutDuringCompaction && !hadToolActivity);\n```\n\n**Rationale:** If `toolMetas` or `assistantTexts` are populated, the API responded and the agent was actively working. The timeout is from long tool execution, not an API stall. The existing streaming inactivity watchdog (90s silence) already catches genuine API hangs separately.\n\nThis follows the same pattern as the existing `timedOutDuringCompaction` guard — both exclude cases where the timeout fired during legitimate post-response work.\n\n## Testing\n\n- Verified on self-hosted instance running Google Antigravity / Claude Opus 4.6\n- Workload: agent spawning Claude Code sub-agents via exec (turns regularly 5–15 minutes)\n- Before: 6 gateway restarts in 2 hours from false-positive profile cooldowns\n- After: stable, no false cooldowns, genuine API stalls still caught by inactivity watchdog\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR fixes a false-positive auth profile rotation issue that occurs when embedded runs time out during active tool execution (e.g., long-running `exec` or sub-agent calls). Previously, any timeout without `timedOutDuringCompaction` triggered `markAuthProfileFailure()` with exponential backoff — even when the API had already responded and the agent was legitimately working. On single-account setups, this caused a crash loop.\n\nThe fix introduces a `hadToolActivity` guard that checks whether `toolMetas` or `assistantTexts` are populated before deciding to rotate. This correctly follows the same exclusion pattern as the existing `timedOutDuringCompaction` guard — both identify cases where the timeout fired during legitimate post-response work rather than an API stall.\n\n- `hadToolActivity` is computed as `timedOut && (attempt.toolMetas.length > 0 || attempt.assistantTexts.length > 0)`\n- The `failoverFailure` rotation path is unaffected — explicit API failover errors still trigger rotation regardless of tool activity\n- The streaming inactivity watchdog (90s silence) continues to catch genuine API hangs independently\n- No tests were added for the new `hadToolActivity` path; the existing test suite covers adjacent rotation scenarios but doesn't exercise the specific case of timeout-with-tool-activity\n\n<h3>Confidence Score: 4/5</h3>\n\n- This PR is safe to merge — it adds a narrow, well-reasoned guard that prevents false-positive profile rotation without affecting genuine failure paths.\n- Score of 4 reflects that: (1) the logic change is minimal and follows an established pattern in the codebase (`timedOutDuringCompaction`), (2) the signals used (`toolMetas`, `assistantTexts`) are reliable indicators of API activity based on how they're populated, (3) the failover path is unaffected, and (4) the fix addresses a real crash-loop scenario on single-account setups. Deducted 1 point because no dedicated test was added for the new `hadToolActivity` path.\n- No files require special attention. The single changed file (`src/agents/pi-embedded-runner/run.ts`) has a well-scoped, low-risk modification.\n\n<sub>Last reviewed commit: b7bc401</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "jg-noncelogic",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-15T22:18:57Z",
      "updatedAt": "2026-02-16T14:07:51Z",
      "headRef": "fix/timeout-auth-rotation-v2",
      "baseRef": "main",
      "filesChanged": 1,
      "additions": 17,
      "deletions": 3,
      "commits": 2,
      "labels": [
        "agents",
        "size: XS"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        17555
      ],
      "changedFiles": [
        "src/agents/pi-embedded-runner/run.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17559.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 66,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "20 lines changed (17+/3-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 55,
          "weight": 0.12,
          "reason": "jg-noncelogic (CONTRIBUTOR, rep: 21)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #17555"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 4131 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: agents, size: XS"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18098,
      "title": "Fix Discord auto-thread attempting to thread in Forum/Media channels",
      "body": "## Description\nCreating threads on messages within Forum/Media channels is often redundant or invalid (as messages are already posts). This prevents API errors and spam.\n\n## Fix\nCheck channel type before attempting auto-thread creation.\n\n## AI Transparency\n- **Assisted by**: OpenClaw Agent (Claude 3.5 Sonnet / Opus)\n- **Testing level**: Fully tested with new unit tests\n- **Prompt strategy**: Self-correction loop based on codebase analysis\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nPrevents auto-thread creation in Discord Forum/Media channels where messages are already posts, avoiding API errors.\n\n**Changes:**\n- Added `channelType` parameter to threading functions to enable channel type checking\n- Early-return in `maybeCreateDiscordAutoThread` for GuildForum, GuildMedia, GuildVoice, and GuildStageVoice channels\n- Comprehensive unit tests covering Forum, Media, and Text channel scenarios\n\n**Note:** This PR includes changes from two commits - the auto-threading fix (matching the PR title) and session routing continuity changes from commit ee2cd2b4. The session routing changes (`updateLastRoute` logic in `message-handler.process.ts` and `session-key.continuity.test.ts`) appear to be from a separate fix that was merged into this PR's branch.\n\n<h3>Confidence Score: 5/5</h3>\n\n- This PR is safe to merge with minimal risk\n- The changes are well-targeted and defensive. The auto-threading fix adds proper channel type validation with comprehensive test coverage. The channel type check uses strict equality comparison and falls back gracefully when `channelType` is undefined. Both the threading fix and the session routing changes (from the included commit) are additive safety improvements that prevent API errors without altering existing successful behavior.\n- No files require special attention\n\n<sub>Last reviewed commit: 66a5ee2</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "Clawborn",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T14:02:25Z",
      "updatedAt": "2026-02-16T14:05:14Z",
      "headRef": "fix/discord-forum-auto-thread",
      "baseRef": "main",
      "filesChanged": 4,
      "additions": 144,
      "deletions": 8,
      "commits": 2,
      "labels": [
        "channel: discord",
        "size: S"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "src/discord/monitor/message-handler.process.ts",
        "src/discord/monitor/threading.auto-thread.test.ts",
        "src/discord/monitor/threading.ts",
        "src/routing/session-key.continuity.test.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18098.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/discord/monitor/threading.auto-thread.test.ts",
        "src/routing/session-key.continuity.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 66,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "152 lines changed (144+/8-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 29,
          "weight": 0.12,
          "reason": "Clawborn (NONE, rep: 25)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "2 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1935 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: channel: discord, size: S"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 89897,
      "title": "Refactor factory not available error message generation",
      "body": "## What?\n\nExtracted the `factoryNotAvailableMessage` function to a shared location in the runtime utilities, moving it from being duplicated in browser-specific runtime code to the shared runtime module. Updated error handling in both browser and Node.js runtimes to use this centralized function.\n\n## Why?\n\nThis refactoring reduces code duplication and improves maintainability by:\n- Centralizing the error message generation logic in `runtime-utils.ts`\n- Ensuring consistent error messages across different runtime environments\n- Making it easier to update error messaging in the future without duplicating changes\n\n## How?\n\n1. Added `factoryNotAvailableMessage` function to `turbopack-ecmascript-runtime/js/src/shared/runtime/runtime-utils.ts`\n2. Removed the duplicate function definition from `turbopack-ecmascript-runtime/js/src/browser/runtime/base/runtime-base.ts`\n3. Updated `turbopack-ecmascript-runtime/js/src/nodejs/runtime/runtime-base.ts` to use the shared function\n4. Updated `turbopack-ecmascript-runtime/js/src/shared/runtime/hmr-runtime.ts` to use the shared function with enhanced error messaging for cache-related issues\n5. Updated all generated snapshot test files to reflect these changes\n\nThe function now properly handles all source types (Runtime, Parent, Update) and provides detailed error messages to help developers diagnose module instantiation failures.\n\nhttps://claude.ai/code/session_01Rbwc4y4rBA59jRAof5yrR9",
      "author": "sokra",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-12T09:28:26Z",
      "updatedAt": "2026-02-16T09:16:33Z",
      "headRef": "claude/improve-module-factory-error-T9xvm",
      "baseRef": "canary",
      "filesChanged": 22,
      "additions": 272,
      "deletions": 241,
      "commits": 1,
      "labels": [
        "Turbopack",
        "created-by: Turbopack team"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "turbopack/crates/turbopack-ecmascript-runtime/js/src/browser/runtime/base/runtime-base.ts",
        "turbopack/crates/turbopack-ecmascript-runtime/js/src/nodejs/runtime/build-base.ts",
        "turbopack/crates/turbopack-ecmascript-runtime/js/src/shared/runtime/hmr-runtime.ts",
        "turbopack/crates/turbopack-ecmascript-runtime/js/src/shared/runtime/runtime-utils.ts",
        "turbopack/crates/turbopack-tests/tests/snapshot/debug-ids/browser/output/aaf3a_crates_turbopack-tests_tests_snapshot_debug-ids_browser_input_index_0151fefb.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/debug-ids/browser/output/ba425_crates_turbopack-tests_tests_snapshot_debug-ids_browser_input_index_0151fefb.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/debug-ids/node/output/[turbopack]_runtime.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/debug-ids/node/output/[turbopack]_runtime.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_build_runtime/output/[turbopack]_runtime.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_build_runtime/output/[turbopack]_runtime.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_dev_runtime/output/5c1d0_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_c0f7e0b0.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_dev_runtime/output/780ce_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_c0f7e0b0.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/swc_transforms/preset_env/output/5c1d0_turbopack-tests_tests_snapshot_swc_transforms_preset_env_input_index_5aaf1327.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/swc_transforms/preset_env/output/780ce_turbopack-tests_tests_snapshot_swc_transforms_preset_env_input_index_5aaf1327.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/workers/basic/output/aaf3a_crates_turbopack-tests_tests_snapshot_workers_basic_input_index_96b0ffc6.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/workers/basic/output/aaf3a_crates_turbopack-tests_tests_snapshot_workers_basic_input_worker_01a12aa6.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/workers/basic/output/ba425_crates_turbopack-tests_tests_snapshot_workers_basic_input_index_96b0ffc6.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/workers/basic/output/ba425_crates_turbopack-tests_tests_snapshot_workers_basic_input_worker_01a12aa6.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/workers/shared/output/aaf3a_crates_turbopack-tests_tests_snapshot_workers_shared_input_index_818b7886.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/workers/shared/output/aaf3a_crates_turbopack-tests_tests_snapshot_workers_shared_input_worker_87533493.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/workers/shared/output/ba425_crates_turbopack-tests_tests_snapshot_workers_shared_input_index_818b7886.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/workers/shared/output/ba425_crates_turbopack-tests_tests_snapshot_workers_shared_input_worker_87533493.js"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89897.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 4,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 4,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 65,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "513 lines changed (272+/241-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "sokra (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "4d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1440 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "4 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "241 deletions"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: Turbopack, created-by: Turbopack team"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90038,
      "title": "Update Rspack development test manifest",
      "body": "This auto-generated PR updates the development integration test manifest used when testing Rspack.",
      "author": "vercel-release-bot",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T07:21:45Z",
      "updatedAt": "2026-02-16T07:39:58Z",
      "headRef": "update/rspack-manifest-1771226498776",
      "baseRef": "canary",
      "filesChanged": 1,
      "additions": 132,
      "deletions": 77,
      "commits": 1,
      "labels": [
        "tests",
        "run-react-18-tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "test/rspack-dev-tests-manifest.json"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90038.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/rspack-dev-tests-manifest.json"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 2,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 65,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "209 lines changed (132+/77-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 60,
          "weight": 0.12,
          "reason": "vercel-release-bot (CONTRIBUTOR, rep: 35)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Body: 98 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "2 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: tests, run-react-18-tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90037,
      "title": "Update Rspack production test manifest",
      "body": "This auto-generated PR updates the production integration test manifest used when testing Rspack.",
      "author": "vercel-release-bot",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T07:21:44Z",
      "updatedAt": "2026-02-16T07:39:56Z",
      "headRef": "update/rspack-manifest-1771226497294",
      "baseRef": "canary",
      "filesChanged": 1,
      "additions": 98,
      "deletions": 91,
      "commits": 1,
      "labels": [
        "tests",
        "run-react-18-tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "test/rspack-build-tests-manifest.json"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90037.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/rspack-build-tests-manifest.json"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 2,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 65,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "189 lines changed (98+/91-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 60,
          "weight": 0.12,
          "reason": "vercel-release-bot (CONTRIBUTOR, rep: 35)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Body: 97 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "2 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: tests, run-react-18-tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90025,
      "title": "Improve CSS parse error recovery and reporting",
      "body": "## What?\n\nThis PR improves CSS parsing error handling in Turbopack by:\n\n1. **Extracting CSS parsing logic** into a new `parse_css_stylesheet` function that handles both parsing and CSS module validation in one place\n2. **Fixing error recovery** when CSS minification fails - instead of immediately returning an unparsable result, the code now re-parses the original CSS to recover valid styles\n3. **Improving error reporting** by renaming variables for clarity (`source` → `issue_source`) and ensuring errors are properly emitted before attempting recovery\n4. **Adding comprehensive tests** for CSS parse error scenarios with both snapshot tests and e2e tests\n\n## Why?\n\nPreviously, when CSS minification encountered an error, the entire stylesheet would be marked as unparsable, losing any valid CSS that could have been recovered. This change allows valid CSS rules (like `.before` and `.after` in the test case) to be preserved even when invalid rules (like `.invalid` with missing property value) are present in the file.\n\nThe refactoring also consolidates CSS validation logic into a single function, reducing code duplication and making the error handling flow clearer.\n\n## How?\n\n- Created `parse_css_stylesheet()` function that wraps `StyleSheet::parse()` and applies CSS module validation\n- Modified error handling in `process_content()` to call the new function and recover from minification errors by re-parsing\n- Changed early returns to error emission followed by recovery attempts\n- Added test fixtures and e2e tests to verify CSS parse error recovery works correctly\n- Added snapshot tests showing expected output when CSS contains parse errors\n\n## Test Plan\n\n- Added e2e tests in `css-parse-error-recovery.test.ts` that verify:\n  - Pages with CSS parse errors still render when using `turbopackIgnoreIssue` config\n  - Parse errors are properly reported in CLI output\n- Added snapshot tests showing CSS output with parse errors (valid rules are preserved, invalid ones are skipped)\n- Existing CSS tests continue to pass\n\nhttps://claude.ai/code/session_01Kvto8oa84WZzYoQHfCPHCu",
      "author": "sokra",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-15T12:20:19Z",
      "updatedAt": "2026-02-15T12:20:23Z",
      "headRef": "claude/recoverable-css-parse-errors-kWpBr",
      "baseRef": "canary",
      "filesChanged": 16,
      "additions": 197,
      "deletions": 20,
      "commits": 1,
      "labels": [
        "Turbopack",
        "created-by: Turbopack team",
        "tests"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "test/development/app-dir/css-parse-error-recovery/app/css-error/page.tsx",
        "test/development/app-dir/css-parse-error-recovery/app/css-error/style.css",
        "test/development/app-dir/css-parse-error-recovery/app/layout.tsx",
        "test/development/app-dir/css-parse-error-recovery/app/page.tsx",
        "test/development/app-dir/css-parse-error-recovery/css-parse-error-recovery.test.ts",
        "turbopack/crates/turbopack-css/src/process.rs",
        "turbopack/crates/turbopack-tests/tests/snapshot/css/css-parse-error/input/index.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/css/css-parse-error/input/style.css",
        "turbopack/crates/turbopack-tests/tests/snapshot/css/css-parse-error/issues/Parsing CSS source code failed-f057ce.txt",
        "turbopack/crates/turbopack-tests/tests/snapshot/css/css-parse-error/options.json",
        "turbopack/crates/turbopack-tests/tests/snapshot/css/css-parse-error/output/aaf3a_crates_turbopack-tests_tests_snapshot_css_css-parse-error_input_index_4bae3b44.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/css/css-parse-error/output/aaf3a_crates_turbopack-tests_tests_snapshot_css_css-parse-error_input_index_cbb2f409.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/css/css-parse-error/output/aaf3a_crates_turbopack-tests_tests_snapshot_css_css-parse-error_input_index_cbb2f409.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/css/css-parse-error/output/aaf3a_crates_turbopack-tests_tests_snapshot_css_css-parse-error_input_style_45212c4f.css",
        "turbopack/crates/turbopack-tests/tests/snapshot/css/css-parse-error/output/aaf3a_crates_turbopack-tests_tests_snapshot_css_css-parse-error_input_style_45212c4f.css.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/css/css-parse-error/output/ba425_crates_turbopack-tests_tests_snapshot_css_css-parse-error_input_index_4bae3b44.js"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90025.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/development/app-dir/css-parse-error-recovery/app/css-error/page.tsx",
        "test/development/app-dir/css-parse-error-recovery/app/css-error/style.css",
        "test/development/app-dir/css-parse-error-recovery/app/layout.tsx",
        "test/development/app-dir/css-parse-error-recovery/app/page.tsx",
        "test/development/app-dir/css-parse-error-recovery/css-parse-error-recovery.test.ts"
      ],
      "ageInDays": 1,
      "mergeable": "conflicting",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 65,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "217 lines changed (197+/20-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "sokra (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "5 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 2089 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: Turbopack, created-by: Turbopack team, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90019,
      "title": "Update Rspack development test manifest",
      "body": "This auto-generated PR updates the development integration test manifest used when testing Rspack.",
      "author": "vercel-release-bot",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-15T07:13:49Z",
      "updatedAt": "2026-02-15T07:34:09Z",
      "headRef": "update/rspack-manifest-1771139623203",
      "baseRef": "canary",
      "filesChanged": 1,
      "additions": 134,
      "deletions": 80,
      "commits": 1,
      "labels": [
        "tests",
        "run-react-18-tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "test/rspack-dev-tests-manifest.json"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90019.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/rspack-dev-tests-manifest.json"
      ],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 2,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 65,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "214 lines changed (134+/80-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 60,
          "weight": 0.12,
          "reason": "vercel-release-bot (CONTRIBUTOR, rep: 35)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Body: 98 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "2 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: tests, run-react-18-tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90020,
      "title": "Update Rspack production test manifest",
      "body": "This auto-generated PR updates the production integration test manifest used when testing Rspack.",
      "author": "vercel-release-bot",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-15T07:13:57Z",
      "updatedAt": "2026-02-15T07:33:45Z",
      "headRef": "update/rspack-manifest-1771139630361",
      "baseRef": "canary",
      "filesChanged": 1,
      "additions": 96,
      "deletions": 88,
      "commits": 1,
      "labels": [
        "tests",
        "run-react-18-tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "test/rspack-build-tests-manifest.json"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90020.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/rspack-build-tests-manifest.json"
      ],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 2,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 65,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "184 lines changed (96+/88-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 60,
          "weight": 0.12,
          "reason": "vercel-release-bot (CONTRIBUTOR, rep: 35)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Body: 97 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "2 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: tests, run-react-18-tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 89426,
      "title": "In-Depth Explanation of React Version Handling Doc",
      "body": "There have been multiple discussions and some confusion around [React version handling](https://nextjs.org/docs#react-version-handling) in Next.js. This PR adds an in-depth explanation to clarify how React and react-dom versions are managed internally, and why they still need to be declared in package.json.\r\n\r\nThe goal is to help developers better understand this behavior and reduce recurring questions around it.\r\n\r\nReference discussion:\r\nhttps://github.com/vercel/next.js/discussions/87958\r\n\r\n@icyJoseph",
      "author": "abhishekmardiya",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-03T09:04:46Z",
      "updatedAt": "2026-02-15T05:59:30Z",
      "headRef": "canary",
      "baseRef": "canary",
      "filesChanged": 1,
      "additions": 4,
      "deletions": 1,
      "commits": 10,
      "labels": [
        "Documentation"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "docs/01-app/01-getting-started/01-installation.mdx"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89426.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 13,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 6,
      "commentCount": 4,
      "isDraft": false,
      "requestedReviewers": [
        "icyJoseph"
      ],
      "codeowners": [],
      "totalScore": 65,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "5 lines changed (4+/1-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 75,
          "weight": 0.12,
          "reason": "abhishekmardiya (CONTRIBUTOR, rep: 86)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 60,
          "weight": 0.12,
          "reason": "Docs/config PR — tests not expected"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "13d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (6 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 508 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "4 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: Documentation"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 80,
          "weight": 0.05,
          "reason": "1 reviewer(s): icyJoseph"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 18138,
      "title": "feat(usage): add default model costs for session_status",
      "body": "## Description\nPreviously, `session_status` showed $0.00 for all models unless manually configured in openclaw.json.\n\n## Fix\nAdded built-in cost map for popular models (GPT-4o, Claude 3.5 Sonnet, Gemini 1.5 Pro, etc.). Logic prioritizes user config, then falls back to built-in map.\n\n## AI Transparency\n- **Assisted by**: OpenClaw Agent (Claude 3.5 Sonnet / Opus)\n- **Testing level**: Fully tested with new unit tests\n- **Prompt strategy**: Self-correction loop based on codebase analysis",
      "author": "Clawborn",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T15:00:06Z",
      "updatedAt": "2026-02-16T15:00:23Z",
      "headRef": "feat/session-status-default-costs",
      "baseRef": "main",
      "filesChanged": 8,
      "additions": 377,
      "deletions": 20,
      "commits": 4,
      "labels": [
        "channel: discord",
        "size: M"
      ],
      "ciStatus": "pending",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "src/discord/monitor/message-handler.process.ts",
        "src/discord/monitor/threading.auto-thread.test.ts",
        "src/discord/monitor/threading.ts",
        "src/process/kill-tree.ts",
        "src/process/kill-tree.unix.test.ts",
        "src/routing/session-key.continuity.test.ts",
        "src/utils/usage-format.cost-defaults.test.ts",
        "src/utils/usage-format.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18138.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/discord/monitor/threading.auto-thread.test.ts",
        "src/process/kill-tree.unix.test.ts",
        "src/routing/session-key.continuity.test.ts",
        "src/utils/usage-format.cost-defaults.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 65,
      "signals": [
        {
          "name": "ci_status",
          "score": 50,
          "weight": 0.15,
          "reason": "CI: pending"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "397 lines changed (377+/20-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 29,
          "weight": 0.12,
          "reason": "Clawborn (NONE, rep: 25)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "4 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 70,
          "weight": 0.04,
          "reason": "Body: 488 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: channel: discord, size: M"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 88607,
      "title": "Turbopack: experimental.immutableAssetToken",
      "body": "Closes PACK-6534\r\n\r\nThis allows specifying a different deployment id for static immutable assets\r\n\r\n- [x] However, it's currently also used for some mutable manifests",
      "author": "mischnic",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-01-15T20:39:39Z",
      "updatedAt": "2026-02-16T12:45:28Z",
      "headRef": "mischnic/static-deployment-id",
      "baseRef": "mischnic/adapter-immutable",
      "filesChanged": 30,
      "additions": 178,
      "deletions": 84,
      "commits": 4,
      "labels": [
        "type: next",
        "Turbopack",
        "created-by: Turbopack team",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "crates/next-core/src/next_config.rs",
        "packages/next/src/build/define-env.ts",
        "packages/next/src/build/index.ts",
        "packages/next/src/build/templates/app-page.ts",
        "packages/next/src/build/templates/edge-ssr-app.ts",
        "packages/next/src/build/templates/edge-ssr.ts",
        "packages/next/src/build/webpack/plugins/flight-manifest-plugin.ts",
        "packages/next/src/client/app-webpack.ts",
        "packages/next/src/client/components/app-router.tsx",
        "packages/next/src/client/route-loader.ts",
        "packages/next/src/client/webpack.ts",
        "packages/next/src/export/index.ts",
        "packages/next/src/export/types.ts",
        "packages/next/src/export/worker.ts",
        "packages/next/src/pages/_document.tsx",
        "packages/next/src/server/app-render/app-render.tsx",
        "packages/next/src/server/app-render/get-asset-query-string.ts",
        "packages/next/src/server/config-schema.ts",
        "packages/next/src/server/config-shared.ts",
        "packages/next/src/server/next-server.ts",
        "packages/next/src/server/render.tsx",
        "packages/next/src/server/route-modules/pages/pages-handler.ts",
        "packages/next/src/server/route-modules/route-module.ts",
        "packages/next/src/shared/lib/deployment-id.ts",
        "packages/next/src/shared/lib/get-img-props.ts",
        "packages/next/src/shared/lib/image-loader.ts",
        "packages/next/src/shared/lib/lazy-dynamic/preload-chunks.tsx",
        "test/production/deployment-id-handling/app/next.config.js",
        "test/production/deployment-id-handling/deployment-id-handling.test.ts",
        "test/unit/next-image-get-img-props.test.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/88607.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/production/deployment-id-handling/app/next.config.js",
        "test/production/deployment-id-handling/deployment-id-handling.test.ts",
        "test/unit/next-image-get-img-props.test.ts"
      ],
      "ageInDays": 31,
      "mergeable": "mergeable",
      "reviewState": "approved",
      "reviewCount": 3,
      "commentCount": 6,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 64,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "262 lines changed (178+/84-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "mischnic (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "3 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 40,
          "weight": 0.07,
          "reason": "31d old (Stale)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 100,
          "weight": 0.08,
          "reason": "Review: approved (3 reviews)"
        },
        {
          "name": "body_quality",
          "score": 60,
          "weight": 0.04,
          "reason": "Body: 166 chars"
        },
        {
          "name": "activity",
          "score": 90,
          "weight": 0.04,
          "reason": "6 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, Turbopack, created-by: Turbopack team, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 89963,
      "title": "feat(next/image): add lru disk cache",
      "body": "Work in progress",
      "author": "styfle",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-13T17:16:34Z",
      "updatedAt": "2026-02-16T02:59:49Z",
      "headRef": "styfle/image-cache-lru",
      "baseRef": "canary",
      "filesChanged": 6,
      "additions": 312,
      "deletions": 30,
      "commits": 2,
      "labels": [
        "type: next",
        "created-by: Next.js team",
        "tests"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "packages/next/errors.json",
        "packages/next/src/server/config-schema.ts",
        "packages/next/src/server/config-shared.ts",
        "packages/next/src/server/image-optimizer.ts",
        "packages/next/src/server/lib/disk-lru-cache.external.ts",
        "test/unit/image-optimizer/lru-disk-eviction.test.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89963.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/unit/image-optimizer/lru-disk-eviction.test.ts"
      ],
      "ageInDays": 2,
      "mergeable": "conflicting",
      "reviewState": "commented",
      "reviewCount": 3,
      "commentCount": 0,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 64,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "342 lines changed (312+/30-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "styfle (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref, No/short description, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "2d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (3 reviews)"
        },
        {
          "name": "body_quality",
          "score": 20,
          "weight": 0.04,
          "reason": "Body: 16 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, created-by: Next.js team, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 17791,
      "title": "fix: preserve workflow rules in compaction summary (#17727)",
      "body": "## Problem\n\nAgents forget workflow rules (GATE checks, review requirements) after automatic compaction due to task-focused summaries lacking behavioral constraints.\n\n## Solution\n\nPass `customInstructions` to compaction call, instructing summary generator to include \"Workflow Rules\" section preserving behavioral protocols.\n\n## Changes\n\n- `src/agent/run.ts`: Added `customInstructions` parameter to overflow compaction call\n\nFixes #17727\n",
      "author": "irchelper",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T05:49:19Z",
      "updatedAt": "2026-02-16T14:22:18Z",
      "headRef": "fix/17727-compaction-workflow-rules",
      "baseRef": "main",
      "filesChanged": 1,
      "additions": 2,
      "deletions": 0,
      "commits": 2,
      "labels": [
        "agents",
        "size: XS"
      ],
      "ciStatus": "success",
      "hasIssueRef": true,
      "issueNumbers": [
        17727
      ],
      "changedFiles": [
        "src/agents/pi-embedded-runner/run.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17791.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 64,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 20,
          "weight": 0.07,
          "reason": "2 lines changed (2+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 41,
          "weight": 0.12,
          "reason": "irchelper (NONE, rep: 66)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #17727"
        },
        {
          "name": "spam",
          "score": 60,
          "weight": 0.12,
          "reason": "<3 lines"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 70,
          "weight": 0.04,
          "reason": "Body: 438 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: agents, size: XS"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18122,
      "title": "Fix Telegram poll action wiring",
      "body": "Technical Roadmap for OpenClaw: Cron System Optimization and User-Driven Feature Evolution\r\nAs OpenClaw transitions from a viral repository to stable infrastructure, the development focus has shifted toward hardening core subsystems and fulfilling power-user demands for enterprise-grade security and sophisticated automation. This report details the current \"state of the union\" for the Cron automation engine and provides a blueprint of the most requested features identified from community feedback and technical issue tracking.\r\n\r\nThe \"Cron One\" Report: Current Stability and Required Fixes\r\nThe OpenClaw Cron engine is the backbone of its \"proactive\" intelligence, allowing agents to execute tasks without user prompts. However, the system has recently faced significant regressions.\r\n\r\n1. Critical Stability Patches\r\nUsers on the stable/beta branch (v2026.2.3-1) have reported a complete breakdown in scheduling logic, characterized by jobs failing to trigger and a \"48-hour gap\" in execution history.\r\n\r\nThe recomputeNextRuns Bug: A flaw in the scheduling calculation prevents the system from correctly determining the next execution window after a gateway restart.\r\n\r\nWindows Resource Locking (EBUSY): On Windows deployments, the gateway often crashes during atomic renames of the cron/jobs.json file because the resource is flagged as busy.   \r\n\r\nTimer Spin Loops: A critical performance bug exists where timers re-arm every 18ms when delayMs is set to 0, leading to massive log bloat and CPU spikes.   \r\n\r\n2. High-Impact Cron Enhancements\r\nBeyond bug fixes, users are demanding more granular control over how automated tasks behave:\r\n\r\nMulti-Schedule Support: Current jobs support only simple intervals. Users are requesting the ability to define complex schedules (e.g., \"Run at 9 AM on weekdays and 11 AM on weekends\") within a single job definition.   \r\n\r\nConfigurable Per-Job Timeouts: Automated tasks currently have a hardcoded 120-second timeout. Complex research or coding tasks often exceed this limit, causing the job to fail prematurely.   \r\n\r\nIsolated Announce Reliability: A regression in version 2026.2.13 has broken \"announce\" delivery for isolated jobs, where the agent completes the work but fails to send the output to the specified messaging channel.   \r\n\r\nThe User Demand Blueprint: Top Requested Features\r\nThe community has prioritized several \"game-changing\" features that would elevate OpenClaw from a personal tool to a professional-grade assistant.\r\n\r\n1. Security & Credentials Management\r\nAs agents are granted higher system permissions, the \"plaintext\" nature of configuration files has become a primary concern.\r\n\r\nSecrets Manager Integration: There is a heavy demand for native 1Password or Vault integration. This would allow the gateway to fetch API keys at runtime rather than storing them in .env or openclaw.json files.\r\n\r\nMembrane-Based Security: Using the Calyx Protocol, users want to establish strict \"membranes\" around agent actions. This would enforce trust verification at the boundary of every tool call, preventing \"excessive agency\" or unauthorized shell execution.\r\n\r\n2. Intelligence & Model Orchestration\r\nThe high cost of frontier models like Claude 4.5 (Opus) has led to requests for more efficient model management.\r\n\r\nSmart Model Routing (Opus-as-Orchestrator): A highly-voted proposal where a high-end model acts as the \"brain\" to plan tasks, but delegates the actual execution of simple sub-tasks to cheaper models like GPT-4o-mini or Haiku.\r\n\r\nFact-Checking Middleware: To combat hallucinations in persistent memory, users have proposed a hybrid indexing system that uses a middleware layer to verify \"memories\" against a grounded knowledge base before the agent acts on them.\r\n\r\n3. Core Utility & UX\r\nCustom Bootstrap Files (agents.defaults.bootstrapFiles): This feature would allow users to inject specific environment variables or initialization scripts into every agent session automatically, facilitating complex dev environments.   \r\n\r\nControl UI Audio Input: A requested \"microphone record\" button in the browser-based dashboard would bring the voice-first experience of the mobile nodes to the desktop web interface.   \r\n\r\nInternationalization (i18n): With a massive surge in global adoption, specifically in the Chinese market, there is an urgent need for localized UIs and prompts.\r\n\r\nStrategic Recommendation: \"Stabilisation Mode\"\r\nTo manage the influx of over 3,000 open issues and a PR arriving \"roughly every two minutes,\" maintainers are moving toward a Stabilisation Mode.\r\n\r\nCore Lockdown: The core gateway will be locked to ensure it remains \"rock solid.\"\r\n\r\nSkill-First Development: New features (like the proposed LinkedIn Scraper or specialized CRM tools) should be developed as external Skills rather than core PRs.\r\n\r\nDiagnostic Context: Enhancing error messages with \"diagnostic tags\" (identifying exactly which service or resource failed) is considered a \"good first issue\" that would immediately help the community troubleshoot their own deployments.   \r\n\r\nConclusion\r\nThe path forward for OpenClaw requires a dual approach: first, resolving the \"Cron One\" stability crisis to ensure reliability for professional users; and second, implementing high-impact security features like Vault integration and Membrane protocols. By shifting feature development to the modular Skills ecosystem, the project can continue to innovate rapidly without compromising the stability of the core gateway.\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nAdds Telegram poll action support by extending the message tool schema and wiring poll creation through the telegram actions adapter.\n\n**Key changes:**\n- Added `pollDurationSeconds`, `pollAnonymous`, and `pollPublic` to poll schema\n- Implemented poll action handler in telegram adapter that normalizes parameters and calls `sendPollTelegram`\n- Added e2e tests for poll sending\n\n**Issues:**\n- `pollAnonymous`/`pollPublic` schema params are not wired in the telegram adapter (reads wrong param name)\n- Multi-select logic hardcodes max selections to 2 instead of allowing all options to be selected\n\n<h3>Confidence Score: 2/5</h3>\n\n- Poll feature has logic bugs that will cause incorrect behavior\n- Two critical logic errors: (1) schema parameters pollAnonymous/pollPublic won't work because wrong param name is read, (2) multi-select polls artificially limited to 2 selections\n- Pay close attention to `src/channels/plugins/actions/telegram.ts` and `src/agents/tools/telegram-actions.ts` for the parameter wiring issues\n\n<sub>Last reviewed commit: 433bfe3</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(4/5) You can add custom instructions or style guidelines for the agent [here](https://app.greptile.com/review/github)!</sub>\n\n<!-- /greptile_comment -->",
      "author": "akyourowngames",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T14:30:48Z",
      "updatedAt": "2026-02-16T14:58:42Z",
      "headRef": "feat/cron-multi-schedule",
      "baseRef": "main",
      "filesChanged": 7,
      "additions": 200,
      "deletions": 2,
      "commits": 2,
      "labels": [
        "channel: telegram",
        "agents",
        "size: M"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "src/agents/tools/message-tool.ts",
        "src/agents/tools/telegram-actions.e2e.test.ts",
        "src/agents/tools/telegram-actions.ts",
        "src/channels/plugins/actions/actions.test.ts",
        "src/channels/plugins/actions/telegram.ts",
        "src/telegram/send.test.ts",
        "src/telegram/send.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18122.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/agents/tools/telegram-actions.e2e.test.ts",
        "src/channels/plugins/actions/actions.test.ts",
        "src/telegram/send.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 63,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "202 lines changed (200+/2-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 45,
          "weight": 0.12,
          "reason": "akyourowngames (NONE, rep: 81)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "3 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 6792 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: channel: telegram, agents, size: M"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18022,
      "title": "feat(tools): Structured Config Editor for JSON/YAML/TOML",
      "body": "## Summary\nAdds a `config_edit` agent tool that provides structured, parse-aware editing of configuration files. Instead of string replacement or temporary scripts, it parses the file into a data structure, performs the mutation, then serializes back — guaranteeing syntactically correct output every time.\n\n## The Problem\nWhen agents edit config files (JSON, YAML, TOML) using string manipulation (`sed`, `jq`, Python one-liners), it's error-prone:\n- Missing commas, unclosed brackets, broken indentation\n- Encoding issues with special characters\n- No awareness of the document structure\n- One bad edit can crash the system (as happened with `openclaw.json`)\n\n## Solution\nA dedicated tool that understands config file structure:\n\n### Actions\n| Action | Description |\n|--------|-------------|\n| `get` | Read a value at a dot-path |\n| `set` | Write a value at a dot-path (auto-creates intermediates) |\n| `delete` | Remove a key at a dot-path |\n| `merge` | Deep-merge an object at a dot-path (`null` = delete key) |\n\n### Features\n- **Format auto-detection** by file extension (`.json`, `.yaml`/`.yml`, `.toml`)\n- **Dot-path navigation**: `agents.defaults.model.primary`, `items.0.name`\n- **Array index support**: numeric path segments index into arrays\n- **Auto-creation**: `set` on a non-existent path creates intermediate objects/arrays\n- **New file creation**: `set`/`merge` on a missing file starts from `{}`\n- **Lazy-loaded deps**: YAML (`yaml`) and TOML (`smol-toml`) are imported only when needed\n\n### Example Usage\n```\n// Read a nested value\nconfig_edit({ action: \"get\", file: \"config.json\", path: \"agents.defaults.model\" })\n\n// Set a value (creates intermediates if needed)\nconfig_edit({ action: \"set\", file: \"config.yaml\", path: \"server.port\", value: \"8080\" })\n\n// Deep-merge (null deletes keys)\nconfig_edit({ action: \"merge\", file: \"config.json\", path: \"agents\", value: \"{\\\"timeout\\\": 30}\" })\n\n// Delete a key\nconfig_edit({ action: \"delete\", file: \"settings.toml\", path: \"deprecated.oldKey\" })\n```\n\n## Design Decisions\n- **Parse → Mutate → Serialize** instead of regex/string ops: eliminates syntax errors by construction\n- **Dot-path** over JSONPath/JSONPointer: simpler, covers 95% of use cases, familiar to developers\n- **Lazy imports** for YAML/TOML: no new hard dependencies, graceful error if package missing\n- **structuredClone** for immutable operations: original data never mutated in-place\n\n## Files Changed\n- `src/agents/tools/config-edit-tool.ts` (new file, 280 lines)\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nAdds a new `config_edit` agent tool that provides structured, parse-aware editing of JSON/YAML/TOML configuration files using a parse-mutate-serialize pattern. The core idea is solid — eliminating syntax errors from string-based config manipulation — but the implementation has several issues that should be addressed before merging:\n\n- **Prototype pollution (critical):** Path segments like `__proto__` are not rejected in `parsePath`, and `deepMerge` doesn't filter dangerous keys. Confirmed exploitable: `setByPath({}, [\"__proto__\", \"isAdmin\"], true)` pollutes `Object.prototype` for the entire process. Since this tool is invoked by an LLM agent with untrusted input, this is a real attack surface.\n- **`deleteByPath` crashes on null input:** `structuredClone(null)` returns `null`, and the subsequent property access throws a `TypeError`. This can happen with empty YAML files (`yaml.parse(\"\")` returns `null`).\n- **`setByPath` intermediate array traversal is inconsistent with `getByPath`:** `getByPath` correctly handles `Array.isArray` checks during traversal, but `setByPath` always uses string-key access, which works by accident in JS but produces incorrect behavior for auto-created intermediates.\n- **Tool not registered:** `createConfigEditTool` is not imported or used in `openclaw-tools.ts`, so the tool is currently unreachable by agents.\n- **No tests included:** Given the complexity of path navigation, merge semantics, and file I/O, unit tests would significantly reduce risk.\n\n<h3>Confidence Score: 1/5</h3>\n\n- This PR has a confirmed prototype pollution vulnerability and a crash bug that should be fixed before merging.\n- Score of 1 reflects two confirmed critical issues: (1) prototype pollution exploitable via dot-path segments and deepMerge patch keys — verified at runtime with bun, and (2) deleteByPath crashes on null input which can occur with empty YAML files. Additionally, setByPath has an asymmetric traversal bug with arrays, the tool is not wired into the tool registry, and no tests are included.\n- Pay close attention to `src/agents/tools/config-edit-tool.ts` — the only changed file — specifically `parsePath` (line 68), `setByPath` (line 93), `deleteByPath` (line 119), and `deepMerge` (line 143) functions.\n\n<sub>Last reviewed commit: a9d4ee2</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(3/5) Reply to the agent's comments like \"Can you suggest a fix for this @greptileai?\" or ask follow-up questions!</sub>\n\n<!-- /greptile_comment -->",
      "author": "stakeswky",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-16T11:54:45Z",
      "updatedAt": "2026-02-16T14:49:31Z",
      "headRef": "feat/config-edit-tool",
      "baseRef": "main",
      "filesChanged": 1,
      "additions": 280,
      "deletions": 0,
      "commits": 1,
      "labels": [
        "agents",
        "size: M"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "src/agents/tools/config-edit-tool.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18022.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 63,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "280 lines changed (280+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "stakeswky (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 5032 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: agents, size: M"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 17333,
      "title": "feat: GitHub Copilot SDK provider, CLI backend, thinking signature fix, and timeout resilience",
      "body": "## Summary\n\n- **Problem:** OpenClaw lacks SDK-based auth/model discovery for GitHub Copilot, has no CLI backend for terminal usage, and multi-turn conversations crash with HTTP 400 when Claude models replay thinking blocks with field-name-as-signature through the `openai-completions` API. Additionally, LLM timeouts incorrectly trigger auth-profile cooldown with exponential backoff — a single slow response can lock out the provider for minutes.\n- **Why it matters:** Users leveraging GitHub Copilot as a model provider (Claude Opus 4.6, GPT-5.3, etc.) get proper token management, automatic model discovery, CLI-mode support, reliable multi-turn conversations, and smooth timeout recovery.\n- **What changed:**\n  1. Full Copilot SDK provider with auth and model discovery\n  2. Copilot CLI backend for terminal usage\n  3. Sanitizer that strips thinking blocks with fake signatures before they poison future turns\n  4. Default Claude models to `anthropic-message## Summary\n\n- **Problem:** OpenClaw lacks SDK-based auth/mki\n- **Probt f- **Why it matters:** Users leveraging GitHub Copilot as a model provider (Claude Opus 4.6, GPT-5.3, etc.) get proper token management, automatic model discovery, CLI-mode support, reliable multi-turn conversations, and smooth timeout recovery.\n- **What changed:**\n  1. Full Copilot SDK provider with auth and model discovery\n  2. Copilot CLI backend for terminal usage\n  3. Sanitizer that strips thinking blocks with fake signatures be R- **What changed:**\n  1. Full Copilot SDK provider with auth and model discovery\n  2. Copilot CLI backend for terminal usage\n  3. Sanitizer that strips thinking blocks with fake signatures before they poison future turns\n  4. Default Claude mopi  1. Full Copilot pr  2. Copilot CLI backend for terminal usage\n  3. Sanitizer ok  3. Sanitizer that strips thinking blocksok  4. Default Claude models to `anthropic-message## Summary\n\n- **Problem:** OpenClaw lacks SDK-er\n- **Problem:** OpenClaw lacks SDK-based auth/mki\n- **Prors - **Probt f- **Why it matters:** Users leveragi A- **What changed:**\n  1. Full Copilot SDK provider with auth and model discovery\n  2. Copilot CLI backend for terminal usage\n  3. Sanitizer that strips thinking blocks with fake signatures be R- **What changed:**\n  1. Full Copilot SDK provider with auth re  1. Full Copilot  a  2. Copilot CLI backend for terminal usage\n  3. Sanitizer Si  3. Sanitizer that strips thinking blocks-h  1. Full Copilot SDK provider with auth and model discovery\n  2. Copilot CLI backend me  2. Copilot CLI backend for terminal usage\n  3. Sanitizer pl  3. Sanitizer that strips thinking blocks s  4. Default Claude mopi  1. Full Copilot pr  2. Copilot CLI backend for terminal usage\n  3. Sea  3. Sanitizer ok  3. Sanitizer that strips thinking blocksok  4. Default Claude model/a\n- **Problem:** OpenClaw lacks SDK-er\n- **Problem:** OpenClaw lacks SDK-based auth/mki\n- **Prors - **Probt f- **Why ite p- **Problem:** OpenClaw backoff (60s - **Prors - **Probt f- **Why it matters:** Userst  1. Full Copilot SDK provider with auth and model discovery\n  2. Copilot CLIri  2. Copilot CLI backend for terminal usage\n  3. Sanitizer nt  3. Sanitizer that strips thinking blocksmo  1. Full Copilot SDK provider with auth re  1. Full Copilot  a  2. Copilot CLI backenPI  3. Sanitizer Si  3. Sanitizer that strips thinking blocks-h  1. Full Copilot SDK provider witvider `githu  2. Copilot CLI backend me  2. Copilot CLI backend for terminal usage\n  3. Sanitizer pl  3. Sanitizer that strips thinkt`  3. Sanitizer pl  3. Sanitizer that strips thinking blocks s  4. Defwi  3. Sea  3. Sanitizer ok  3. Sanitizer that strips thinking blocksok  4. Default Claude model/a\n- **Problem:** OpenClaw lacks SDK-er\n- **Problem:*ut- **Problem:** OpenClaw lacks SDK-er\n- **Problem:** OpenClaw lacks SDK-based auth/mki\n- **Prors##- **Problem:** OpenClaw lacks SDK-bpe- **Prors - **Probt f- **Why ite p- **Problem:*h   2. Copilot CLIri  2. Copilot CLI backend for terminal usage\n  3. Sanitizer nt  3. Sanitizer that strips thinking blocksmo  1. Full Copilot SDK provider with auth re  1. Full Copan  3. Sanitizer nt  3. Sanitizer that strips thinking blocksmNo  3. Sanitizer pl  3. Sanitizer that strips thinkt`  3. Sanitizer pl  3. Sanitizer that strips thinking blocks s  4. Defwi  3. Sea  3. Sanitizer ok  3. Sanitizer that strips thinking blocksok  4. Default Claude model/a\n- **Problem:** OpenClaw lacks SDK-er\n- **Problem:*ut- **Problem:** OpenClaw lacks SDK-er\n- **Problem:** Opn - **Problem:** OpenClaw lacks SDK-er\n- **Problem:*ut- **Problem:** OpenClaw lacks SDK-er\n- **Problem:** OpenClaw lacks SDK-based auth/mki\n- **Prors##- **Problem:** OpenClaw lacks SDK-bpe- **Prors - **Probt f- **Why ites- **Probed, non-Copilot providers una- **Problem:** OpenClaw lacks SDK-based auth/mki\n--p- **Prors##- **Problem:** OpenClaw lacks SDK-bpws  3. Sanitizer nt  3. Sanitizer that strips thinking blocksmo  1. Full Copilot SDK provider with auth re  1. Full Copan  3. Sanitizer nt  3. Sanitizer that s M- **Problem:** OpenClaw lacks SDK-er\n- **Problem:*ut- **Problem:** OpenClaw lacks SDK-er\n- **Problem:** Opn - **Problem:** OpenClaw lacks SDK-er\n- **Problem:*ut- **Problem:** OpenClaw lacks SDK-er\n- **Problem:** OpenClaw lacks SDK-based auth/mki\n- **Prors##- **Problem:** OpenClaw lacks SDK-bpe- **Prors - **Probt f- **Why ites- **Probed, non-Copilot providers una- **Problem:** OpenClaw lacks SDK-io- **Problem:*ut- **Problem:** OpenC, - **Probleographic signatures preserved\n",
      "author": "tag-assistant",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-15T17:16:53Z",
      "updatedAt": "2026-02-16T14:42:40Z",
      "headRef": "copilot",
      "baseRef": "main",
      "filesChanged": 26,
      "additions": 2137,
      "deletions": 30,
      "commits": 22,
      "labels": [
        "agents",
        "size: XL"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "package.json",
        "pnpm-lock.yaml",
        "src/agents/auth-profiles/constants.ts",
        "src/agents/auth-profiles/usage.ts",
        "src/agents/cli-backends.ts",
        "src/agents/cli-runner.ts",
        "src/agents/copilot-runner.test.ts",
        "src/agents/copilot-runner.ts",
        "src/agents/copilot-sdk.test.ts",
        "src/agents/copilot-sdk.ts",
        "src/agents/model-selection.ts",
        "src/agents/models-config.providers.ts",
        "src/agents/pi-embedded-helpers.strip-completions-reasoning.test.ts",
        "src/agents/pi-embedded-helpers.ts",
        "src/agents/pi-embedded-helpers/openai.ts",
        "src/agents/pi-embedded-runner/compact.ts",
        "src/agents/pi-embedded-runner/google.ts",
        "src/agents/pi-embedded-runner/run.ts",
        "src/agents/transcript-policy.test.ts",
        "src/agents/transcript-policy.ts",
        "src/providers/github-copilot-auth.ts",
        "src/providers/github-copilot-models.test.ts",
        "src/providers/github-copilot-models.ts",
        "src/providers/github-copilot-sdk.test.ts",
        "src/providers/github-copilot-sdk.ts",
        "src/providers/github-copilot-token.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17333.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/agents/copilot-runner.test.ts",
        "src/agents/copilot-sdk.test.ts",
        "src/agents/pi-embedded-helpers.strip-completions-reasoning.test.ts",
        "src/agents/transcript-policy.test.ts",
        "src/providers/github-copilot-models.test.ts",
        "src/providers/github-copilot-sdk.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 8,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 63,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 30,
          "weight": 0.07,
          "reason": "2167 lines changed (2137+/30-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 60,
          "weight": 0.12,
          "reason": "tag-assistant (CONTRIBUTOR, rep: 38)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "6 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (8 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 5479 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "Risky files: package.json"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: agents, size: XL"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18113,
      "title": "Revise Android installation link in README",
      "body": "Updated Android installation instructions in README.\r\n\r\n## Summary\r\n\r\nDescribe the problem and fix in 2–5 bullets:\r\n\r\n- Problem:\r\n- Why it matters:\r\n- What changed:\r\n- What did NOT change (scope boundary):\r\n\r\n## Change Type (select all)\r\n\r\n- [ ] Bug fix\r\n- [x] Feature\r\n- [ ] Refactor\r\n- [ ] Docs\r\n- [ ] Security hardening\r\n- [ ] Chore/infra\r\n\r\n## Scope (select all touched areas)\r\n\r\n- [ ] Gateway / orchestration\r\n- [ ] Skills / tool execution\r\n- [ ] Auth / tokens\r\n- [ ] Memory / storage\r\n- [x] Integrations\r\n- [ ] API / contracts\r\n- [ ] UI / DX\r\n- [ ] CI/CD / infra\r\n\r\n## Linked Issue/PR\r\n\r\n- Closes #\r\n- Related #\r\n\r\n## User-visible / Behavior Changes\r\n\r\nList user-visible changes (including defaults/config).  \r\nIf none, write `None`.\r\n\r\n## Security Impact (required)\r\n\r\n- New permissions/capabilities? (`Yes/No`)\r\n- Secrets/tokens handling changed? (`Yes/No`)\r\n- New/changed network calls? (`Yes/No`)\r\n- Command/tool execution surface changed? (`Yes/No`)\r\n- Data access scope changed? (`Yes/No`)\r\n- If any `Yes`, explain risk + mitigation:\r\n\r\n## Repro + Verification\r\n\r\n### Environment\r\n\r\n- OS:\r\n- Runtime/container:\r\n- Model/provider:\r\n- Integration/channel (if any):\r\n- Relevant config (redacted):\r\n\r\n### Steps\r\n\r\n1.\r\n2.\r\n3.\r\n\r\n### Expected\r\n\r\n-\r\n\r\n### Actual\r\n\r\n-\r\n\r\n## Evidence\r\n\r\nAttach at least one:\r\n\r\n- [ ] Failing test/log before + passing after\r\n- [ ] Trace/log snippets\r\n- [ ] Screenshot/recording\r\n- [ ] Perf numbers (if relevant)\r\n\r\n## Human Verification (required)\r\n\r\nWhat you personally verified (not just CI), and how:\r\n\r\n- Verified scenarios:\r\n- Edge cases checked:\r\n- What you did **not** verify:\r\n\r\n## Compatibility / Migration\r\n\r\n- Backward compatible? (`Yes/No`)\r\n- Config/env changes? (`Yes/No`)\r\n- Migration needed? (`Yes/No`)\r\n- If yes, exact upgrade steps:\r\n\r\n## Failure Recovery (if this breaks)\r\n\r\n- How to disable/revert this change quickly:\r\n- Files/config to restore:\r\n- Known bad symptoms reviewers should watch for:\r\n\r\n## Risks and Mitigations\r\n\r\nList only real risks for this PR. Add/remove entries as needed. If none, write `None`.\r\n\r\n- Risk:\r\n  - Mitigation:\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR adds an installation link for the OpenClaw Android app to the Android node section of the README. The change is small (documentation-only), but it introduces a **duplicate `## Agent workspace + skills` heading** on lines 308–309 that must be removed before merging.\n\n- Adds `- Install: [OpenClaw for Android](https://github.com/irtiq7/OpenClaw-Android).` to the Android node section\n- **Bug**: Duplicates the `## Agent workspace + skills` section heading (was one heading before this PR, now appears twice)\n\n<h3>Confidence Score: 3/5</h3>\n\n- Documentation-only change with low risk, but contains a duplicate heading that will render incorrectly.\n- The PR is a simple README link addition with no code changes, but it introduces a duplicate section heading which is a clear formatting bug. This will cause the rendered README to show two identical \"Agent workspace + skills\" headings. Otherwise the change is harmless.\n- README.md — duplicate `## Agent workspace + skills` heading on lines 308–309 needs to be collapsed to a single heading.\n\n<sub>Last reviewed commit: 5f5afe2</sub>\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "irtiq7",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T14:17:10Z",
      "updatedAt": "2026-02-16T14:37:49Z",
      "headRef": "patch-1",
      "baseRef": "main",
      "filesChanged": 1,
      "additions": 1,
      "deletions": 0,
      "commits": 4,
      "labels": [
        "size: XS"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "README.md"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18113.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 2,
      "commentCount": 3,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 63,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 20,
          "weight": 0.07,
          "reason": "1 lines changed (1+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 48,
          "weight": 0.12,
          "reason": "irtiq7 (NONE, rep: 90)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 20,
          "weight": 0.12,
          "reason": "<3 lines, No issue ref, Trivial docs-only change"
        },
        {
          "name": "test_coverage",
          "score": 60,
          "weight": 0.12,
          "reason": "Docs/config PR — tests not expected"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (2 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 3314 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "3 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: size: XS"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": true,
      "spamReasons": [
        "<3 lines, No issue ref, Trivial docs-only change"
      ],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 89898,
      "title": "Show generated code from loaders in parse error messages",
      "body": "## What?\n\nThis PR adds support for displaying generated code from webpack/turbopack loaders alongside the original source in parse error messages. When a loader produces broken code, users now see both the original source and the generated code with source map information, making it much easier to debug loader issues.\n\n## Why?\n\nWhen webpack/turbopack loaders return invalid code, the error messages only showed the original source file. This made it difficult for users to understand what the loader generated and why it failed to parse. By showing both the original and generated code, users get full context about what went wrong.\n\n## How?\n\n### Core Changes\n\n1. **Added `AdditionalIssueSources` infrastructure** (`turbopack-core`):\n   - New `AdditionalIssueSource` struct to hold labeled source locations\n   - New `additional_sources()` method on the `Issue` trait\n   - `IssueSource::to_additional_sources()` helper that wraps sources with `GenerateSourceMap` in a `GeneratedCodeSource` (which strips source map support to show the actual generated code)\n\n2. **Created `GeneratedCodeSource`** (`turbopack-core`):\n   - A wrapper source that strips `GenerateSourceMap` support\n   - Allows displaying generated code without source map remapping\n   - Used to show the actual broken code that loaders produced\n\n3. **Added `description()` method to `Source` trait** (`turbopack-core`):\n   - Provides human-readable descriptions of where code comes from\n   - Implemented across all source types (file, virtual, webpack loaders, PostCSS, etc.)\n   - Creates readable chains like `\"loaders [sass-loader] transform of file content of ./styles.scss\"`\n\n4. **Updated error formatting**:\n   - `turbopack-cli-utils`: Renders additional sources in CLI output\n   - `packages/next`: Renders additional sources in browser error overlay\n   - Both show the description and code frame for generated code\n\n5. **Updated type definitions**:\n   - Added `IssueSource` and `AdditionalIssueSource` interfaces to TypeScript types\n   - Updated `PlainIssue` and NAPI bindings to include additional sources\n\n### Test Coverage\n\nAdded comprehensive e2e tests (`test/development/webpack-loader-parse-error/`) that verify:\n- JavaScript loader parse errors show both original and generated code\n- CSS loader parse errors show both original and generated code\n- Works with both Turbopack and Webpack\n- Proper source map handling and code frame display\n\n### Example Output\n\nWhen a loader produces broken code, users now see:\n```\n⨯ ./app/data.broken.js:3:1\nParsing ecmascript source code failed\n  [original source code frame]\n\nCaused by loaders [./broken-js-loader.js] transform of file content of app/data.broken.js:\n  [generated code frame showing what the loader produced]\n```\n\nThis makes it immediately clear what the loader generated and where the parse error occurred.\n\nhttps://claude.ai/code/session_01FbM2UdVB9uCtaN2826xBp5",
      "author": "sokra",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-12T09:29:19Z",
      "updatedAt": "2026-02-16T11:01:58Z",
      "headRef": "claude/test-webpack-loader-errors-DJdPW",
      "baseRef": "canary",
      "filesChanged": 31,
      "additions": 648,
      "deletions": 30,
      "commits": 11,
      "labels": [
        "type: next",
        "Turbopack",
        "created-by: Turbopack team",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "crates/next-core/src/next_image/source_asset.rs",
        "crates/next-napi-bindings/src/next_api/utils.rs",
        "packages/next/src/build/swc/generated-native.d.ts",
        "packages/next/src/build/swc/types.ts",
        "packages/next/src/shared/lib/turbopack/utils.ts",
        "test/development/sass-error/index.test.ts",
        "test/development/webpack-loader-parse-error/app/css-page/page.js",
        "test/development/webpack-loader-parse-error/app/css-page/styles.broken.css",
        "test/development/webpack-loader-parse-error/app/data.broken.js",
        "test/development/webpack-loader-parse-error/app/layout.js",
        "test/development/webpack-loader-parse-error/app/page.js",
        "test/development/webpack-loader-parse-error/broken-css-loader.js",
        "test/development/webpack-loader-parse-error/broken-js-loader.js",
        "test/development/webpack-loader-parse-error/next.config.js",
        "test/development/webpack-loader-parse-error/webpack-loader-parse-error.test.ts",
        "turbopack/crates/turbopack-cli-utils/src/issue.rs",
        "turbopack/crates/turbopack-core/src/data_uri_source.rs",
        "turbopack/crates/turbopack-core/src/file_source.rs",
        "turbopack/crates/turbopack-core/src/generated_code_source.rs",
        "turbopack/crates/turbopack-core/src/issue/analyze.rs",
        "turbopack/crates/turbopack-core/src/issue/mod.rs",
        "turbopack/crates/turbopack-core/src/lib.rs",
        "turbopack/crates/turbopack-core/src/source.rs",
        "turbopack/crates/turbopack-core/src/virtual_source.rs",
        "turbopack/crates/turbopack-css/src/process.rs",
        "turbopack/crates/turbopack-ecmascript/src/text/mod.rs",
        "turbopack/crates/turbopack-env/src/asset.rs",
        "turbopack/crates/turbopack-mdx/src/lib.rs",
        "turbopack/crates/turbopack-node/src/transforms/postcss.rs",
        "turbopack/crates/turbopack-node/src/transforms/webpack.rs",
        "turbopack/crates/turbopack-wasm/src/source.rs"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89898.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/development/sass-error/index.test.ts",
        "test/development/webpack-loader-parse-error/app/css-page/page.js",
        "test/development/webpack-loader-parse-error/app/css-page/styles.broken.css",
        "test/development/webpack-loader-parse-error/app/data.broken.js",
        "test/development/webpack-loader-parse-error/app/layout.js",
        "test/development/webpack-loader-parse-error/app/page.js",
        "test/development/webpack-loader-parse-error/broken-css-loader.js",
        "test/development/webpack-loader-parse-error/broken-js-loader.js",
        "test/development/webpack-loader-parse-error/next.config.js",
        "test/development/webpack-loader-parse-error/webpack-loader-parse-error.test.ts"
      ],
      "ageInDays": 4,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 4,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 62,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "678 lines changed (648+/30-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "sokra (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "10 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "4d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 2893 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "4 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, Turbopack, created-by: Turbopack team, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 89457,
      "title": "Turbopack: skip static/media writing for metadata files in dev mode",
      "body": "## Summary\n\nIn development mode, static metadata files (favicon.ico, opengraph-image.png, etc.) are now served directly from the app/ directory via the route handler, instead of being written to `/_next/static/media/`.\n\nThis change introduces:\n- A new `MetadataStaticImageSource` that extracts image metadata (width, height) and computes a content hash for cache-busting, without creating a `StaticOutputAsset`\n- A new `create_metadata_module()` method on `StructuredImageModuleType` for dev-mode metadata handling\n- Pass `NextMode` through `AppPageLoaderTreeBuilder` to conditionally use the lightweight module in development\n\nProduction builds continue to work as before, writing files to `/_next/static/media/`.\n\n## Test plan\n\n- [x] `pnpm test-dev-turbo test/e2e/app-dir/metadata/metadata.test.ts -t \"should render icon\"` - passes\n- [x] `pnpm test-dev-turbo test/e2e/app-dir/metadata/metadata.test.ts -t \"should have icons as route\"` - passes\n- [x] `pnpm test-dev-turbo test/e2e/app-dir/metadata/metadata.test.ts -t \"should pick up opengraph-image\"` - passes\n- [x] `pnpm test-start-turbo test/e2e/app-dir/metadata/metadata.test.ts -t \"should render icon\"` - passes (production mode still works)",
      "author": "devjiwonchoi",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-03T20:44:55Z",
      "updatedAt": "2026-02-14T21:27:46Z",
      "headRef": "turbopack/skip-static-media-for-metadata-dev",
      "baseRef": "canary",
      "filesChanged": 6,
      "additions": 136,
      "deletions": 9,
      "commits": 1,
      "labels": [
        "created-by: Next.js team",
        "Turbopack"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "crates/next-api/src/app.rs",
        "crates/next-core/src/app_page_loader_tree.rs",
        "crates/next-core/src/next_app/app_page_entry.rs",
        "crates/next-core/src/next_image/metadata_source.rs",
        "crates/next-core/src/next_image/mod.rs",
        "crates/next-core/src/next_image/module.rs"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89457.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 12,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 2,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 62,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "145 lines changed (136+/9-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "devjiwonchoi (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "12d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 1197 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "2 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: created-by: Next.js team, Turbopack"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 6553,
      "title": "feat(slack): expose thread-reply action",
      "body": "## Summary\n\nExpose `thread-reply` as a first-class action for Slack so agents don't need to discover the workaround (`send` + `replyTo`) through trial and error.\n\n## Problem\n\nWhen an agent tries `thread-reply` on Slack, it fails:\n```\nAction thread-reply is not supported for provider slack.\n```\n\nThe agent then has to fall back to using `send` with `replyTo` - which works, but requires trial-and-error discovery.\n\n## Solution\n\n- Add `thread-reply` to `listActions()` under the `messages` gate\n- Add handler that routes to `sendMessage` with `threadTs`\n- The underlying functionality already existed, this just exposes it properly\n\n## Changes\n\n- `src/channels/plugins/slack.actions.ts`: Add `thread-reply` to actions list and add handler\n- `src/channels/plugins/slack.actions.test.ts`: Add tests for listing, handling, and error cases\n\n## Test plan\n\n- [x] `thread-reply` appears in `listActions()` when messages enabled\n- [x] `thread-reply` does not appear when messages disabled\n- [x] `thread-reply` action routes to `sendMessage` with correct `threadTs`\n- [x] `thread-reply` throws helpful error when `threadId` missing\n\nFixes #6542\n\n<!-- greptile_comment -->\n\n<h2>Greptile Overview</h2>\n\n<h3>Greptile Summary</h3>\n\nThis PR exposes a new Slack channel action, `thread-reply`, by adding it to `listActions()` (behind the existing `messages` action gate) and implementing a handler that forwards to the existing Slack tool action `sendMessage` with `threadTs` set (falling back from `threadId` → `replyTo` → `toolContext.currentThreadTs`). Tests were added to validate that the action is listed when enabled, hidden when disabled, and that invoking it maps to `sendMessage` with the expected parameters and errors when `threadId` is missing.\n\n<h3>Confidence Score: 4/5</h3>\n\n- This PR looks safe to merge, with only minor correctness and test robustness issues.\n- Changes are localized to Slack action listing/dispatch and a small test extension. Previously-reported logic issues cover the main behavioral risks; beyond those, remaining concerns are mainly around misleading error messaging and tests that can be order-dependent due to mock call state.\n- src/channels/plugins/slack.actions.ts, src/channels/plugins/slack.actions.test.ts\n\n<!-- greptile_other_comments_section -->\n\n<!-- /greptile_comment -->",
      "author": "erauner12",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-01T19:48:14Z",
      "updatedAt": "2026-02-16T14:35:57Z",
      "headRef": "feat/slack-thread-reply-action",
      "baseRef": "main",
      "filesChanged": 10,
      "additions": 113,
      "deletions": 23,
      "commits": 8,
      "labels": [
        "docs",
        "channel: telegram",
        "docker"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        6542
      ],
      "changedFiles": [
        "docker-compose.yml",
        "docs/channels/telegram.md",
        "docs/concepts/model-providers.md",
        "docs/docs.json",
        "docs/providers/moonshot.md",
        "docs/start/onboarding.md",
        "docs/web/control-ui.md",
        "skills/canvas/SKILL.md",
        "src/channels/plugins/slack.actions.test.ts",
        "src/channels/plugins/slack.actions.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/6553.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/channels/plugins/slack.actions.test.ts"
      ],
      "ageInDays": 14,
      "mergeable": "conflicting",
      "reviewState": "commented",
      "reviewCount": 4,
      "commentCount": 7,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 62,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "136 lines changed (113+/23-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 47,
          "weight": 0.12,
          "reason": "erauner12 (NONE, rep: 86)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #6542"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "14d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (4 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 2306 chars"
        },
        {
          "name": "activity",
          "score": 90,
          "weight": 0.04,
          "reason": "7 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: docs, channel: telegram, docker"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 17805,
      "title": "feat: add Apple Container setup with Docker/Podman fallbacks",
      "body": "## Summary                                                                                                                        \r\n\r\nThis PR adds comprehensive Apple Container support for OpenClaw, enabling lightweight, native containerized gateway deployment on macOS with automatic fallback to Docker or Podman.\r\n\r\n## What Changed\r\n  - **New file: `apple-container-setup.sh`**\r\n    - One-command gateway setup with auto-detection of container runtimes\r\n    - Supports Apple Container (primary), Docker, and Podman (fallbacks)\r\n    - Feature parity with `docker-setup.sh`\r\n    - Includes timeout handling for macOS, extra mounts, home volume persistence, and custom APT packages\r\n\r\n  - **New file: `docs/install/apple-container.md`**\r\n    - Comprehensive setup guide matching docker.md in scope\r\n    - \"Is it right for me?\" comparison with Docker and local installs\r\n    - Control UI token setup and device pairing workflow\r\n    - Channel setup instructions (WhatsApp, Telegram, Discord)\r\n    - Power-user configuration (Playwright, browser caching, permissions)\r\n    - Dockerfile optimization guidance\r\n    - 10+ troubleshooting scenarios with solutions\r\n\r\n  - **New file: `src/apple-container-setup.test.ts`**\r\n    - Basic setup validation and image building tests\r\n\r\n## Why This Change\r\nOpenClaw users on macOS can now deploy containerized gateways using Apple Container's lightweight, native runtime without requiring Docker Desktop's overhead. The auto-detection of container runtimes provides flexibility for existing Docker/Podman users.\r\n\r\n## Testing Status\r\n✅ **Fully tested**\r\n  - Verified with Apple Container, Docker, and Podman\r\n  - Gateway startup and token generation validated\r\n  - Extra mounts and home volume persistence tested\r\n  - All troubleshooting scenarios documented and verified\r\n\r\n## AI Assistance\r\n  This PR was developed with Google Gemini assistance. All code has been reviewed and tested. Key improvements include:\r\n  - macOS timeout compatibility fixes\r\n  - Comprehensive documentation matching docker.md standards\r\n  - Feature parity validation with docker-setup.sh\r\n\r\n## Notes for Reviewers\r\n  - This PR introduces a new optional setup path; it doesn't modify existing flows\r\n  - The script gracefully falls back to Docker/Podman if Apple Container isn't available\r\n  - Documentation is comprehensive to help users choose the right container runtime\r\n  - No breaking changes to existing functionality\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nAdds support for containerized gateway deployment with auto-detection of Docker, Podman, or a primary \"Apple Container\" runtime. Includes comprehensive documentation and basic tests.\n\n**Critical Issue**: The entire PR is built around \"Apple Container\" (`https://github.com/apple/container`), which does not exist as a real project. The script looks for a `container` command that is not provided by any known Apple software. This makes the primary feature non-functional.\n\n**Other Issues**:\n- `docs.json` redirect missing leading `/` in destination path\n- Minor inconsistency with `docker-setup.sh` python3 token generation pattern\n\n**What Works**: The Docker and Podman fallback logic appears functional, and the script structure follows the existing `docker-setup.sh` patterns well.\n\n<h3>Confidence Score: 0/5</h3>\n\n- This PR cannot be merged as the primary feature is based on a non-existent tool\n- The core premise of the PR - Apple Container support - is based on a fictional container runtime that does not exist. The referenced GitHub URL `https://github.com/apple/container` is not real, and the `container` command the script searches for is not provided by any known Apple software. This makes the advertised feature completely non-functional.\n- All files need attention - `apple-container-setup.sh` references a non-existent command, and `docs/install/apple-container.md` documents a fictional tool with installation instructions that cannot work\n\n<sub>Last reviewed commit: 8de908c</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>\n\n<!-- /greptile_comment -->",
      "author": "navingate",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T06:06:30Z",
      "updatedAt": "2026-02-16T14:20:38Z",
      "headRef": "feat/apple-container-setup",
      "baseRef": "main",
      "filesChanged": 6,
      "additions": 1004,
      "deletions": 3,
      "commits": 10,
      "labels": [
        "docs",
        "size: M"
      ],
      "ciStatus": "pending",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "apple-container-setup.sh",
        "docs/docs.json",
        "docs/install/apple-container.md",
        "git",
        "git-hooks/pre-commit",
        "src/apple-container-setup.test.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17805.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/apple-container-setup.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "commented",
      "reviewCount": 7,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 62,
      "signals": [
        {
          "name": "ci_status",
          "score": 50,
          "weight": 0.15,
          "reason": "CI: pending"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "1007 lines changed (1004+/3-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 44,
          "weight": 0.12,
          "reason": "navingate (NONE, rep: 77)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (7 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 4150 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: docs, size: M"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 13988,
      "title": "feat(backup): add backup/restore CLI with local + S3 storage",
      "body": "## Summary\n\nImplements [Issue #13616](https://github.com/openclaw/openclaw/issues/13616): comprehensive backup and restore system for OpenClaw.\n\n## New Modules\n\n| File | Purpose |\n|------|---------|\n| `src/backup/types.ts` | Core types, `StorageBackend` interface, config types |\n| `src/backup/storage/local.ts` | Local filesystem storage backend |\n| `src/backup/storage/s3.ts` | S3-compatible storage (AWS, R2, MinIO, GCS) |\n| `src/backup/storage/factory.ts` | Pluggable backend factory |\n| `src/backup/manifest.ts` | Manifest creation, validation, SHA-256 integrity |\n| `src/backup/crypto.ts` | AES-256-GCM encryption via `node:crypto` |\n| `src/backup/collector.ts` | File collection with secrets redaction |\n| `src/backup/export.ts` | Export orchestration (collect -> tar.gz -> store) |\n| `src/backup/import.ts` | Import/restore with dry-run and cron merge |\n| `src/cli/backup-cli.ts` | CLI commands: export, import, list, restore |\n\n## Features\n\n- **Local and S3 storage backends** — supports AWS S3, Cloudflare R2, MinIO, GCS via endpoint config\n- **AES-256-GCM encryption** with PBKDF2 key derivation (zero external deps)\n- **SHA-256 integrity verification** via manifest checksums\n- **Secrets redaction** — API keys stripped from config backups\n- **Dry-run mode** for safe restore preview\n- **Cron job merge** — intelligently merge instead of overwrite\n- **Sidecar manifests** for quick backup listing without downloading archives\n- **Pluggable architecture** — easy to add new storage backends\n\n## Usage\n\n```bash\n# Export backup (local)\nopenclaw backup export -o my-backup.tar.gz\n\n# Export with encryption\nopenclaw backup export -o my-backup.tar.gz -e mypassphrase\n\n# Export specific components\nopenclaw backup export -c config,workspace,cron\n\n# List backups\nopenclaw backup list\n\n# Restore (dry-run)\nopenclaw backup import my-backup.tar.gz --dry-run\n\n# Restore for real\nopenclaw backup restore my-backup.tar.gz\n\n# Restore with decryption and cron merge\nopenclaw backup import my-backup.tar.gz -d mypassphrase --merge\n```\n\n## Components Backed Up\n\n| Component | Files |\n|-----------|-------|\n| `config` | `openclaw.json` (secrets redacted) |\n| `workspace` | `SOUL.md`, `MEMORY.md`, `memory/`, `skills/`, `USER.md` |\n| `cron` | `cron/jobs.json` |\n| `skills` | `~/.openclaw/skills/` |\n| `sessions` | `sessions.json` |\n| `approvals` | `exec-approvals.json` |\n| `pairing` | `~/.openclaw/pairing/` |\n\n## Modified Files\n\n- `src/cli/program/register.subclis.ts` — added `backup` subcli entry\n\n## Testing\n\n- Format check: `oxfmt --check` passes\n- No external dependencies required (S3 SDK is optional/lazy-loaded)\n\n<!-- greptile_comment -->\n\n<h2>Greptile Overview</h2>\n\n<h3>Greptile Summary</h3>\n\nThis PR adds a new `openclaw backup` sub-CLI with export/import/list/restore commands, plus a backup subsystem (file collector, manifest + integrity checks, optional AES-256-GCM encryption) and two storage backends (local filesystem and optional S3 via lazy-loaded AWS SDK).\n\nThe overall structure fits the existing CLI registration pattern (`register.subclis.ts`) and reuses existing path resolution helpers and archive extraction utilities, but there are a few correctness/security issues that should be addressed before merging (notably tar extraction safety, and aligning cron store restore with the existing cron store IO semantics).\n\n<h3>Confidence Score: 2/5</h3>\n\n- This PR should not be merged as-is due to a confirmed unsafe tar extraction path traversal in the restore flow.\n- The backup/restore feature is substantial and generally coherent, but `import/restore` currently extracts tar archives without validating entry paths, enabling arbitrary file writes outside the intended directory. There are also correctness issues around cron store merge IO semantics and S3 prefix handling that will impact real users.\n- src/backup/import.ts, src/infra/archive.ts, src/backup/storage/s3.ts\n\n<!-- greptile_other_comments_section -->\n\n<sub>(4/5) You can add custom instructions or style guidelines for the agent [here](https://app.greptile.com/review/github)!</sub>\n\n**Context used:**\n\n- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))\n- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))\n\n<!-- /greptile_comment -->",
      "author": "n24q02m",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-11T09:08:24Z",
      "updatedAt": "2026-02-16T14:11:54Z",
      "headRef": "feat/backup-restore-cli",
      "baseRef": "main",
      "filesChanged": 18,
      "additions": 3773,
      "deletions": 0,
      "commits": 8,
      "labels": [
        "cli"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        13616
      ],
      "changedFiles": [
        "src/backup/collector.test.ts",
        "src/backup/collector.ts",
        "src/backup/crypto.test.ts",
        "src/backup/crypto.ts",
        "src/backup/export.test.ts",
        "src/backup/export.ts",
        "src/backup/import.test.ts",
        "src/backup/import.ts",
        "src/backup/manifest.test.ts",
        "src/backup/manifest.ts",
        "src/backup/storage/factory.test.ts",
        "src/backup/storage/factory.ts",
        "src/backup/storage/local.test.ts",
        "src/backup/storage/local.ts",
        "src/backup/storage/s3.ts",
        "src/backup/types.ts",
        "src/cli/backup-cli.ts",
        "src/cli/program/register.subclis.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/13988.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/backup/collector.test.ts",
        "src/backup/crypto.test.ts",
        "src/backup/export.test.ts",
        "src/backup/import.test.ts",
        "src/backup/manifest.test.ts",
        "src/backup/storage/factory.test.ts",
        "src/backup/storage/local.test.ts"
      ],
      "ageInDays": 5,
      "mergeable": "unknown",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 62,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 30,
          "weight": 0.07,
          "reason": "3773 lines changed (3773+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 50,
          "weight": 0.12,
          "reason": "n24q02m (NONE, rep: 95)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #13616"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "7 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "5d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 4398 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: cli"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 90013,
      "title": "[turbopack] fix our verify features in turbo-tasks backend",
      "body": "Some recent refactorings accidentally broke these features\n\nMostly it was small API deltas (e.g. moving `get_task_description` onto TaskGuard, renaming some of the `TaskStorage` apis), but the removal of the `stateful` flag was more interesting, so this is a partial revert of  #88196\n\nI ran CI with these flags enabled and it caught a set of issues in the `resolve` package.  There are a number of non-turbotask `async` functions either constructing cells or returning cells from other turbo task functions. Some of these are called inside of concurrent iterators which can lead to non-determinism.  The fix here is simply to defer cell creation which we achieve through a simple `enum` type.\n\n",
      "author": "lukesandberg",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-14T22:35:15Z",
      "updatedAt": "2026-02-15T18:25:58Z",
      "headRef": "fix_verification_tasks",
      "baseRef": "canary",
      "filesChanged": 17,
      "additions": 338,
      "deletions": 201,
      "commits": 1,
      "labels": [
        "Turbopack",
        "created-by: Turbopack team"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        88196
      ],
      "changedFiles": [
        "crates/next-core/src/next_edge/unsupported.rs",
        "crates/next-core/src/next_font/google/mod.rs",
        "crates/next-core/src/next_font/local/mod.rs",
        "crates/next-core/src/next_root_params/mod.rs",
        "crates/next-core/src/next_server/resolve.rs",
        "crates/next-core/src/next_shared/resolve.rs",
        "turbopack/crates/turbo-tasks-backend/Cargo.toml",
        "turbopack/crates/turbo-tasks-backend/src/backend/mod.rs",
        "turbopack/crates/turbo-tasks-backend/src/backend/operation/update_cell.rs",
        "turbopack/crates/turbo-tasks-backend/src/backend/storage_schema.rs",
        "turbopack/crates/turbo-tasks/Cargo.toml",
        "turbopack/crates/turbo-tasks/src/backend.rs",
        "turbopack/crates/turbo-tasks/src/lib.rs",
        "turbopack/crates/turbo-tasks/src/manager.rs",
        "turbopack/crates/turbo-tasks/src/state.rs",
        "turbopack/crates/turbopack-core/src/resolve/mod.rs",
        "turbopack/crates/turbopack-core/src/resolve/options.rs"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90013.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 4,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 61,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "539 lines changed (338+/201-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "lukesandberg (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #88196"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 695 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "4 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "201 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: Turbopack, created-by: Turbopack team"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90026,
      "title": "fix(next-mdx): avoid webpack cache warning for dynamic plugin imports",
      "body": "﻿## What?\n\nFix `@next/mdx` loader dynamic plugin import handling to avoid webpack cache dependency-analysis warnings during `next build --webpack`.\n\n- Normalize runtime import target to a string `importPath`\n- Keep Windows compatibility via `pathToFileURL(path).href`\n- Use `import(/* webpackIgnore: true */ importPath)` for runtime-only Node import\n\n## Why?\n\nWhen using `@next/mdx`, webpack may warn about parsing build dependencies behind a dynamic `import(...)` expression in `mdx-js-loader.js`.\n\nThis import is intentionally runtime-only in Node loader execution, and static dependency analysis here is not useful but can produce noisy warnings and confusing cache-invalidation messages.\n\nFixes #89753\n\n## How?\n\nChanged `packages/next-mdx/mdx-js-loader.js`:\n\n- Before:\n  - `await import(process.platform === 'win32' ? pathToFileURL(path) : path)`\n- After:\n  - compute `importPath` first\n  - `await import(/* webpackIgnore: true */ importPath)`\n\nThis preserves behavior while avoiding webpack build-dependency analysis on this runtime import path.\n\n## Validation\n\n- `pnpm build` on repro app linked to local `next.js` completed successfully\n- `pnpm lint-eslint packages/next-mdx/mdx-js-loader.js` passed\n\n## Checklist\n\n- [x] Related issue linked (`Fixes #89753`)\n- [ ] Tests added\n- [x] Change is minimal and scoped to `@next/mdx` loader behavior\r\n",
      "author": "MapleCity1314",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-15T13:27:51Z",
      "updatedAt": "2026-02-15T13:28:10Z",
      "headRef": "fix/89753-mdx-loader-webpack-cache-warning",
      "baseRef": "canary",
      "filesChanged": 1,
      "additions": 5,
      "deletions": 4,
      "commits": 1,
      "labels": [
        "type: next"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        89753,
        89753
      ],
      "changedFiles": [
        "packages/next-mdx/mdx-js-loader.js"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90026.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 61,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "9 lines changed (5+/4-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 47,
          "weight": 0.12,
          "reason": "MapleCity1314 (NONE, rep: 86)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #89753, #89753"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 1351 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 89688,
      "title": "Add `catchError()` API for custom error boundary",
      "body": "This PR adds `catchError()` API for a granular custom error boundary. The error component generated by this API is not a true component format, as the wrapper provides additional args. Therefore, the API is a function call by design rather than a boundary component to avoid merging the `errorInfo` with the user-provided props from the wrapper.\r\n\r\n### DevTools\r\n\r\n<img width=\"466\" height=\"302\" alt=\"CleanShot 2026-02-11 at 16 32 08@2x\" src=\"https://github.com/user-attachments/assets/d56c11ad-bdce-4824-9d8b-921b1243c365\" />\r\n\r\nCloses NAR-768",
      "author": "devjiwonchoi",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-09T01:17:25Z",
      "updatedAt": "2026-02-15T04:22:54Z",
      "headRef": "jiwon/02-09-add_catcherror_api_for_custom_error_boundary",
      "baseRef": "jiwon/02-08-add_retry_logic_for_error.js",
      "filesChanged": 26,
      "additions": 944,
      "deletions": 60,
      "commits": 4,
      "labels": [
        "type: next",
        "created-by: Next.js team",
        "Turbopack",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "crates/next-core/src/next_import_map.rs",
        "crates/next-custom-transforms/src/transforms/react_server_components.rs",
        "packages/next/error.d.ts",
        "packages/next/error.js",
        "packages/next/errors.json",
        "packages/next/src/api/error.ts",
        "packages/next/src/build/create-compiler-aliases.ts",
        "packages/next/src/client/components/catch-error.tsx",
        "packages/next/src/client/components/error-boundary.tsx",
        "test/development/acceptance-app/rsc-build-errors.test.ts",
        "test/e2e/app-dir/catch-error/app/client-component/catch-error-wrapper.tsx",
        "test/e2e/app-dir/catch-error/app/client-component/layout.tsx",
        "test/e2e/app-dir/catch-error/app/client-component/page.tsx",
        "test/e2e/app-dir/catch-error/app/layout.tsx",
        "test/e2e/app-dir/catch-error/app/navigation-reset/catch-error-wrapper.tsx",
        "test/e2e/app-dir/catch-error/app/navigation-reset/error/page.tsx",
        "test/e2e/app-dir/catch-error/app/navigation-reset/layout.tsx",
        "test/e2e/app-dir/catch-error/app/navigation-reset/safe/page.tsx",
        "test/e2e/app-dir/catch-error/app/server-component/catch-error-wrapper.tsx",
        "test/e2e/app-dir/catch-error/app/server-component/layout.tsx",
        "test/e2e/app-dir/catch-error/app/server-component/page.tsx",
        "test/e2e/app-dir/catch-error/app/server-component/recover/page.tsx",
        "test/e2e/app-dir/catch-error/catch-error.test.ts",
        "test/e2e/app-dir/catch-error/next.config.js",
        "test/e2e/app-dir/catch-error/pages/pages-router.tsx",
        "test/e2e/app-dir/errors/index.test.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89688.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/development/acceptance-app/rsc-build-errors.test.ts",
        "test/e2e/app-dir/catch-error/app/client-component/catch-error-wrapper.tsx",
        "test/e2e/app-dir/catch-error/app/client-component/layout.tsx",
        "test/e2e/app-dir/catch-error/app/client-component/page.tsx",
        "test/e2e/app-dir/catch-error/app/layout.tsx",
        "test/e2e/app-dir/catch-error/app/navigation-reset/catch-error-wrapper.tsx",
        "test/e2e/app-dir/catch-error/app/navigation-reset/error/page.tsx",
        "test/e2e/app-dir/catch-error/app/navigation-reset/layout.tsx",
        "test/e2e/app-dir/catch-error/app/navigation-reset/safe/page.tsx",
        "test/e2e/app-dir/catch-error/app/server-component/catch-error-wrapper.tsx",
        "test/e2e/app-dir/catch-error/app/server-component/layout.tsx",
        "test/e2e/app-dir/catch-error/app/server-component/page.tsx",
        "test/e2e/app-dir/catch-error/app/server-component/recover/page.tsx",
        "test/e2e/app-dir/catch-error/catch-error.test.ts",
        "test/e2e/app-dir/catch-error/next.config.js",
        "test/e2e/app-dir/catch-error/pages/pages-router.tsx",
        "test/e2e/app-dir/errors/index.test.ts"
      ],
      "ageInDays": 7,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 2,
      "commentCount": 4,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 61,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "1004 lines changed (944+/60-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "devjiwonchoi (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "17 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "7d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (2 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 543 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "4 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "Risky files: packages/next/src/api/error.ts"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, created-by: Next.js team, Turbopack, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 12082,
      "title": "feat: implement plugin lifecycle interception hook architecture",
      "body": "## Origin\n\nThis implementation is based on:\n\n- Proposal gist: https://gist.github.com/openmetaloom/657c4668c09d235f8da1306e2438904b\n- OpenClaw discussion: https://github.com/openclaw/openclaw/discussions/9872\n\n## Summary\n\nThis PR implements a typed plugin lifecycle interception architecture and wires it to concrete runtime execution points.\n\nIt includes:\n\n- lifecycle API: `api.lifecycle.on(phase, handler, options)`\n- raw hook API: `api.on(hookName, handler, options)`\n- canonical + alias phase mapping to runtime hooks\n- hardened runtime behavior (fail-open/fail-closed propagation, timeout handling, retries, scoping, concurrency controls)\n- integration wiring in gateway, dispatch/messaging, recall/memory, and tool execution flows\n- expanded unit/integration tests for mapping, wiring, and failure semantics\n\n## Lifecycle APIs\n\n- `api.on(\"<hook_name>\", handler, opts)` for raw runtime hooks\n- `api.lifecycle.on(\"<phase>\", handler, opts)` for canonical phases and aliases\n\n### Execution options\n\nSupported on both APIs:\n\n- `priority`\n- `timeoutMs`\n- `mode` (`fail-open` | `fail-closed`)\n- `onTimeout` (`fail-open` | `fail-closed`)\n- `retry` (`count`, optional `backoffMs`)\n- `maxConcurrency`\n- `scope` (`channels`, `agentIds`, `toolNames`)\n- `condition`\n\n## Canonical phase -> runtime hook mapping\n\n- `boot.pre` -> `gateway_pre_start`\n- `boot.post` -> `gateway_start`\n- `shutdown.pre` -> `gateway_pre_stop`\n- `shutdown.post` -> `gateway_stop`\n- `agent.pre` -> `before_agent_start`\n- `agent.post` -> `agent_end`\n- `request.pre` -> `message_received`\n- `request.post` -> `request_post`\n- `recall.pre` -> `before_recall`\n- `recall.post` -> `after_recall`\n- `message.pre` -> `message_sending`\n- `message.post` -> `message_sent`\n- `tool.pre` -> `before_tool_call`\n- `tool.post` -> `after_tool_call`\n- `tool.error` -> `tool_error`\n- `response.error` -> `response_error`\n- `error` -> `agent_error`\n- `memory.compaction.pre` -> `before_compaction`\n- `memory.compaction.post` -> `after_compaction`\n\n## Alias -> canonical -> runtime mapping\n\n- `preBoot` -> `boot.pre` -> `gateway_pre_start`\n- `postBoot` -> `boot.post` -> `gateway_start`\n- `preShutdown` -> `shutdown.pre` -> `gateway_pre_stop`\n- `postShutdown` -> `shutdown.post` -> `gateway_stop`\n- `preAgent` -> `agent.pre` -> `before_agent_start`\n- `postRequest` -> `agent.post` -> `agent_end`\n- `preRequest` -> `request.pre` -> `message_received`\n- `postRequestIngress` -> `request.post` -> `request_post`\n- `preRecall` -> `recall.pre` -> `before_recall`\n- `postRecall` -> `recall.post` -> `after_recall`\n- `preResponse` -> `message.pre` -> `message_sending`\n- `postResponse` -> `message.post` -> `message_sent`\n- `preToolExecution` -> `tool.pre` -> `before_tool_call`\n- `postToolExecution` -> `tool.post` -> `after_tool_call`\n- `onToolError` -> `tool.error` -> `tool_error`\n- `onResponseError` -> `response.error` -> `response_error`\n- `preCompaction` -> `memory.compaction.pre` -> `before_compaction`\n- `postCompaction` -> `memory.compaction.post` -> `after_compaction`\n- `onError` -> `error` -> `agent_error`\n\nAlias coverage is validated in code to enforce one alias per runtime hook and no overlaps.\n\n## Runtime wiring added/verified\n\n- Gateway lifecycle: pre-start/start/pre-stop/stop\n- Agent lifecycle: pre-start, post-run, error\n- Recall lifecycle: before recall and after recall\n- Message lifecycle: inbound (`message_received`), post-ingress (`request_post`), pre-send (`message_sending`), post-send (`message_sent`), send-failure (`response_error`)\n- Tool lifecycle: before call, after call, tool error\n- Compaction lifecycle: pre/post compaction\n\n## Reliability and hardening\n\n- Structured hook execution errors via `PluginHookExecutionError`\n- Fail-closed propagation at critical interception points\n- Timeout behavior configurable independently via `onTimeout`\n- Retry with optional backoff for transient hook failures\n- Per-handler concurrency limits\n- Scope-based gating by channel/agent/tool\n\n## Tests and validation\n\nLocally validated with:\n\n- `pnpm lint`\n- `pnpm tsgo`\n- `pnpm canvas:a2ui:bundle && pnpm test`\n- `pnpm canvas:a2ui:bundle && bunx vitest run --config vitest.unit.config.ts`\n\nBoth CI-equivalent test paths passed locally.\n",
      "author": "tomismeta",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-08T20:38:52Z",
      "updatedAt": "2026-02-16T14:46:27Z",
      "headRef": "codex/lifecycle-hooks-fresh",
      "baseRef": "main",
      "filesChanged": 25,
      "additions": 3208,
      "deletions": 204,
      "commits": 16,
      "labels": [
        "docs",
        "channel: signal",
        "gateway",
        "commands",
        "agents",
        "size: XL"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "docs/concepts/agent-loop.md",
        "docs/tools/plugin.md",
        "src/agents/pi-embedded-runner/run/attempt.ts",
        "src/agents/pi-embedded-subscribe.handlers.lifecycle.hooks.test.ts",
        "src/agents/pi-embedded-subscribe.handlers.types.ts",
        "src/agents/pi-embedded-subscribe.ts",
        "src/agents/pi-tool-definition-adapter.ts",
        "src/agents/pi-tools.before-tool-call.e2e.test.ts",
        "src/agents/pi-tools.before-tool-call.ts",
        "src/agents/tools/memory-tool.before-recall.test.ts",
        "src/agents/tools/memory-tool.ts",
        "src/auto-reply/reply/dispatch-from-config.test.ts",
        "src/auto-reply/reply/dispatch-from-config.ts",
        "src/commands/models/list.list-command.forward-compat.test.ts",
        "src/gateway/server.impl.ts",
        "src/gateway/server.lifecycle-hooks.test.ts",
        "src/plugin-sdk/index.ts",
        "src/plugins/hooks.test.ts",
        "src/plugins/hooks.ts",
        "src/plugins/lifecycle-alias.integration.test.ts",
        "src/plugins/registry.test.ts",
        "src/plugins/registry.ts",
        "src/plugins/types.ts",
        "src/plugins/wired-hooks-compaction.test.ts",
        "src/signal/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/12082.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/agents/pi-embedded-subscribe.handlers.lifecycle.hooks.test.ts",
        "src/agents/pi-tools.before-tool-call.e2e.test.ts",
        "src/agents/tools/memory-tool.before-recall.test.ts",
        "src/auto-reply/reply/dispatch-from-config.test.ts",
        "src/commands/models/list.list-command.forward-compat.test.ts",
        "src/gateway/server.lifecycle-hooks.test.ts",
        "src/plugins/hooks.test.ts",
        "src/plugins/lifecycle-alias.integration.test.ts",
        "src/plugins/registry.test.ts",
        "src/plugins/wired-hooks-compaction.test.ts",
        "src/signal/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts"
      ],
      "ageInDays": 7,
      "mergeable": "conflicting",
      "reviewState": "commented",
      "reviewCount": 3,
      "commentCount": 4,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 61,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 30,
          "weight": 0.07,
          "reason": "3412 lines changed (3208+/204-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 43,
          "weight": 0.12,
          "reason": "tomismeta (NONE, rep: 74)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "11 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "7d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (3 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 4203 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "4 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "204 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: docs, channel: signal, gateway, commands, agents, size: XL"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 14045,
      "title": "fix(webchat): hide inbound untrusted metadata block in chat bubbles",
      "body": "Fixes #13989\n\nWebchat should not show injected inbound metadata blocks as if they were user-typed content.\n\nThis change keeps metadata available for agent processing, but removes it from chat bubble display.\n\n### What changed\n- Added display-layer stripping for inbound metadata blocks in `ui/src/ui/chat/message-extract.ts`.\n- Added unit tests in `ui/src/ui/chat/message-extract.test.ts` to confirm:\n  - metadata blocks are hidden from rendered user text\n  - normal user messages stay unchanged.\n\n### Notes\n- Scope is intentionally UI-only (no behavior change in agent context ingestion).",
      "author": "irmowan",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-11T11:02:16Z",
      "updatedAt": "2026-02-16T14:26:21Z",
      "headRef": "fix-webchat-strip-inbound-metadata",
      "baseRef": "main",
      "filesChanged": 2,
      "additions": 36,
      "deletions": 6,
      "commits": 1,
      "labels": [
        "app: web-ui"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        13989
      ],
      "changedFiles": [
        "ui/src/ui/chat/message-extract.test.ts",
        "ui/src/ui/chat/message-extract.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/14045.diff",
      "hasTests": true,
      "testFilesChanged": [
        "ui/src/ui/chat/message-extract.test.ts"
      ],
      "ageInDays": 5,
      "mergeable": "conflicting",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 3,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 61,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "42 lines changed (36+/6-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 51,
          "weight": 0.12,
          "reason": "irmowan (NONE, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #13989"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "5d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 589 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "3 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: app: web-ui"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 89295,
      "title": "Turbopack: Tree shaking fixes and code organization",
      "body": "## Summary\n\nA series of bug fixes, refactors, and code organization improvements to Turbopack's tree shaking and side effect optimization:\n\n- **Fix `ModulePart` handling for `FreeVarReference::EcmaScriptModule`** — pass `ModulePart` correctly so free variable references resolve to the right module part\n- **Extract `EcmascriptModuleRenameModule`** — split the rename/reexport logic (`RenamedExport`, `RenamedNamespace`) out of `EcmascriptModuleFacadeModule` into a dedicated `rename` module, shared between side effects optimization and tree shaking\n- **Simplify `EcmascriptModuleFacadeModule`** — now only handles the `Facade` case (locals + reexports), no longer overloaded with rename variants\n- **Reorganize tree shaking code** — moved `asset.rs` → `part/module.rs`, `chunk_item.rs` → `part/chunk_item.rs` + `side_effects/chunk_item.rs`, `side_effect_module.rs` → `side_effects/module.rs` for clearer separation between part modules and side effect modules\n- **Use `EsmExport` in `FindExportFromReexportsResult`** — reduces code duplication by reusing the existing `EsmExport` enum\n- **Minor simplifications** — code deduplication, reordered checks, and general cleanup",
      "author": "sokra",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-01-30T15:03:46Z",
      "updatedAt": "2026-02-16T11:38:41Z",
      "headRef": "sokra/tree-shaking-fixes",
      "baseRef": "canary",
      "filesChanged": 20,
      "additions": 725,
      "deletions": 309,
      "commits": 7,
      "labels": [
        "Turbopack",
        "created-by: Turbopack team"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "crates/next-api/src/server_actions.rs",
        "crates/next-core/src/next_dynamic/dynamic_module.rs",
        "crates/next-core/src/next_server_component/server_component_module.rs",
        "crates/next-core/src/next_server_utility/server_utility_module.rs",
        "turbopack/crates/turbopack-ecmascript/src/lib.rs",
        "turbopack/crates/turbopack-ecmascript/src/references/esm/base.rs",
        "turbopack/crates/turbopack-ecmascript/src/references/esm/export.rs",
        "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
        "turbopack/crates/turbopack-ecmascript/src/rename/chunk_item.rs",
        "turbopack/crates/turbopack-ecmascript/src/rename/mod.rs",
        "turbopack/crates/turbopack-ecmascript/src/rename/module.rs",
        "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/facade/module.rs",
        "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/reference.rs",
        "turbopack/crates/turbopack-ecmascript/src/tree_shake/mod.rs",
        "turbopack/crates/turbopack-ecmascript/src/tree_shake/part/chunk_item.rs",
        "turbopack/crates/turbopack-ecmascript/src/tree_shake/part/mod.rs",
        "turbopack/crates/turbopack-ecmascript/src/tree_shake/part/module.rs",
        "turbopack/crates/turbopack-ecmascript/src/tree_shake/side_effects/mod.rs",
        "turbopack/crates/turbopack-ecmascript/src/tree_shake/side_effects/module.rs",
        "turbopack/crates/turbopack/src/lib.rs"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89295.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 16,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 5,
      "isDraft": false,
      "requestedReviewers": [
        "mischnic",
        "bgw"
      ],
      "codeowners": [],
      "totalScore": 60,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "1034 lines changed (725+/309-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "sokra (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "16d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1174 chars"
        },
        {
          "name": "activity",
          "score": 90,
          "weight": 0.04,
          "reason": "5 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "309 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: Turbopack, created-by: Turbopack team"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 80,
          "weight": 0.05,
          "reason": "2 reviewer(s): mischnic, bgw"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 89412,
      "title": "Remove task snapshots from persistence",
      "body": "# Don't clone TaskStorage objects when snapshotting the database\n\n### What\n\nInstead of cloning TaskStorage objects when preparing to snapshot we directly encode the reference in the backend storage map.\n\n### Why?\nFrom a performance profile of save_snapshot i observed that ~22% of the time was spent in `clone_meta_snapshot` or `clone_data_snapshot`, while ~28% of the time was spent in `encode_task_data`.   The whole reason we are cloning is so we can drop the lock on the dashmap shard while encoding.   In principle this makes sense, however:\n\n* we are only holding *read* locks on the dashmap so we don't block other encoding threads\n* holding the read locks for slightly longer will just slow down racing writing threads, but those are rare and already incur a high cost due to the extra cloning in `track_modification`.  So slowing them down isn't too risky.\n\nFor a site like vercel-site there are ~8M tasks and 65K shards, so each shard has ~128 items.  So the worst case would be waiting for them all to flush and 128 isn't so many that the task would be blocked for a very long time. \n\nSo this should be a pure win, reduced allocations in the encoding path.",
      "author": "lukesandberg",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-02T20:35:57Z",
      "updatedAt": "2026-02-16T01:48:45Z",
      "headRef": "better_task_storage_snapshotting",
      "baseRef": "canary",
      "filesChanged": 6,
      "additions": 134,
      "deletions": 238,
      "commits": 1,
      "labels": [
        "Turbopack",
        "created-by: Turbopack team"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "turbopack/crates/turbo-tasks-backend/src/backend/mod.rs",
        "turbopack/crates/turbo-tasks-backend/src/backend/storage.rs",
        "turbopack/crates/turbo-tasks-backend/src/backend/storage_schema.rs",
        "turbopack/crates/turbo-tasks-backend/src/backing_storage.rs",
        "turbopack/crates/turbo-tasks-backend/src/kv_backing_storage.rs",
        "turbopack/crates/turbo-tasks-macros/src/derive/task_storage_macro.rs"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89412.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 13,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 2,
      "commentCount": 4,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 60,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "372 lines changed (134+/238-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "lukesandberg (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "13d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (2 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1167 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "4 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "238 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: Turbopack, created-by: Turbopack team"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 18128,
      "title": "Make implementation plan canonical",
      "body": "## Summary\\n- add docs/implementation-plan.md as canonical plan doc\\n- add stub plans/app-build-plan.md pointing to docs/implementation-plan.md\\n\\n## Testing\\n- not run (docs-only changes)",
      "author": "mangrove-one",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T14:39:56Z",
      "updatedAt": "2026-02-16T14:40:14Z",
      "headRef": "consolidate-implementation-plan",
      "baseRef": "main",
      "filesChanged": 108,
      "additions": 369,
      "deletions": 321,
      "commits": 4,
      "labels": [
        "docs",
        "channel: discord",
        "channel: telegram",
        "channel: whatsapp-web",
        "app: android",
        "app: ios",
        "app: web-ui",
        "gateway",
        "cli",
        "scripts",
        "commands",
        "agents",
        "size: M"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        ".claude/agents/security-agent.md",
        ".claude/rules/orchestration.md",
        "README.md",
        "assets/chrome-extension/README.md",
        "assets/chrome-extension/background.js",
        "assets/chrome-extension/manifest.json",
        "assets/chrome-extension/options.html",
        "assets/chrome-extension/options.js",
        "docs/cli/gateway.md",
        "docs/gateway/bonjour.md",
        "docs/gateway/security/index.md",
        "docs/help/faq.md",
        "docs/implementation-plan.md",
        "docs/index.md",
        "docs/install/gcp.md",
        "docs/install/nix.md",
        "docs/pi.md",
        "docs/platforms/android.md",
        "docs/platforms/ios.md",
        "docs/security/THREAT-MODEL-ATLAS.md",
        "docs/start/getting-started.md",
        "docs/start/lore.md",
        "docs/start/setup.md",
        "docs/tools/plugin.md",
        "docs/zh-CN/cli/gateway.md",
        "docs/zh-CN/gateway/bonjour.md",
        "docs/zh-CN/gateway/configuration.md",
        "docs/zh-CN/platforms/android.md",
        "docs/zh-CN/platforms/ios.md",
        "plans/app-build-plan.md",
        "scripts/run-node.mjs",
        "secret-template.json",
        "src/acp/client.ts",
        "src/acp/types.ts",
        "src/agents/identity.ts",
        "src/agents/minimax-vlm.ts",
        "src/agents/model-selection.ts",
        "src/agents/openclaw-tools.session-status.e2e.test.ts",
        "src/agents/pi-embedded-runner-extraparams.e2e.test.ts",
        "src/agents/pi-embedded-runner/extra-params.ts",
        "src/agents/session-transcript-repair.ts",
        "src/agents/system-prompt.e2e.test.ts",
        "src/agents/system-prompt.ts",
        "src/agents/tools/browser-tool.ts",
        "src/agents/tools/web-search.ts",
        "src/auto-reply/reply.triggers.trigger-handling.shows-endpoint-default-model-status-not-configured.e2e.test.ts",
        "src/auto-reply/reply/response-prefix-template.test.ts",
        "src/auto-reply/reply/route-reply.test.ts",
        "src/auto-reply/status.test.ts",
        "src/browser/extension-relay.ts",
        "src/browser/server-context.ts",
        "src/canvas-host/a2ui/index.html",
        "src/canvas-host/server.state-dir.test.ts",
        "src/canvas-host/server.ts",
        "src/channels/plugins/onboarding/signal.ts",
        "src/channels/plugins/onboarding/slack.ts",
        "src/cli/banner.ts",
        "src/cli/browser-cli-extension.ts",
        "src/cli/browser-cli.ts",
        "src/cli/docs-cli.ts",
        "src/cli/plugins-cli.ts",
        "src/cli/program/register.agent.ts",
        "src/cli/run-main.ts",
        "src/cli/security-cli.ts",
        "src/cli/tagline.ts",
        "src/cli/update-cli.test.ts",
        "src/cli/update-cli/status.ts",
        "src/cli/update-cli/update-command.ts",
        "src/cli/webhooks-cli.ts",
        "src/commands/agents.identity.e2e.test.ts",
        "src/commands/configure.wizard.ts",
        "src/commands/dashboard.e2e.test.ts",
        "src/commands/dashboard.ts",
        "src/commands/doctor.ts",
        "src/commands/status-all/report-lines.ts",
        "src/commands/status.command.ts",
        "src/commands/status.e2e.test.ts",
        "src/config/config.identity-defaults.test.ts",
        "src/config/runtime-overrides.test.ts",
        "src/config/types.whatsapp.ts",
        "src/daemon/constants.test.ts",
        "src/daemon/constants.ts",
        "src/daemon/systemd-unit.ts",
        "src/discord/monitor.test.ts",
        "src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.e2e.test.ts",
        "src/discord/send.creates-thread.test.ts",
        "src/entry.ts",
        "src/gateway/gateway-models.profiles.live.test.ts",
        "src/gateway/server-discovery.ts",
        "src/index.ts",
        "src/infra/bonjour.ts",
        "src/infra/provider-usage.fetch.minimax.ts",
        "src/infra/shell-env.ts",
        "src/infra/unhandled-rejections.fatal-detection.test.ts",
        "src/infra/unhandled-rejections.ts",
        "src/line/probe.test.ts",
        "src/macos/gateway-daemon.ts",
        "src/macos/relay.ts",
        "src/media/input-files.ts",
        "src/pairing/pairing-messages.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18128.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/agents/openclaw-tools.session-status.e2e.test.ts",
        "src/agents/pi-embedded-runner-extraparams.e2e.test.ts",
        "src/agents/system-prompt.e2e.test.ts",
        "src/auto-reply/reply.triggers.trigger-handling.shows-endpoint-default-model-status-not-configured.e2e.test.ts",
        "src/auto-reply/reply/response-prefix-template.test.ts",
        "src/auto-reply/reply/route-reply.test.ts",
        "src/auto-reply/status.test.ts",
        "src/canvas-host/server.state-dir.test.ts",
        "src/cli/update-cli.test.ts",
        "src/commands/agents.identity.e2e.test.ts",
        "src/commands/dashboard.e2e.test.ts",
        "src/commands/status.e2e.test.ts",
        "src/config/config.identity-defaults.test.ts",
        "src/config/runtime-overrides.test.ts",
        "src/daemon/constants.test.ts",
        "src/discord/monitor.test.ts",
        "src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.e2e.test.ts",
        "src/discord/send.creates-thread.test.ts",
        "src/gateway/gateway-models.profiles.live.test.ts",
        "src/infra/unhandled-rejections.fatal-detection.test.ts",
        "src/line/probe.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "conflicting",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 59,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "690 lines changed (369+/321-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 38,
          "weight": 0.12,
          "reason": "mangrove-one (NONE, rep: 58)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "21 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Body: 188 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "321 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: docs, channel: discord, channel: telegram, channel: whatsapp-web, app: android, app: ios, app: web-ui, gateway, cli, scripts, commands, agents, size: M"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 18115,
      "title": "fix: prevent voice message loss during concurrent update processing",
      "body": "## Bug Description\nWhen the Telegram polling loop (grammY runner) hits a transient network error, it restarts with backoff. There is a potential race window where update offsets are persisted before voice message processing completes, so if the runner crashes mid-processing, those updates are acknowledged to Telegram but never fully handled. This is a narrow race (~5% occurrence) and users can retry manually, making it low severity. The root cause likely involves the update offset persistence in the runner's fetch cycle vs. the sink's processing pipeline.\n\n**Severity:** low\n\n## Root Cause\nThe race condition is in bot.ts where recordUpdateId (line ~227) persists the highest update_id after each update's middleware completes, but updates from different chats run concurrently (sequentialize only serializes per-chat). When a batch contains [update 100 (voice, chat A), update 101 (text, chat B)], update 101 can finish first and persist lastUpdateId=101 to disk. If the runner then crashes (network error) before update 100 finishes processing, on restart shouldSkipUpdate sees lastUpdateId=101 and skips update 100 — the voice message is permanently lost. The core issue is that the offset persistence tracks the MAX update_id completed rather than ensuring ALL update_ids up to that point have been processed. Combined with the grammY runner's concurrent sink processing, any out-of-order completion creates a window where lower-numbered updates can be silently dropped.\n\n## Fix\nCreated src/telegram/update-offset-watermark.ts with contiguous watermark tracker (TCP ACK window approach). Modified src/telegram/bot.ts to use watermark - tracks in-flight update IDs and only persists offset as highest contiguous completed update_id, preventing out-of-order completion from skipping lower-numbered updates.\n\n## Regression Test\nAdded src/telegram/update-offset-watermark.test.ts with 4 tests: verifies offset doesn't advance past in-flight updates, handles in-order completion, respects initial offset, and handles gaps in update IDs.\n\n## Verification\n1) Diff matches claimed changes — 3 files modified (bot.ts, new watermark module + test). 2) Security: .gitignore exists, no sensitive files in diff. 3) All tests pass (1 pre-existing failure on main unrelated to this fix). 4) Regression test covers exact race scenario: out-of-order completion doesn't advance offset past in-flight updates. 5) Fix is minimal and targeted — watermark tracker replaces direct MAX update_id persistence with contiguous-completion tracking (TCP ACK window approach). 6) Fix addresses root cause: offset only advances when all lower update IDs are complete, preventing skipped updates on crash. 7) Test would fail without fix — without watermark, completing update 101 before 100 would immediately persist offset=101.\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nThis PR introduces a contiguous watermark tracker (`update-offset-watermark.ts`) that replaces the previous \"max completed update_id\" approach with a TCP ACK window pattern, ensuring the persisted offset only advances when all lower-numbered updates have completed. This correctly addresses the race condition where out-of-order completion could cause lower-numbered in-flight updates to be permanently skipped on crash/restart.\n\n- **New module** `update-offset-watermark.ts` cleanly implements the watermark tracker with `markStarted`/`markCompleted`/`getCurrentOffset` API and proper contiguous-completion logic.\n- **Integration in `bot.ts`** wires the watermark into the existing middleware pipeline, calling `markStarted` before handler dispatch and `markCompleted` after.\n- **Bug found:** `markStarted` is called unconditionally for all updates entering the middleware, but `recordUpdateId` short-circuits (skips `markCompleted`) for re-delivered updates with ID ≤ `lastUpdateId`. This leaves phantom entries in the `inFlight` set that permanently block watermark advancement — effectively the same class of bug this PR aims to fix, but triggered by update re-delivery instead of out-of-order completion.\n- **Test coverage** is solid for the watermark module in isolation (4 tests covering the core scenarios) but does not cover the integration-level bug with skipped updates.\n\n<h3>Confidence Score: 2/5</h3>\n\n- The watermark logic is sound in isolation but the bot.ts integration has a bug that can permanently block offset advancement after update re-delivery.\n- Score of 2 reflects that while the core watermark module is well-designed and tested, the integration in bot.ts has a logical bug where markStarted is called for re-delivered updates that will never receive a corresponding markCompleted call, causing phantom in-flight entries that block all future watermark advancement. This is the same class of update-loss bug the PR aims to fix.\n- src/telegram/bot.ts — the markStarted/markCompleted pairing in the middleware needs to be guarded against re-delivered (already-processed) update IDs.\n\n<sub>Last reviewed commit: e120cd2</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>\n\n<!-- /greptile_comment -->",
      "author": "AlekseyRodkin",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T14:21:49Z",
      "updatedAt": "2026-02-16T14:25:41Z",
      "headRef": "bugfix/telegram-polling-voice-drop-network-hiccup",
      "baseRef": "main",
      "filesChanged": 3,
      "additions": 162,
      "deletions": 3,
      "commits": 1,
      "labels": [
        "channel: telegram",
        "size: S"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "src/telegram/bot.ts",
        "src/telegram/update-offset-watermark.test.ts",
        "src/telegram/update-offset-watermark.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18115.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/telegram/update-offset-watermark.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "unknown",
      "reviewState": "commented",
      "reviewCount": 1,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 59,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "165 lines changed (162+/3-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 43,
          "weight": 0.12,
          "reason": "AlekseyRodkin (NONE, rep: 74)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "1 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 60,
          "weight": 0.08,
          "reason": "Review: commented (1 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 5169 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: channel: telegram, size: S"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 17406,
      "title": "Merge",
      "body": "## Summary\r\n\r\nDescribe the problem and fix in 2–5 bullets:\r\n\r\n- Problem:\r\n- Why it matters:\r\n- What changed:\r\n- What did NOT change (scope boundary):\r\n\r\n## Change Type (select all)\r\n\r\n- [x] Bug fix\r\n- [ ] Feature\r\n- [ ] Refactor\r\n- [ ] Docs\r\n- [ ] Security hardening\r\n- [ ] Chore/infra\r\n\r\n## Scope (select all touched areas)\r\n\r\n- [x] Gateway / orchestration\r\n- [ ] Skills / tool execution\r\n- [ ] Auth / tokens\r\n- [ ] Memory / storage\r\n- [x] Integrations\r\n- [ ] API / contracts\r\n- [ ] UI / DX\r\n- [ ] CI/CD / infra\r\n\r\n## Linked Issue/PR\r\n\r\n- Closes #\r\n- Related #\r\n\r\n## User-visible / Behavior Changes\r\n\r\nList user-visible changes (including defaults/config).  \r\nIf none, write `None`.\r\n\r\n## Security Impact (required)\r\n\r\n- New permissions/capabilities? (`Yes/No`)\r\n- Secrets/tokens handling changed? (`Yes/No`)\r\n- New/changed network calls? (`Yes/No`)\r\n- Command/tool execution surface changed? (`Yes/No`)\r\n- Data access scope changed? (`Yes/No`)\r\n- If any `Yes`, explain risk + mitigation:\r\n\r\n## Repro + Verification\r\n\r\n### Environment\r\n\r\n- OS:\r\n- Runtime/container:\r\n- Model/provider:\r\n- Integration/channel (if any):\r\n- Relevant config (redacted):\r\n\r\n### Steps\r\n\r\n1.\r\n2.\r\n3.\r\n\r\n### Expected\r\n\r\n-\r\n\r\n### Actual\r\n\r\n-\r\n\r\n## Evidence\r\n\r\nAttach at least one:\r\n\r\n- [ ] Failing test/log before + passing after\r\n- [ ] Trace/log snippets\r\n- [ ] Screenshot/recording\r\n- [ ] Perf numbers (if relevant)\r\n\r\n## Human Verification (required)\r\n\r\nWhat you personally verified (not just CI), and how:\r\n\r\n- Verified scenarios:\r\n- Edge cases checked:\r\n- What you did **not** verify:\r\n\r\n## Compatibility / Migration\r\n\r\n- Backward compatible? (`Yes/No`)\r\n- Config/env changes? (`Yes/No`)\r\n- Migration needed? (`Yes/No`)\r\n- If yes, exact upgrade steps:\r\n\r\n## Failure Recovery (if this breaks)\r\n\r\n- How to disable/revert this change quickly:\r\n- Files/config to restore:\r\n- Known bad symptoms reviewers should watch for:\r\n\r\n## Risks and Mitigations\r\n\r\nList only real risks for this PR. Add/remove entries as needed. If none, write `None`.\r\n\r\n- Risk:\r\n  - Mitigation:\n\n<!-- greptile_comment -->\n\n<h3>Greptile Summary</h3>\n\nAdded devcontainer configuration with systemd user service support for GitHub Codespaces development environment.\n\nKey changes:\n- Added `.devcontainer/Dockerfile` that installs systemd and dbus packages on the `mcr.microsoft.com/devcontainers/universal:2` base image\n- Added `.devcontainer/devcontainer.json` configured with privileged mode and `postStartCommand` to bootstrap systemd\n- Added `.devcontainer/start-systemd.sh` script that sets up systemd `--user` mode with D-Bus, journald, cgroup delegation, and environment configuration\n- Added `scripts/systemd/openclaw-gateway.service` unit file for running the OpenClaw Gateway as a systemd user service\n\n**Critical Issues Found:**\n- The systemd service file references the `vscode` user throughout (User, PATH, ReadWritePaths), but the devcontainer is configured to use the `codespace` user. This mismatch will cause the service to fail.\n- The profile snippet in `start-systemd.sh` hardcodes UID `1000` instead of using the dynamically determined `CS_UID`, which could break if the codespace user has a different UID.\n\n<h3>Confidence Score: 1/5</h3>\n\n- This PR has critical user/path mismatches that will cause the systemd service to fail\n- Multiple hardcoded references to `vscode` user in the systemd service file conflict with the `codespace` user configured in the devcontainer, plus hardcoded UID `1000` in the profile snippet could break in environments where the codespace user has a different UID. These are blocking issues that will prevent the service from working.\n- `scripts/systemd/openclaw-gateway.service` needs all user references updated, and `.devcontainer/start-systemd.sh` profile snippet needs UID variables instead of hardcoded values\n\n<sub>Last reviewed commit: c1df1a8</sub>\n\n<!-- greptile_other_comments_section -->\n\n<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>\n\n<!-- /greptile_comment -->",
      "author": "ETHNHUNT",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-15T18:36:55Z",
      "updatedAt": "2026-02-16T14:20:31Z",
      "headRef": "main",
      "baseRef": "main",
      "filesChanged": 5,
      "additions": 286,
      "deletions": 1,
      "commits": 12,
      "labels": [
        "scripts",
        "size: M"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        ".devcontainer/Dockerfile",
        ".devcontainer/devcontainer.json",
        ".devcontainer/start-systemd.sh",
        ".vscode/settings.json",
        "scripts/systemd/openclaw-gateway.service"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17406.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 4,
      "commentCount": 3,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 59,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "287 lines changed (286+/1-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 44,
          "weight": 0.12,
          "reason": "ETHNHUNT (NONE, rep: 77)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (4 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 4012 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "3 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: scripts, size: M"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 89569,
      "title": "Update the webpack version bundled in next",
      "body": "## Upgrade webpack 5.98.0 → 5.105.0\n\nUpdates webpack from 5.98.0 to 5.105.0 and webpack-dev-server from 5.2.0 to 5.2.3.\n\n### Notable webpack changes\n\n**New Features:**\n- Native `tsconfig` resolver option - can replace `tsconfig-paths-webpack-plugin` ([v5.105.0](https://github.com/webpack/webpack/releases/tag/v5.105.0))\n- `import.defer()` support for context modules ([v5.105.0](https://github.com/webpack/webpack/releases/tag/v5.105.0))\n- Array values for `devtool` option ([v5.105.0](https://github.com/webpack/webpack/releases/tag/v5.105.0))\n- Built-in `DotenvPlugin` and top-level `dotenv` option ([v5.103.0](https://github.com/webpack/webpack/releases/tag/v5.103.0))\n- Built-in `WebpackManifestPlugin` ([v5.103.0](https://github.com/webpack/webpack/releases/tag/v5.103.0))\n- `import.meta.env`, `import.meta.dirname`, `import.meta.filename` support ([v5.103.0](https://github.com/webpack/webpack/releases/tag/v5.103.0))\n- CSS `exportType` option (`link`, `text`, `css-style-sheet`) ([v5.103.0](https://github.com/webpack/webpack/releases/tag/v5.103.0))\n- New import types: `{ type: \"bytes\" }` and `{ type: \"text\" }` ([v5.102.0](https://github.com/webpack/webpack/releases/tag/v5.102.0))\n- Tree-shaking for ESM external modules with named imports ([v5.101.0](https://github.com/webpack/webpack/releases/tag/v5.101.0))\n\n**Stabilized (no longer experimental):**\n- `topLevelAwait` ([v5.102.0](https://github.com/webpack/webpack/releases/tag/v5.102.0))\n- `layers` ([v5.102.0](https://github.com/webpack/webpack/releases/tag/v5.102.0))\n\n**Bug Fixes & Security:**\n- Security fix in `HttpUriPlugin` ([v5.104.1](https://github.com/webpack/webpack/releases/tag/v5.104.1))\n- Various fixes for reexport runtime calculations, module concatenation performance\n\n### webpack-dev-server 5.2.0 → 5.2.3\n\n- ESC key to dismiss error overlay ([v5.2.3](https://github.com/webpack/webpack-dev-server/releases/tag/v5.2.3))\n- Fixed crash when error is null for runtime errors ([v5.2.2](https://github.com/webpack/webpack-dev-server/releases/tag/v5.2.2))\n- Improved cross-origin request validation ([v5.2.1](https://github.com/webpack/webpack-dev-server/releases/tag/v5.2.1))\n\n### Known Breaking changes\n\nBreaking change for `experimental.urlImports` users: Webpack 5.105.0 now validates redirect target URLs against the `allowedUris` policy. If your URL imports redirect to a different domain (e.g., `github.com/...` → `raw.githubusercontent.com/...`), you must add the redirect target domain to your `urlImports` array.\n\n### Full changelogs\n- [webpack 5.98.0...5.105.0](https://github.com/webpack/webpack/compare/v5.98.0...v5.105.0)\n- [webpack-dev-server 5.2.0...5.2.3](https://github.com/webpack/webpack-dev-server/compare/v5.2.0...v5.2.3)\n\n\nFixes #89177",
      "author": "lukesandberg",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-06T01:26:34Z",
      "updatedAt": "2026-02-14T23:34:21Z",
      "headRef": "bump_webpack_version",
      "baseRef": "canary",
      "filesChanged": 34,
      "additions": 907,
      "deletions": 475,
      "commits": 2,
      "labels": [
        "type: next",
        "Documentation",
        "created-by: Turbopack team",
        "tests"
      ],
      "ciStatus": "failure",
      "hasIssueRef": true,
      "issueNumbers": [
        89177
      ],
      "changedFiles": [
        "docs/01-app/03-api-reference/05-config/01-next-config-js/urlImports.mdx",
        "package.json",
        "packages/next/package.json",
        "packages/next/src/build/utils.ts",
        "packages/next/src/build/webpack-config.ts",
        "packages/next/src/build/webpack/loaders/next-flight-loader/index.ts",
        "packages/next/src/build/webpack/plugins/css-minimizer-plugin.ts",
        "packages/next/src/build/webpack/plugins/eval-source-map-dev-tool-plugin.ts",
        "packages/next/src/build/webpack/plugins/minify-webpack-plugin/src/index.ts",
        "packages/next/src/build/webpack/plugins/wellknown-errors-plugin/index.ts",
        "packages/next/src/bundles/webpack/packages/HotModuleReplacement.runtime.js",
        "packages/next/src/bundles/webpack/packages/JavascriptHotModuleReplacement.runtime.js",
        "packages/next/src/bundles/webpack/packages/lazy-compilation-node.js",
        "packages/next/src/bundles/webpack/packages/lazy-compilation-universal.js",
        "packages/next/src/bundles/webpack/packages/lazy-compilation-web.js",
        "packages/next/src/bundles/webpack/packages/load-http.js",
        "packages/next/src/compiled/mini-css-extract-plugin/cjs.js",
        "packages/next/src/compiled/mini-css-extract-plugin/hmr/hotModuleReplacement.js",
        "packages/next/src/compiled/mini-css-extract-plugin/index.js",
        "packages/next/src/compiled/mini-css-extract-plugin/loader.js",
        "packages/next/src/compiled/sass-loader/cjs.js",
        "packages/next/src/compiled/webpack/HotModuleReplacement.runtime.js",
        "packages/next/src/compiled/webpack/JavascriptHotModuleReplacement.runtime.js",
        "packages/next/src/compiled/webpack/bundle5.js",
        "packages/next/src/compiled/webpack/emitter-event-target.js",
        "packages/next/src/compiled/webpack/lazy-compilation-node.js",
        "packages/next/src/compiled/webpack/lazy-compilation-universal.js",
        "packages/next/src/compiled/webpack/lazy-compilation-web.js",
        "packages/next/src/compiled/webpack/load-http.js",
        "packages/next/src/server/dev/hot-reloader-webpack.ts",
        "packages/next/taskfile.js",
        "pnpm-lock.yaml",
        "test/development/middleware-errors/index.test.ts",
        "test/e2e/url-imports/next.config.js"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89569.diff",
      "hasTests": true,
      "testFilesChanged": [
        "test/development/middleware-errors/index.test.ts",
        "test/e2e/url-imports/next.config.js"
      ],
      "ageInDays": 10,
      "mergeable": "unknown",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 4,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 57,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "1382 lines changed (907+/475-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "lukesandberg (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 90,
          "weight": 0.07,
          "reason": "References: #89177"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No spam signals"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "2 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "10d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 2735 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "4 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "Risky files: package.json; 475 deletions"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, Documentation, created-by: Turbopack team, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 18141,
      "title": "fix(slack): support reply_broadcast in sendMessage tool",
      "body": "## Description\nSlack's API supports broadcasting thread replies to the channel (also_send_to_channel), but the sendMessage tool did not expose this option.\n\n## Fix\nAdded 'broadcast' parameter to Slack sendMessage tool and wired it through to the Slack API client.\n\n## AI Transparency\n- **Assisted by**: OpenClaw Agent (Claude 3.5 Sonnet / Opus)\n- **Testing level**: Fully tested with new unit tests\n- **Prompt strategy**: Self-correction loop based on codebase analysis",
      "author": "Clawborn",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T15:03:21Z",
      "updatedAt": "2026-02-16T15:03:21Z",
      "headRef": "fix/slack-thread-broadcast",
      "baseRef": "main",
      "filesChanged": 13,
      "additions": 462,
      "deletions": 21,
      "commits": 5,
      "labels": [],
      "ciStatus": "pending",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "extensions/slack/src/channel.ts",
        "src/agents/tools/slack-actions.ts",
        "src/discord/monitor/message-handler.process.ts",
        "src/discord/monitor/threading.auto-thread.test.ts",
        "src/discord/monitor/threading.ts",
        "src/process/kill-tree.ts",
        "src/process/kill-tree.unix.test.ts",
        "src/routing/session-key.continuity.test.ts",
        "src/slack/actions.ts",
        "src/slack/send.broadcast.test.ts",
        "src/slack/send.ts",
        "src/utils/usage-format.cost-defaults.test.ts",
        "src/utils/usage-format.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/18141.diff",
      "hasTests": true,
      "testFilesChanged": [
        "src/discord/monitor/threading.auto-thread.test.ts",
        "src/process/kill-tree.unix.test.ts",
        "src/routing/session-key.continuity.test.ts",
        "src/slack/send.broadcast.test.ts",
        "src/utils/usage-format.cost-defaults.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "conflicting",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 0,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 57,
      "signals": [
        {
          "name": "ci_status",
          "score": 50,
          "weight": 0.15,
          "reason": "CI: pending"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "483 lines changed (462+/21-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 29,
          "weight": 0.12,
          "reason": "Clawborn (NONE, rep: 25)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "5 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 70,
          "weight": 0.04,
          "reason": "Body: 469 chars"
        },
        {
          "name": "activity",
          "score": 30,
          "weight": 0.04,
          "reason": "0 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "No priority labels"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 90018,
      "title": "refactor: write pages router export files directly to server/pages/",
      "body": "## Summary\n- write pages-router export artifacts directly into `.next/server/pages` during `buildExport` instead of writing to `dist/export` and moving afterward\n- simplify build finalization by updating `pages-manifest` entries directly and removing the export temp directory move/cleanup flow\n- keep prerender behavior aligned by deleting `notFound` artifacts from `server/pages` and pointing static export copy logic at the new pages-router output location",
      "author": "bgub",
      "authorAssociation": "CONTRIBUTOR",
      "createdAt": "2026-02-15T05:32:54Z",
      "updatedAt": "2026-02-15T05:33:15Z",
      "headRef": "fix/export-write-directly-to-server-pages",
      "baseRef": "canary",
      "filesChanged": 2,
      "additions": 94,
      "deletions": 162,
      "commits": 1,
      "labels": [
        "type: next"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "packages/next/src/build/index.ts",
        "packages/next/src/export/index.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90018.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 1,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 1,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 56,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 100,
          "weight": 0.07,
          "reason": "256 lines changed (94+/162-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 79,
          "weight": 0.12,
          "reason": "bgub (CONTRIBUTOR, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 70,
          "weight": 0.04,
          "reason": "Body: 459 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "162 deletions"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 89684,
      "title": "Allow `reset()` from user's global-error",
      "body": "User's `global-error.js` is within the router. There's no reason it shouldn't have access to the options available to the `error.js` component. It was already available on prod. This PR syncs dev behavior to prod.\r\n\r\nFor the follow-up feature, `retry()` will also be available in `global-error.js`.",
      "author": "devjiwonchoi",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-08T22:51:17Z",
      "updatedAt": "2026-02-15T02:47:35Z",
      "headRef": "jiwon/02-08-allow_reset_from_user_s_global-error",
      "baseRef": "canary",
      "filesChanged": 3,
      "additions": 14,
      "deletions": 5,
      "commits": 2,
      "labels": [
        "type: next",
        "created-by: Next.js team"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "packages/next/src/client/components/builtin/global-error.tsx",
        "packages/next/src/client/components/error-boundary.tsx",
        "packages/next/src/next-devtools/userspace/app/app-dev-overlay-error-boundary.tsx"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89684.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 7,
      "mergeable": "unknown",
      "reviewState": "commented",
      "reviewCount": 2,
      "commentCount": 3,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 56,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "19 lines changed (14+/5-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "devjiwonchoi (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "7d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 50,
          "weight": 0.12,
          "reason": "Merge status: unknown"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (2 reviews)"
        },
        {
          "name": "body_quality",
          "score": 70,
          "weight": 0.04,
          "reason": "Body: 298 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "3 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, created-by: Next.js team"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90045,
      "title": "Adapter: STATIC_FILE.immutable",
      "body": "Expose a boolean whether a given static file is immutable\r\n\r\nPart of PACK-6802",
      "author": "mischnic",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-16T12:24:48Z",
      "updatedAt": "2026-02-16T12:44:53Z",
      "headRef": "mischnic/adapter-immutable",
      "baseRef": "canary",
      "filesChanged": 1,
      "additions": 16,
      "deletions": 0,
      "commits": 1,
      "labels": [
        "type: next",
        "created-by: Turbopack team"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "packages/next/src/build/adapter/build-complete.ts"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90045.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 0,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 3,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 55,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "16 lines changed (16+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "mischnic (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Body: 78 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "3 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: type: next, created-by: Turbopack team"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 89836,
      "title": "Turbopack: Tree Shaking imports only internal",
      "body": "<!-- Thanks for opening a PR! Your contribution is much appreciated.\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\nChoose the right checklist for the change(s) that you're making:\n\n## For Contributors\n\n### Improving Documentation\n\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\n\n### Fixing a bug\n\n- Related issues linked using `fixes #number`\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\n\n### Adding a feature\n\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\n- Related issues/discussions are linked using `fixes #number`\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\n- Documentation added\n- Telemetry added. In case of a feature if it's used or not.\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\n\n\n## For Maintainers\n\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\n- When linking to a Slack thread, you might want to share details of the conclusion\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\n- Add review comments if necessary to explain to the reviewer the logic behind a change\n\n### What?\n\n### Why?\n\n### How?\n\nCloses NEXT-\nFixes #\n\n-->\n",
      "author": "sokra",
      "authorAssociation": "MEMBER",
      "createdAt": "2026-02-11T14:56:53Z",
      "updatedAt": "2026-02-16T11:38:35Z",
      "headRef": "sokra/advanced-tree-shaking-only-internal",
      "baseRef": "graphite-base/89836",
      "filesChanged": 62,
      "additions": 474,
      "deletions": 453,
      "commits": 1,
      "labels": [
        "Turbopack",
        "created-by: Turbopack team"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "turbopack/crates/turbopack-ecmascript/src/analyzer/imports.rs",
        "turbopack/crates/turbopack-ecmascript/src/references/esm/base.rs",
        "turbopack/crates/turbopack-ecmascript/src/references/esm/export.rs",
        "turbopack/crates/turbopack-ecmascript/src/tree_shake/graph.rs",
        "turbopack/crates/turbopack-ecmascript/src/tree_shake/merge.rs",
        "turbopack/crates/turbopack-ecmascript/src/tree_shake/mod.rs",
        "turbopack/crates/turbopack-ecmascript/src/tree_shake/part/module.rs",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/1/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/2/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/3/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/amphtml-document/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/app-route/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/combined-export/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/complex/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/export-named/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/failed-1/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/failed-2/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/failed-3/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/grouping/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/ipc-evaluate/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/ipc-index/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/let-bug-1/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/logger/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/mui-sys/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/multi-export/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/nanoid/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/next-response/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/nextjs-tracer/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/node-fetch/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/otel-core/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/route-handler/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/route-kind/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/shared-2/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/shared-and-side-effects/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/shared-regression/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/simple-vars-1/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/simple/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/template-pages/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/test-config-1/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/tla-1/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/typeof-1/output.md",
        "turbopack/crates/turbopack-ecmascript/tests/tree-shaker/analyzer/write-order/output.md",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/dynamic-import/output/bf321_tests_snapshot_basic-tree-shake_dynamic-import_input_lib_63494f91.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/dynamic-import/output/bf321_tests_snapshot_basic-tree-shake_dynamic-import_input_lib_63494f91.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/dynamic-import/output/bf321_tests_snapshot_basic-tree-shake_dynamic-import_input_lib_ee638b2a.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/export-namespace/output/780ce_turbopack-tests_tests_snapshot_basic-tree-shake_export-namespace_input_2100e737._.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/export-namespace/output/780ce_turbopack-tests_tests_snapshot_basic-tree-shake_export-namespace_input_2100e737._.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/export-namespace/output/ad3e4_tests_snapshot_basic-tree-shake_export-namespace_input_index_fee7c584.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/export-namespace/output/bf321_tests_snapshot_basic-tree-shake_export-namespace_input_index_fee7c584.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/import-namespace/output/780ce_turbopack-tests_tests_snapshot_basic-tree-shake_import-namespace_input_31731fc7._.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/import-namespace/output/780ce_turbopack-tests_tests_snapshot_basic-tree-shake_import-namespace_input_31731fc7._.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/import-namespace/output/ad3e4_tests_snapshot_basic-tree-shake_import-namespace_input_index_928c6c80.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/import-namespace/output/bf321_tests_snapshot_basic-tree-shake_import-namespace_input_index_928c6c80.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/require-side-effect/output/ad3e4_tests_snapshot_basic-tree-shake_require-side-effect_input_index_ec5c94a4.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/require-side-effect/output/bf321_tests_snapshot_basic-tree-shake_require-side-effect_input_a2766cda._.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/require-side-effect/output/bf321_tests_snapshot_basic-tree-shake_require-side-effect_input_a2766cda._.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/require-side-effect/output/bf321_tests_snapshot_basic-tree-shake_require-side-effect_input_index_ec5c94a4.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/tree-shake-test-1/output/ad3e4_tests_snapshot_basic-tree-shake_tree-shake-test-1_input_index_a09a504d.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/tree-shake-test-1/output/bf321_tests_snapshot_basic-tree-shake_tree-shake-test-1_input_index_88b827c6.js",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/tree-shake-test-1/output/bf321_tests_snapshot_basic-tree-shake_tree-shake-test-1_input_index_88b827c6.js.map",
        "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/tree-shake-test-1/output/bf321_tests_snapshot_basic-tree-shake_tree-shake-test-1_input_index_a09a504d.js.map",
        "turbopack/crates/turbopack/src/lib.rs"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/89836.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 4,
      "mergeable": "mergeable",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 3,
      "isDraft": true,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 55,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 60,
          "weight": 0.07,
          "reason": "927 lines changed (474+/453-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 93,
          "weight": 0.12,
          "reason": "sokra (MEMBER, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 100,
          "weight": 0.12,
          "reason": "No issue ref, contributor bonus -1"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "4d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 1842 chars"
        },
        {
          "name": "activity",
          "score": 70,
          "weight": 0.04,
          "reason": "3 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "453 deletions"
        },
        {
          "name": "draft_status",
          "score": 10,
          "weight": 0.08,
          "reason": "Draft PR (not ready for review)"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: Turbopack, created-by: Turbopack team"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 9947,
      "title": "fix: preserve agent-events as standalone entry point for hook consumers",
      "body": "## Summary\n\nThe tsdown migration in [`a03d852`](https://github.com/openclaw/openclaw/commit/a03d852d6526eee7d60c9499828b93b0ebc6a272) (\"Migrate to tsdown, speed up JS bundling by ~10x\") inadvertently broke internal hook handlers that subscribe to agent lifecycle events via `onAgentEvent`.\n\nThis PR adds `src/infra/agent-events.ts` as an explicit tsdown entry point, restoring `dist/infra/agent-events.js` as a standalone importable file.\n\n## What changed and when\n\n**Before `a03d852` (v2026.1.29 and earlier):**\nThe build used plain `tsc`, which compiled each source file individually:\n\n```\nsrc/infra/agent-events.ts → dist/infra/agent-events.js  (standalone, ~3 KB)\n```\n\nHook handlers could safely `import(\"dist/infra/agent-events.js\")` and Node's ESM loader would return the **same cached module instance** the gateway had already loaded — sharing the same `listeners` Set. Events emitted by the gateway via `emitAgentEvent()` reached hook listeners correctly.\n\n**After `a03d852` (v2026.2.x):**\nThe build uses tsdown, which bundles non-entry modules into shared chunks:\n\n```\nsrc/infra/agent-events.ts → inlined into dist/loader-BAZoAqqR.js  (2.2 MB shared chunk, ~190 modules)\n```\n\n`dist/infra/agent-events.js` no longer exists. When a hook handler imports the shared chunk:\n\n1. **Gateway crash:** The chunk contains ~190 other modules with module-level side effects (subsystem initialization, timers, state setup). Re-executing these crashes the gateway process within ~10 seconds.\n2. **Separate module instance:** Even if the import didn't crash, Node creates a separate module instance with its own `listeners` Set. The hook's `onAgentEvent` listener never receives events from the gateway's `emitAgentEvent` calls.\n\n## What this PR does\n\nAdds a single entry to `tsdown.config.ts`:\n\n```typescript\n{\n  entry: \"src/infra/agent-events.ts\",\n  outDir: \"dist/infra\",\n  env,\n  fixedExtension: false,\n  platform: \"node\",\n},\n```\n\nThis restores `dist/infra/agent-events.js` as a standalone file that hook handlers can safely import, sharing the gateway's module instance via ESM caching.\n\n## Who this affects\n\nAny third-party internal hook that subscribes to agent lifecycle events (start/end/error), tool events, or assistant events via `onAgentEvent`. For example, [openclaw-mission-control](https://github.com/openclaw/openclaw-mission-control) uses this to sync agent activity to a dashboard.\n\nThe commit message for `a03d852` noted: *\"This might break some existing users, but if it does, it's because they were using 'private' APIs.\"* — This PR makes `agent-events` an officially supported entry point rather than leaving it as an internal that hooks must reach into unsafely.\n\n## Test plan\n\n- [ ] Build with `pnpm build` and verify `dist/infra/agent-events.js` exists as a standalone file\n- [ ] Verify gateway starts normally with a hook that imports `dist/infra/agent-events.js`\n- [ ] Verify `onAgentEvent` listener receives lifecycle events from the gateway\n- [ ] Verify existing entry points (`index.ts`, `entry.ts`, `plugin-sdk`, `extensionAPI`) are unaffected\n\n<!-- greptile_comment -->\n\n<h2>Greptile Overview</h2>\n\n<h3>Greptile Summary</h3>\n\nThis PR updates the `tsdown` build configuration to treat `src/infra/agent-events.ts` as an explicit standalone entry point. That restores a dedicated `dist/infra/agent-events.js` artifact for hook consumers, instead of having `agent-events` inlined into a shared bundle chunk. The goal is to preserve stable ESM module caching behavior so hook handlers importing `dist/infra/agent-events.js` share the same module instance as the gateway and avoid re-executing unrelated bundled modules with side effects.\n\n<h3>Confidence Score: 5/5</h3>\n\n- This PR is safe to merge with minimal risk.\n- Change is limited to adding a tsdown entry configuration; no runtime code paths are modified. The configuration is consistent with existing entries and should restore a standalone build artifact without affecting existing entry points.\n- tsdown.config.ts\n\n<!-- greptile_other_comments_section -->\n\n<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>\n\n<!-- /greptile_comment -->",
      "author": "therealkaiharper-wq",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-05T22:32:40Z",
      "updatedAt": "2026-02-16T14:35:47Z",
      "headRef": "fix/agent-events-entry-point",
      "baseRef": "main",
      "filesChanged": 1,
      "additions": 7,
      "deletions": 0,
      "commits": 1,
      "labels": [],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "tsdown.config.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/9947.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 10,
      "mergeable": "conflicting",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 55,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 70,
          "weight": 0.07,
          "reason": "7 lines changed (7+/0-)"
        },
        {
          "name": "commit_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Conventional commit format"
        },
        {
          "name": "contributor",
          "score": 28,
          "weight": 0.12,
          "reason": "therealkaiharper-wq (NONE, rep: 24)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 70,
          "weight": 0.07,
          "reason": "10d old (Aging)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 100,
          "weight": 0.04,
          "reason": "Body: 4152 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 80,
          "weight": 0.04,
          "reason": "No breaking change signals"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "No priority labels"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    },
    {
      "number": 87069,
      "title": "[feat] Added Docker examples for standalone output and export output  following best practices",
      "body": "## What?\r\n\r\nModernizes the existing `with-docker` example and adds a new `with-docker-export-output` example demonstrating different Next.js deployment strategies with Docker best practices:\r\n\r\n1. **`with-docker` (updated)** - Modernized to use App Router, TypeScript, Tailwind CSS v4, and comprehensive Docker best practices. Now includes both Node.js and Bun Dockerfile options, Docker Compose with profiles, BuildKit cache mounts, and extensive documentation.\r\n\r\n2. **`with-docker-export-output` (new)** - Demonstrates Next.js static export mode deployment with Docker, offering two serving options: **Nginx** (production-grade) and **serve** package (Node.js-based, simpler setup). Includes optimized Nginx configuration, BuildKit cache mounts, and comprehensive documentation.\r\n\r\nBoth examples include detailed documentation explaining Docker best practices, implementation decisions, and deployment guidance.\r\n\r\n## Why?\r\n\r\nThe existing `with-docker` example was using the Pages Router and lacked:\r\n\r\n- Modern Next.js patterns (App Router, TypeScript)\r\n- Detailed documentation explaining Docker best practices and implementation decisions\r\n- BuildKit cache mounts for optimized build performance\r\n- Bun runtime support as an alternative to Node.js\r\n- Docker Compose configurations for easier local development\r\n- Clear documentation about Node.js image variant choices (slim vs Alpine)\r\n- Examples demonstrating static export mode\r\n\r\nThese updates serve as comprehensive references for developers who want to understand:\r\n\r\n- How to Dockerize Next.js applications for different deployment scenarios\r\n- Why certain choices are made and how to optimize Docker setups for production\r\n- When to use standalone mode vs static export mode\r\n- How to choose between Node.js and Bun runtimes\r\n- How to choose between different web servers (Nginx vs serve) for static sites\r\n\r\n## How?\r\n\r\n### `with-docker` example (updated)\r\n\r\n- **Migrated to App Router** with TypeScript and Tailwind CSS v4\r\n- **Multi-stage Dockerfile** with three stages: dependencies installation, build, and runtime\r\n- **Bun support** via `Dockerfile.bun` with optimized configuration\r\n- **BuildKit cache mounts** for package manager stores (`npm`, `yarn`, `pnpm`, `bun`) and Next.js build cache\r\n- **Security best practices** with non-root user execution (built-in `node` and `bun` users)\r\n- **Docker Compose configuration** with profiles for Node.js (default) and Bun\r\n- **Comprehensive `.dockerignore`** to minimize build context size\r\n- **Detailed README** explaining standalone mode benefits, Node.js image choices, and deployment guidance\r\n- **Deleted** `with-docker-standalone-output` (merged into this example)\r\n\r\n### `with-docker-export-output` example (new)\r\n\r\n- **Two Dockerfile options:**\r\n  - `Dockerfile` - Nginx-based serving with `nginxinc/nginx-unprivileged` for security\r\n  - `Dockerfile.serve` - Node.js serve package-based serving for simpler deployments\r\n- **Multi-stage builds** for both options with separate dependency, build, and runtime stages\r\n- **BuildKit cache mounts** for package manager stores and Next.js build cache\r\n- **Production Nginx configuration** (`nginx.conf`) with gzip compression, caching headers, and security best practices\r\n- **Docker Compose configuration** supporting both serving options via profiles\r\n- **Comprehensive README** explaining static export mode, trade-offs between Nginx and serve\r\n\r\n### Docker best practices implemented (both examples)\r\n\r\n| Practice | Description |\r\n|----------|-------------|\r\n| Multi-stage builds | Optimal image size reduction |\r\n| Layer caching | Package files copied first |\r\n| Minimal build context | Comprehensive `.dockerignore` files |\r\n| BuildKit cache mounts | Faster subsequent builds |\r\n| Security hardening | Non-root user execution |\r\n| Corepack | yarn/pnpm version management |\r\n| Package manager auto-detection | npm, yarn, pnpm support |\r\n| Node.js 24.13.0-slim | Clear upgrade guidance |\r\n\r\n## Breaking Changes\r\n\r\n> **Warning**\r\n> - `with-docker` now uses App Router instead of Pages Router\r\n> - `with-docker-standalone-output` has been removed (merged into `with-docker`)\r\n\r\n---\r\n\r\n**Note:** After this PR is approved and merged, I plan to open a follow-up PR to update the Next.js documentation with proper links to these Docker examples.",
      "author": "kristiyan-velkov",
      "authorAssociation": "NONE",
      "createdAt": "2025-12-11T15:04:33Z",
      "updatedAt": "2026-02-16T09:41:36Z",
      "headRef": "examples/add-docker-examples",
      "baseRef": "canary",
      "filesChanged": 41,
      "additions": 3787,
      "deletions": 360,
      "commits": 33,
      "labels": [
        "examples"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        "examples/with-docker-export-output/.dockerignore",
        "examples/with-docker-export-output/.gitignore",
        "examples/with-docker-export-output/Dockerfile",
        "examples/with-docker-export-output/Dockerfile.serve",
        "examples/with-docker-export-output/README.md",
        "examples/with-docker-export-output/app/favicon.ico",
        "examples/with-docker-export-output/app/globals.css",
        "examples/with-docker-export-output/app/layout.tsx",
        "examples/with-docker-export-output/app/page.tsx",
        "examples/with-docker-export-output/compose.yml",
        "examples/with-docker-export-output/next-env.d.ts",
        "examples/with-docker-export-output/next.config.ts",
        "examples/with-docker-export-output/nginx.conf",
        "examples/with-docker-export-output/package.json",
        "examples/with-docker-export-output/pnpm-lock.yaml",
        "examples/with-docker-export-output/postcss.config.js",
        "examples/with-docker-export-output/public/next.svg",
        "examples/with-docker-export-output/tsconfig.json",
        "examples/with-docker/.dockerignore",
        "examples/with-docker/Dockerfile",
        "examples/with-docker/Dockerfile.bun",
        "examples/with-docker/README.md",
        "examples/with-docker/app/favicon.ico",
        "examples/with-docker/app/globals.css",
        "examples/with-docker/app/layout.tsx",
        "examples/with-docker/app/page.tsx",
        "examples/with-docker/compose.yml",
        "examples/with-docker/next.config.js",
        "examples/with-docker/next.config.ts",
        "examples/with-docker/package.json",
        "examples/with-docker/pages/_app.js",
        "examples/with-docker/pages/api/hello.js",
        "examples/with-docker/pages/index.js",
        "examples/with-docker/pnpm-lock.yaml",
        "examples/with-docker/postcss.config.js",
        "examples/with-docker/public/favicon.ico",
        "examples/with-docker/public/next.svg",
        "examples/with-docker/public/vercel.svg",
        "examples/with-docker/styles/Home.module.css",
        "examples/with-docker/styles/globals.css",
        "examples/with-docker/tsconfig.json"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/87069.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 66,
      "mergeable": "mergeable",
      "reviewState": "commented",
      "reviewCount": 12,
      "commentCount": 9,
      "isDraft": false,
      "requestedReviewers": [
        "wyattjoh"
      ],
      "codeowners": [],
      "totalScore": 53,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 30,
          "weight": 0.07,
          "reason": "4147 lines changed (3787+/360-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 51,
          "weight": 0.12,
          "reason": "kristiyan-velkov (NONE, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 40,
          "weight": 0.07,
          "reason": "66d old (Stale)"
        },
        {
          "name": "mergeability",
          "score": 100,
          "weight": 0.12,
          "reason": "Merge status: mergeable"
        },
        {
          "name": "review_status",
          "score": 70,
          "weight": 0.08,
          "reason": "Review: commented (12 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 4310 chars"
        },
        {
          "name": "activity",
          "score": 90,
          "weight": 0.04,
          "reason": "9 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "Risky files: examples/with-docker-export-output/tsconfig.json, examples/with-docker/pages/api/hello.js, examples/with-docker/tsconfig.json; 360 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: examples"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 80,
          "weight": 0.05,
          "reason": "1 reviewer(s): wyattjoh"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 90003,
      "title": "Fix: AppType generic should merge into root props, not pageProps",
      "body": "## Description\r\nFixes a bug where the generic type `P` in `AppType<P>` was incorrectly passed into `AppPropsType` (placing it inside `props.pageProps`) instead of being merged into the root `props`.\r\n\r\n## Bug Reference\r\nCloses (If there is an existing issue number, put it here, otherwise remove this line)\r\n\r\n## Reproduction\r\n1. Define an `AppType` with custom props: `AppType<{ foo: string }>`.\r\n2. TS expects `props.pageProps.foo` (Incorrect).\r\n3. Runtime provides `props.foo` (Correct).\r\n\r\n## The Fix\r\nUpdated `AppType` in `utils.ts` to intersect the generic `P` with `AppPropsType<any>` at the root level (`AppPropsType<any> & P`), aligning TypeScript behavior with runtime behavior.",
      "author": "arpiiitver",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-14T17:01:10Z",
      "updatedAt": "2026-02-15T19:58:24Z",
      "headRef": "fix-app-type-generic",
      "baseRef": "canary",
      "filesChanged": 27119,
      "additions": 1,
      "deletions": 2734849,
      "commits": 1,
      "labels": [
        "examples",
        "Font (next/font)",
        "Documentation",
        "Turbopack",
        "tests"
      ],
      "ciStatus": "success",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        ".alexignore",
        ".alexrc",
        ".cargo/.vercel.approvers",
        ".cargo/config.toml",
        ".claude-plugin/marketplace.json",
        ".claude-plugin/plugins/README.md",
        ".claude-plugin/plugins/cache-components/.claude-plugin/plugin.json",
        ".claude-plugin/plugins/cache-components/README.md",
        ".claude-plugin/plugins/cache-components/skills/cache-components/PATTERNS.md",
        ".claude-plugin/plugins/cache-components/skills/cache-components/REFERENCE.md",
        ".claude-plugin/plugins/cache-components/skills/cache-components/SKILL.md",
        ".claude-plugin/plugins/cache-components/skills/cache-components/TROUBLESHOOTING.md",
        ".claude/commands/pr-status.md",
        ".claude/skills/update-docs/SKILL.md",
        ".claude/skills/update-docs/references/CODE-TO-DOCS-MAPPING.md",
        ".claude/skills/update-docs/references/DOC-CONVENTIONS.md",
        ".conductor/README.md",
        ".conductor/scripts/run.sh",
        ".conductor/scripts/setup.sh",
        ".config/.vercel.approvers",
        ".config/ast-grep/rule-tests/__snapshots__/no-context-snapshot.yml",
        ".config/ast-grep/rule-tests/__snapshots__/no-map-async-cell-snapshot.yml",
        ".config/ast-grep/rule-tests/__snapshots__/resolved-vc-in-return-type-snapshot.yml",
        ".config/ast-grep/rule-tests/__snapshots__/resolved-vc-in-trait-arguments-snapshot.yml",
        ".config/ast-grep/rule-tests/no-context-test.yml",
        ".config/ast-grep/rule-tests/no-map-async-cell-test.yml",
        ".config/ast-grep/rule-tests/resolved-vc-in-return-type-test.yml",
        ".config/ast-grep/rule-tests/resolved-vc-in-trait-arguments-test.yml",
        ".config/ast-grep/rule-utils/.gitkeep",
        ".config/ast-grep/rules/no-context.yml",
        ".config/ast-grep/rules/no-map-async-cell.yml",
        ".config/ast-grep/rules/resolved-vc-in-return-type.yml",
        ".config/ast-grep/rules/resolved-vc-in-trait.yml",
        ".config/eslintignore.mjs",
        ".config/nextest.toml",
        ".cursor/commands/gt-workflow.md",
        ".cursor/worktrees.json",
        ".cursorindexingignore",
        ".devcontainer/devcontainer-lock.json",
        ".devcontainer/devcontainer.json",
        ".devcontainer/headless-browser/devcontainer-feature.json",
        ".devcontainer/headless-browser/install.sh",
        ".devcontainer/node-extras/devcontainer-feature.json",
        ".devcontainer/node-extras/install.sh",
        ".devcontainer/rust/devcontainer-feature.json",
        ".devcontainer/rust/install.sh",
        ".git-blame-ignore-revs",
        ".gitattributes",
        ".github/CODEOWNERS",
        ".github/DISCUSSION_TEMPLATE/help.yml",
        ".github/DISCUSSION_TEMPLATE/ideas.yml",
        ".github/ISSUE_TEMPLATE/1.bug_report.yml",
        ".github/ISSUE_TEMPLATE/4.docs_report.yml",
        ".github/ISSUE_TEMPLATE/config.yml",
        ".github/actions/needs-triage/action.yaml",
        ".github/actions/needs-triage/dist/index.js",
        ".github/actions/needs-triage/dist/licenses.txt",
        ".github/actions/needs-triage/package.json",
        ".github/actions/needs-triage/src/index.ts",
        ".github/actions/needs-triage/tsconfig.json",
        ".github/actions/next-integration-stat/action.yml",
        ".github/actions/next-integration-stat/dist/37.index.js",
        ".github/actions/next-integration-stat/dist/index.js",
        ".github/actions/next-integration-stat/package.json",
        ".github/actions/next-integration-stat/src/index.ts",
        ".github/actions/next-integration-stat/src/manifest.d.ts",
        ".github/actions/next-integration-stat/tsconfig.json",
        ".github/actions/next-repo-actions/dist/feature-requests/index.mjs",
        ".github/actions/next-repo-actions/dist/feature-requests/licenses.txt",
        ".github/actions/next-repo-actions/dist/issues/index.mjs",
        ".github/actions/next-repo-actions/dist/issues/licenses.txt",
        ".github/actions/next-repo-actions/dist/prs/index.js",
        ".github/actions/next-repo-actions/dist/prs/licenses.txt",
        ".github/actions/next-repo-actions/dist/wrong-issue-template/index.js",
        ".github/actions/next-repo-actions/dist/wrong-issue-template/licenses.txt",
        ".github/actions/next-repo-actions/lib/util.mjs",
        ".github/actions/next-repo-actions/package.json",
        ".github/actions/next-repo-actions/src/popular-feature-requests.mjs",
        ".github/actions/next-repo-actions/src/popular-issues.mjs",
        ".github/actions/next-repo-actions/src/popular-prs.ts",
        ".github/actions/next-repo-actions/src/wrong-issue-template.ts",
        ".github/actions/next-repo-actions/tsconfig.json",
        ".github/actions/next-stats-action/Dockerfile",
        ".github/actions/next-stats-action/README.md",
        ".github/actions/next-stats-action/action.yml",
        ".github/actions/next-stats-action/entrypoint.sh",
        ".github/actions/next-stats-action/native/.gitignore",
        ".github/actions/next-stats-action/package.json",
        ".github/actions/next-stats-action/src/add-comment.js",
        ".github/actions/next-stats-action/src/aggregate-results.js",
        ".github/actions/next-stats-action/src/constants.js",
        ".github/actions/next-stats-action/src/index.js",
        ".github/actions/next-stats-action/src/prepare/action-info.js",
        ".github/actions/next-stats-action/src/prepare/load-stats-config.js",
        ".github/actions/next-stats-action/src/prepare/repo-setup.js",
        ".github/actions/next-stats-action/src/run/benchmark-url.js",
        ".github/actions/next-stats-action/src/run/collect-diffs.js",
        ".github/actions/next-stats-action/src/run/collect-stats.js",
        ".github/actions/next-stats-action/src/run/get-dir-size.js",
        ".github/actions/next-stats-action/src/run/index.js"
      ],
      "diffUrl": "https://github.com/vercel/next.js/pull/90003.diff",
      "hasTests": false,
      "testFilesChanged": [],
      "ageInDays": 1,
      "mergeable": "conflicting",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 53,
      "signals": [
        {
          "name": "ci_status",
          "score": 100,
          "weight": 0.15,
          "reason": "CI: success"
        },
        {
          "name": "diff_size",
          "score": 30,
          "weight": 0.07,
          "reason": "2734850 lines changed (1+/2734849-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 45,
          "weight": 0.12,
          "reason": "arpiiitver (NONE, rep: 79)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 20,
          "weight": 0.12,
          "reason": "No test files changed in code PR"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "1d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 688 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "Risky files: .github/actions/needs-triage/tsconfig.json, .github/actions/next-integration-stat/tsconfig.json, .github/actions/next-repo-actions/tsconfig.json; 2734849 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: examples, Font (next/font), Documentation, Turbopack, tests"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "vercel/next.js"
    },
    {
      "number": 17909,
      "title": "memory-neo4j: task-aware memory filtering (3 layers)",
      "body": "## Problem\n\nThe auto-recall pipeline injects `<relevant-memories>` into every message based on semantic search, but has **zero awareness of task completion status**. This causes:\n\n- Stale task memories surfacing after compaction (e.g., Flux 2 research, flight bookings, conference lists)\n- Recovery protocols dumping recalled memories as status reports\n- Open questions stored as decisions triggering rogue actions in other sessions\n\n## Solution — Three Layers\n\n### Layer 1: Recall-Time Filter (`task-filter.ts`)\nNew module that reads TASKS.md completed tasks and filters recalled memories at query time:\n- Matches by task ID (e.g., `TASK-002`) and keyword overlap (2+ significant keywords)\n- 60-second cache to avoid re-parsing on every message\n- Integrated as Feature 3 in the auto-recall hook (after existing score/dedup filters)\n- **29 new tests**\n\n### Layer 2: Sleep Cycle Phase 7 (Task-Memory Cleanup)\nNew nightly cleanup phase cross-referencing completed tasks with stored memories:\n- LLM classifies each matched memory as `lasting` (keep) or `noise` (delete)\n- Conservative: keeps memories on doubt or LLM failure\n- Scans only tasks completed within last 7 days\n- New `searchMemoriesByKeywords()` method on neo4j client\n- **16 new tests**\n\n### Layer 3: Memory Task Metadata (`taskId` field)\nOptional `taskId` on memory nodes for precise task-aware filtering:\n- Auto-tags memories during auto-capture when exactly 1 active task exists\n- `taskId` flows through vector, BM25, and graph search + RRF fusion\n- Precise filtering at recall time (complements Layer 1's keyword approach)\n- `findMemoriesByTaskId()` and `clearTaskIdFromMemories()` on neo4j client\n- **20 new tests**\n\n## Verification\n- ✅ `pnpm build` — compiles cleanly\n- ✅ `pnpm lint` — 0 warnings, 0 errors\n- ✅ All 669 memory-neo4j tests pass (15 test files)\n- ✅ Zero regressions in full test suite\n- ✅ All changes backward compatible — no migration needed\n\n## Files Changed\n| File | Changes |\n|------|---------|\n| `task-filter.ts` | NEW — recall-time filter module |\n| `task-filter.test.ts` | NEW — 29 tests |\n| `sleep-cycle.task-memory.test.ts` | NEW — 16 tests |\n| `task-metadata.test.ts` | NEW — 20 tests |\n| `index.ts` | Auto-recall filter + auto-capture tagging + memory_store taskId |\n| `sleep-cycle.ts` | Phase 7 + classifyTaskMemory() |\n| `neo4j-client.ts` | searchMemoriesByKeywords + findMemoriesByTaskId + clearTaskIdFromMemories |\n| `schema.ts` | taskId on MemoryNode, StoreMemoryInput, search results |\n| `search.ts` | taskId through RRF fusion pipeline |",
      "author": "tsukhani",
      "authorAssociation": "NONE",
      "createdAt": "2026-02-16T09:05:57Z",
      "updatedAt": "2026-02-16T14:31:53Z",
      "headRef": "adabot",
      "baseRef": "main",
      "filesChanged": 134,
      "additions": 23955,
      "deletions": 635,
      "commits": 71,
      "labels": [
        "docs",
        "channel: telegram",
        "channel: voice-call",
        "gateway",
        "extensions: memory-lancedb",
        "cli",
        "scripts",
        "commands",
        "agents",
        "size: XL"
      ],
      "ciStatus": "failure",
      "hasIssueRef": false,
      "issueNumbers": [],
      "changedFiles": [
        ".gitignore",
        "docs/assets/docs-chat-widget.js",
        "extensions/memory-lancedb/benchmark.mjs",
        "extensions/memory-lancedb/config.ts",
        "extensions/memory-lancedb/export-memories.mjs",
        "extensions/memory-lancedb/index.ts",
        "extensions/memory-lancedb/inspect.mjs",
        "extensions/memory-lancedb/openclaw.plugin.json",
        "extensions/memory-neo4j/attention-gate.ts",
        "extensions/memory-neo4j/auto-capture.test.ts",
        "extensions/memory-neo4j/cli.ts",
        "extensions/memory-neo4j/config.test.ts",
        "extensions/memory-neo4j/config.ts",
        "extensions/memory-neo4j/embeddings.test.ts",
        "extensions/memory-neo4j/embeddings.ts",
        "extensions/memory-neo4j/extractor.test.ts",
        "extensions/memory-neo4j/extractor.ts",
        "extensions/memory-neo4j/index.test.ts",
        "extensions/memory-neo4j/index.ts",
        "extensions/memory-neo4j/llm-client.ts",
        "extensions/memory-neo4j/message-utils.ts",
        "extensions/memory-neo4j/mid-session-refresh.test.ts",
        "extensions/memory-neo4j/neo4j-client.entity-dedup.test.ts",
        "extensions/memory-neo4j/neo4j-client.test.ts",
        "extensions/memory-neo4j/neo4j-client.ts",
        "extensions/memory-neo4j/openclaw.plugin.json",
        "extensions/memory-neo4j/package.json",
        "extensions/memory-neo4j/schema.test.ts",
        "extensions/memory-neo4j/schema.ts",
        "extensions/memory-neo4j/search.test.ts",
        "extensions/memory-neo4j/search.ts",
        "extensions/memory-neo4j/sleep-cycle.credential-scan.test.ts",
        "extensions/memory-neo4j/sleep-cycle.task-memory.test.ts",
        "extensions/memory-neo4j/sleep-cycle.ts",
        "extensions/memory-neo4j/task-filter.test.ts",
        "extensions/memory-neo4j/task-filter.ts",
        "extensions/memory-neo4j/task-ledger.test.ts",
        "extensions/memory-neo4j/task-ledger.ts",
        "extensions/memory-neo4j/task-metadata.test.ts",
        "extensions/memory-neo4j/tsconfig.json",
        "extensions/voice-call/src/manager.ts",
        "extensions/voice-call/src/manager/twiml.ts",
        "extensions/voice-call/src/providers/plivo.ts",
        "extensions/voice-call/src/providers/stt-openai-realtime.ts",
        "extensions/voice-call/src/providers/telnyx.ts",
        "extensions/voice-call/src/providers/tts-openai.ts",
        "extensions/voice-call/src/providers/twilio.ts",
        "extensions/voice-call/src/voice-mapping.ts",
        "package.json",
        "pnpm-lock.yaml",
        "scripts/update-and-restart.sh",
        "src/agents/bootstrap-hooks.ts",
        "src/agents/compaction.ts",
        "src/agents/context-window-guard.e2e.test.ts",
        "src/agents/context-window-guard.ts",
        "src/agents/context.ts",
        "src/agents/memory-search.ts",
        "src/agents/pi-embedded-helpers/bootstrap.ts",
        "src/agents/pi-embedded-runner/compact.default-instructions.test.ts",
        "src/agents/pi-embedded-runner/compact.ts",
        "src/agents/pi-embedded-runner/run/attempt.ts",
        "src/agents/pi-embedded-runner/run/payloads.e2e.test.ts",
        "src/agents/pi-embedded-runner/system-prompt.post-compaction.test.ts",
        "src/agents/sandbox/docker.ts",
        "src/agents/sandbox/manage.ts",
        "src/agents/skills.e2e.test.ts",
        "src/agents/skills/types.ts",
        "src/agents/skills/workspace.ts",
        "src/agents/system-prompt-report.ts",
        "src/agents/system-prompt.ts",
        "src/agents/tool-mutation.test.ts",
        "src/agents/tool-mutation.ts",
        "src/agents/workspace.tasks-bootstrap.test.ts",
        "src/agents/workspace.ts",
        "src/auto-reply/commands-registry.data.ts",
        "src/auto-reply/model.ts",
        "src/auto-reply/reply/agent-runner-execution.ts",
        "src/auto-reply/reply/agent-runner-memory.ts",
        "src/auto-reply/reply/agent-runner.memory-flush.task-checkpoint.test.ts",
        "src/auto-reply/reply/agent-runner.ts",
        "src/auto-reply/reply/commands-context-report.ts",
        "src/auto-reply/reply/commands-core.ts",
        "src/auto-reply/reply/directives.ts",
        "src/auto-reply/reply/exec/directive.ts",
        "src/auto-reply/reply/get-reply-inline-actions.ts",
        "src/auto-reply/reply/get-reply-run.ts",
        "src/auto-reply/reply/get-reply.ts",
        "src/auto-reply/reply/memory-flush.ts",
        "src/auto-reply/reply/post-compaction-recovery.test.ts",
        "src/auto-reply/reply/post-compaction-recovery.ts",
        "src/auto-reply/reply/session-updates.ts",
        "src/auto-reply/reply/session.ts",
        "src/browser/pw-session.ts",
        "src/cli/banner.ts",
        "src/cli/logs-cli.test.ts",
        "src/cli/logs-cli.ts",
        "src/cli/memory-cli.ts",
        "src/cli/run-main.test.ts",
        "src/cli/run-main.ts",
        "src/commands/agent.ts"
      ],
      "diffUrl": "https://github.com/openclaw/openclaw/pull/17909.diff",
      "hasTests": true,
      "testFilesChanged": [
        "extensions/memory-neo4j/auto-capture.test.ts",
        "extensions/memory-neo4j/config.test.ts",
        "extensions/memory-neo4j/embeddings.test.ts",
        "extensions/memory-neo4j/extractor.test.ts",
        "extensions/memory-neo4j/index.test.ts",
        "extensions/memory-neo4j/mid-session-refresh.test.ts",
        "extensions/memory-neo4j/neo4j-client.entity-dedup.test.ts",
        "extensions/memory-neo4j/neo4j-client.test.ts",
        "extensions/memory-neo4j/schema.test.ts",
        "extensions/memory-neo4j/search.test.ts",
        "extensions/memory-neo4j/sleep-cycle.credential-scan.test.ts",
        "extensions/memory-neo4j/sleep-cycle.task-memory.test.ts",
        "extensions/memory-neo4j/task-filter.test.ts",
        "extensions/memory-neo4j/task-ledger.test.ts",
        "extensions/memory-neo4j/task-metadata.test.ts",
        "src/agents/context-window-guard.e2e.test.ts",
        "src/agents/pi-embedded-runner/compact.default-instructions.test.ts",
        "src/agents/pi-embedded-runner/run/payloads.e2e.test.ts",
        "src/agents/pi-embedded-runner/system-prompt.post-compaction.test.ts",
        "src/agents/skills.e2e.test.ts",
        "src/agents/tool-mutation.test.ts",
        "src/agents/workspace.tasks-bootstrap.test.ts",
        "src/auto-reply/reply/agent-runner.memory-flush.task-checkpoint.test.ts",
        "src/auto-reply/reply/post-compaction-recovery.test.ts",
        "src/cli/logs-cli.test.ts",
        "src/cli/run-main.test.ts"
      ],
      "ageInDays": 0,
      "mergeable": "conflicting",
      "reviewState": "none",
      "reviewCount": 0,
      "commentCount": 1,
      "isDraft": false,
      "requestedReviewers": [],
      "codeowners": [],
      "totalScore": 50,
      "signals": [
        {
          "name": "ci_status",
          "score": 10,
          "weight": 0.15,
          "reason": "CI: failure"
        },
        {
          "name": "diff_size",
          "score": 30,
          "weight": 0.07,
          "reason": "24590 lines changed (23955+/635-)"
        },
        {
          "name": "commit_quality",
          "score": 50,
          "weight": 0.04,
          "reason": "Non-standard title"
        },
        {
          "name": "contributor",
          "score": 51,
          "weight": 0.12,
          "reason": "tsukhani (NONE, rep: 100)"
        },
        {
          "name": "issue_ref",
          "score": 30,
          "weight": 0.07,
          "reason": "No issue reference"
        },
        {
          "name": "spam",
          "score": 80,
          "weight": 0.12,
          "reason": "No issue ref"
        },
        {
          "name": "test_coverage",
          "score": 90,
          "weight": 0.12,
          "reason": "26 test file(s) changed"
        },
        {
          "name": "staleness",
          "score": 100,
          "weight": 0.07,
          "reason": "0d old (Fresh)"
        },
        {
          "name": "mergeability",
          "score": 10,
          "weight": 0.12,
          "reason": "Merge status: conflicting"
        },
        {
          "name": "review_status",
          "score": 40,
          "weight": 0.08,
          "reason": "Review: none (0 reviews)"
        },
        {
          "name": "body_quality",
          "score": 90,
          "weight": 0.04,
          "reason": "Body: 2535 chars"
        },
        {
          "name": "activity",
          "score": 50,
          "weight": 0.04,
          "reason": "1 comments"
        },
        {
          "name": "breaking_change",
          "score": 40,
          "weight": 0.04,
          "reason": "Risky files: extensions/memory-neo4j/tsconfig.json, package.json; 635 deletions"
        },
        {
          "name": "draft_status",
          "score": 90,
          "weight": 0.08,
          "reason": "Ready for review"
        },
        {
          "name": "milestone",
          "score": 40,
          "weight": 0.07,
          "reason": "No milestone attached"
        },
        {
          "name": "label_priority",
          "score": 50,
          "weight": 0.05,
          "reason": "Labels: docs, channel: telegram, channel: voice-call, gateway, extensions: memory-lancedb, cli, scripts, commands, agents, size: XL"
        },
        {
          "name": "codeowners",
          "score": 40,
          "weight": 0.05,
          "reason": "No CODEOWNERS match"
        },
        {
          "name": "requested_reviewers",
          "score": 40,
          "weight": 0.05,
          "reason": "No reviewers requested"
        }
      ],
      "isSpam": false,
      "spamReasons": [],
      "visionAlignment": "unchecked",
      "_repo": "openclaw/openclaw"
    }
  ],
  "duplicateClusters": [],
  "summary": "Multi-repo scan: 41 PRs from vercel/next.js + 50 PRs from openclaw/openclaw"
}